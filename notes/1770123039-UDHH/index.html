<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Blog"><title>OS</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.16.0/devicon.min.css"><script>
      // This script runs synchronously in the head to prevent FOUC (Flash of Unstyled Content)
      (function() {
        const THEME_KEY = 'nord-theme';
        const DARK = 'dark';
        
        function getStoredTheme() {
          try {
            return localStorage.getItem(THEME_KEY);
          } catch {
            return null;
          }
        }
        
        function getSystemTheme() {
          return window.matchMedia('(prefers-color-scheme: dark)').matches ? DARK : 'light';
        }
        
        function getTheme() {
          return getStoredTheme() || getSystemTheme();
        }
        
        function applyTheme(theme) {
          const html = document.documentElement;
          if (theme === DARK) {
            html.classList.add('dark');
          } else {
            html.classList.remove('dark');
          }
        }
        
        // Apply theme immediately before page renders
        applyTheme(getTheme());
      })();
    </script><link rel="stylesheet" href="/_astro/_id_.6ed6JusR.css">
<style>.knowledge-graph-container[data-astro-cid-zjb43jqo]{border:1px solid var(--nord-4);border-radius:8px;background:var(--nord-6);position:relative;overflow:hidden}.knowledge-graph-container[data-astro-cid-zjb43jqo]:fullscreen,.knowledge-graph-container[data-astro-cid-zjb43jqo]::-webkit-full-screen{width:100vw;height:100vh;border-radius:0}.knowledge-graph-container[data-astro-cid-zjb43jqo]:fullscreen .knowledge-graph-wrapper[data-astro-cid-zjb43jqo],.knowledge-graph-container[data-astro-cid-zjb43jqo]::-webkit-full-screen .knowledge-graph-wrapper[data-astro-cid-zjb43jqo]{width:100%;height:100%}.knowledge-graph-toolbar{position:absolute;top:8px;right:8px;z-index:10;display:flex;gap:4px;align-items:center}.knowledge-graph-toolbar-btn{width:32px;height:32px;padding:0;border:1px solid var(--nord-4);border-radius:6px;background:var(--nord-6);color:var(--nord-2);font-size:16px;font-weight:600;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .15s,color .15s}.knowledge-graph-toolbar-btn:hover{background:var(--nord-5);color:var(--nord-10)}.knowledge-graph-toolbar-btn:active{background:var(--nord-4)}.knowledge-graph-wrapper[data-astro-cid-zjb43jqo]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.knowledge-graph-node{cursor:pointer;stroke:#5e81ac;stroke-width:2.5px;transition:all .2s ease}.knowledge-graph-node:hover{stroke-width:2.5px;filter:brightness(1.2)}.knowledge-graph-node.active{stroke:var(--nord-14);stroke-width:3px;filter:drop-shadow(0 0 8px rgba(191,97,106,.5))}.knowledge-graph-node--current{stroke:var(--nord-10);stroke-width:3px;filter:drop-shadow(0 0 6px rgba(94,129,172,.6))}.knowledge-graph-node--outlink{stroke:var(--nord-14);stroke-width:2.5px}.knowledge-graph-node--backlink{stroke:var(--nord-15);stroke-width:2.5px}.knowledge-graph-node--both{stroke:var(--nord-12);stroke-width:2.5px}.knowledge-graph-node--neighbor{stroke:var(--nord-4);stroke-width:2px;opacity:.9}.knowledge-graph-link{stroke:#4c566a;stroke-opacity:.85;stroke-width:2px}.knowledge-graph-link.active{stroke:var(--nord-11);stroke-opacity:.9;stroke-width:2px}.knowledge-graph-label{pointer-events:none;font-size:11px;text-anchor:middle;fill:var(--nord-1);font-weight:500;text-shadow:0 0 3px var(--nord-6)}.knowledge-graph-tooltip{position:absolute;padding:8px 12px;background:var(--nord-0);border:1px solid var(--nord-3);border-radius:4px;font-size:12px;color:var(--nord-6);pointer-events:none;z-index:1000;box-shadow:0 2px 8px #0000004d;white-space:nowrap}.knowledge-graph-tooltip-type{color:var(--nord-8);font-size:11px}.knowledge-graph-legend{position:absolute;bottom:8px;left:8px;z-index:10;display:flex;flex-wrap:wrap;gap:8px 12px;font-size:11px;color:var(--nord-2)}.kg-legend-item{display:inline-flex;align-items:center;gap:4px}.kg-legend--current{color:var(--nord-10)}.kg-legend--outlink{color:var(--nord-14)}.kg-legend--backlink{color:var(--nord-15)}.kg-legend--both{color:var(--nord-12)}.kg-legend--neighbor{color:var(--nord-4);opacity:.9}
html{scroll-behavior:smooth}article[data-astro-cid-v5yihett]{word-break:break-word}
</style></head> <body class="text-nord-3 dark:text-nord-5 transition-all bg-gradient-light"> <header class="border-b border-nord-5 dark:border-nord-1 bg-nord-6 dark:bg-nord-0"> <nav class="max-w-4xl mx-auto px-4 py-5 flex items-center justify-between gap-4"> <div class="flex items-center gap-2 min-w-0"> <a href="/" title="Liu" class="shrink-0 p-1.5 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-lg dark:hover:shadow-nord-8/20 active:scale-95"> <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"> <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path> <circle cx="12" cy="7" r="4"></circle> </svg> </a> <h1 class="text-xl font-bold truncate"> <a href="/" class="text-nord-2 dark:text-nord-6 hover:text-nord-10 dark:hover:text-nord-8 transition-colors"> Liu </a> </h1> </div> <div class="flex items-center gap-2 shrink-0"> <a href="https://github.com/gh-liu" title="GitHub" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex active:scale-95"> <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-label="GitHub"> <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path> </svg> </a> <a href="https://x.com" title="X" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex active:scale-95"> <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-label="X"> <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24h-6.657l-5.207-6.807-5.975 6.807H2.306l7.644-8.74-8.179-10.76h6.467l4.713 6.231 5.429-6.231zM17.002 18.807h1.844L6.983 4.126H5.025l11.977 14.681z"></path> </svg> </a> <span class="w-px h-4 bg-nord-4 dark:bg-nord-2 shrink-0" aria-hidden="true"></span> <div class="relative series-dropdown" id="series-dropdown-root"> <a href="/notes/series" title="Series" aria-expanded="false" aria-haspopup="true" aria-controls="series-dropdown-panel" id="series-dropdown-trigger" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex active:scale-95"> <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M4 6h16M4 12h16M4 18h16"></path> </svg> </a> <div id="series-dropdown-panel" class="absolute right-0 top-full mt-1 py-2 min-w-[12rem] max-h-[70vh] overflow-y-auto rounded-lg border border-nord-4 dark:border-nord-2 bg-nord-6 dark:bg-nord-1 shadow-lg z-50 hidden" role="menu"> <div id="series-dropdown-list" class="py-1"> <span class="block px-3 py-2 text-xs text-nord-4 dark:text-nord-3">åŠ è½½ä¸­â€¦</span> </div> <div class="border-t border-nord-4 dark:border-nord-2 pt-1 mt-1"> <a href="/notes/series" class="block px-3 py-2 text-sm text-nord-9 dark:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-2 transition-colors">
æŸ¥çœ‹å…¨éƒ¨ç³»åˆ— â†’
</a> </div> </div> </div> <div class="relative tags-dropdown" id="tags-dropdown-root"> <a href="/notes/tags" title="Tags" aria-expanded="false" aria-haspopup="true" aria-controls="tags-dropdown-panel" id="tags-dropdown-trigger" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex active:scale-95"> <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M5 3h14v17L12 17l-7 3V3z"></path> </svg> </a> <div id="tags-dropdown-panel" class="absolute right-0 top-full mt-1 py-2 min-w-[12rem] max-h-[70vh] overflow-y-auto rounded-lg border border-nord-4 dark:border-nord-2 bg-nord-6 dark:bg-nord-1 shadow-lg z-50 hidden" role="menu"> <div id="tags-dropdown-list" class="py-1"> <span class="block px-3 py-2 text-xs text-nord-4 dark:text-nord-3">åŠ è½½ä¸­â€¦</span> </div> <div class="border-t border-nord-4 dark:border-nord-2 pt-1 mt-1"> <a href="/notes/tags" class="block px-3 py-2 text-sm text-nord-9 dark:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-2 transition-colors">
æŸ¥çœ‹å…¨éƒ¨æ ‡ç­¾ â†’
</a> </div> </div> </div> <div class="search-container" id="search-wrapper" data-astro-cid-t47yvtpn><button id="search-toggle" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex" aria-label="Search notes" title="Search (âŒ˜K)" data-astro-cid-t47yvtpn><svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-t47yvtpn><circle cx="11" cy="11" r="8" data-astro-cid-t47yvtpn></circle><path d="m21 21-4.35-4.35" data-astro-cid-t47yvtpn></path></svg></button><div id="search-modal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 flex items-start justify-center pt-20 backdrop-blur-sm" data-astro-cid-t47yvtpn><div class="bg-nord-6 dark:bg-nord-0 rounded-2xl shadow-2xl w-full max-w-2xl border border-nord-5 dark:border-nord-1 max-h-[70vh] flex flex-col overflow-hidden animate-fade-in" data-astro-cid-t47yvtpn><div class="p-4 border-b border-nord-5 dark:border-nord-1" data-astro-cid-t47yvtpn><input type="search" id="search-input" placeholder="Search notes... (use #tag for tag search)" class="w-full px-4 py-2 bg-nord-5 dark:bg-nord-1 text-nord-2 dark:text-nord-6 placeholder-nord-3 dark:placeholder-nord-4 rounded focus:outline-none focus:ring-2 focus:ring-nord-9 dark:focus:ring-nord-8" autocomplete="off" data-astro-cid-t47yvtpn></div><div id="search-results" class="flex-1 overflow-y-auto p-4" data-astro-cid-t47yvtpn><p class="text-nord-3 dark:text-nord-5 text-sm" data-astro-cid-t47yvtpn>Type to search...</p></div><div class="p-3 border-t border-nord-5 dark:border-nord-1 text-xs text-nord-3 dark:text-nord-4" data-astro-cid-t47yvtpn><p data-astro-cid-t47yvtpn>Press <kbd class="px-1 py-0.5 bg-nord-4 dark:bg-nord-2 rounded" data-astro-cid-t47yvtpn>Esc</kbd> to close | Use <kbd class="px-1 py-0.5 bg-nord-4 dark:bg-nord-2 rounded" data-astro-cid-t47yvtpn>#tag</kbd> to search by tag</p></div></div></div></div><script>(function(){const pagefindUrl = "/pagefind/pagefind.js";

  if (!globalThis.pagefindLoaded) {
    globalThis.pagefindLoaded = true;
    
    let pagefind;
    let searchInput;
    let searchModal;
    let searchResults;
    let isSearchOpen = false;

    async function initSearch() {
      if (typeof window === "undefined") return;

      try {
        pagefind = await import(pagefindUrl);
        await pagefind.init();
      } catch (error) {
        console.log("Search not available.", error);
        return;
      }

      searchInput = document.getElementById("search-input");
      searchModal = document.getElementById("search-modal");
      searchResults = document.getElementById("search-results");
      const toggleBtn = document.getElementById("search-toggle");

      if (!searchInput || !searchModal || !searchResults || !toggleBtn) return;

      toggleBtn.addEventListener("click", () => {
        openSearch();
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeSearch();
        }
        if ((e.metaKey || e.ctrlKey) && e.key === "k") {
          e.preventDefault();
          isSearchOpen ? closeSearch() : openSearch();
        }
      });

      searchModal.addEventListener("click", (e) => {
        if (e.target === searchModal) closeSearch();
      });

      searchInput.addEventListener("input", async (e) => {
        const query = e.target.value.trim();
        if (!query) {
          searchResults.innerHTML = '<p class="text-nord-3 dark:text-nord-5 text-sm">Type to search...</p>';
          return;
        }

        // Check if query starts with #tag
        const isTagSearch = query.startsWith('#');
        let results;
        
        if (isTagSearch) {
          // Tag search
          const tag = query.slice(1).toUpperCase();
          results = await pagefind.search(`tag:${tag}`);
        } else {
          // Regular text search
          results = await pagefind.search(query);
        }

        if (results.results.length === 0) {
          searchResults.innerHTML = '<p class="text-nord-3 dark:text-nord-5 text-sm">No results found.</p>';
          return;
        }

        let html = '<ul class="space-y-2">';
        for (const result of results.results) {
          const data = await result.data();
          // Extract title from h1 or use URL slug as fallback
          const title = data.meta?.title || data.title || (data.url.split('/').pop() || 'untitled').replace(/-/g, ' ');
          html += `<li><a href="${data.url}" class="block p-3 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-2 text-nord-9 dark:text-nord-8 hover:text-nord-10 dark:hover:text-nord-7 transition-all hover:shadow-md duration-200 border border-transparent hover:border-nord-9 dark:hover:border-nord-8"><div class="font-medium">${title}</div><div class="text-xs text-nord-3 dark:text-nord-5 mt-1 line-clamp-2">${data.excerpt || ""}</div></a></li>`;
        }
        searchResults.innerHTML = html + "</ul>";
      });
    }

    function openSearch() {
      isSearchOpen = true;
      searchModal.classList.remove("hidden");
      searchInput.focus();
      document.body.style.overflow = "hidden";
    }

    function closeSearch() {
      isSearchOpen = false;
      searchModal.classList.add("hidden");
      searchInput.value = "";
      searchResults.innerHTML = '<p class="text-nord-3 dark:text-nord-5 text-sm">Type to search...</p>';
      document.body.style.overflow = "";
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", initSearch);
    } else {
      initSearch();
    }
  }
})();</script> <button id="theme-toggle" aria-label="Toggle theme" title="Toggle theme" class="group relative p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-3 dark:text-nord-4 transition-all duration-200 ease-out hover:scale-110 inline-flex"> <span class="inline-block transition-transform duration-200 ease-out group-hover:rotate-12"> <svg id="sun-icon" class="w-4 h-4 text-nord-13 hidden dark:block" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line> </svg> <svg id="moon-icon" class="w-4 h-4 text-nord-9 block dark:hidden" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path> </svg> </span> </button> <script>
  const THEME_KEY = 'nord-theme';
  const DARK = 'dark';
  
  function getStoredTheme() {
    return localStorage.getItem(THEME_KEY);
  }
  
  function getSystemTheme() {
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? DARK : 'light';
  }
  
  function getTheme() {
    return getStoredTheme() || getSystemTheme();
  }
  
  function applyTheme(theme) {
    const html = document.documentElement;
    if (theme === DARK) {
      html.classList.add('dark');
    } else {
      html.classList.remove('dark');
    }
  }
  
  function toggleTheme() {
    const currentTheme = getTheme();
    const newTheme = currentTheme === DARK ? 'light' : DARK;
    localStorage.setItem(THEME_KEY, newTheme);
    applyTheme(newTheme);
  }
  
  const themeToggle = document.getElementById('theme-toggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', toggleTheme);
  }
</script> </div> </nav> </header> <main class="max-w-4xl mx-auto px-4 py-12" data-pagefind-body> <aside id="toc-sidebar" class="fixed left-0 top-0 h-screen w-56 bg-nord-6 dark:bg-nord-0 border-r border-nord-5 dark:border-nord-1 overflow-y-auto overflow-x-hidden pt-4 pb-4 transition-transform duration-300 -translate-x-full z-50" data-astro-cid-vrmg3htk> <nav class="px-4 space-y-1" data-astro-cid-vrmg3htk> <!-- Close button --> <button id="toc-close" class="flex justify-end w-full mb-4 p-2 text-nord-2 dark:text-nord-6 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors" aria-label="Close navigation" data-astro-cid-vrmg3htk> <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-vrmg3htk> <path d="M18 6L6 18M6 6l12 12" data-astro-cid-vrmg3htk></path> </svg> </button> <h3 class="text-xs font-bold text-nord-2 dark:text-nord-6 uppercase tracking-widest px-2 py-3 border-b border-nord-5 dark:border-nord-1" data-astro-cid-vrmg3htk>
On this page
</h3> <ul class="space-y-0.5 text-sm mt-4" data-astro-cid-vrmg3htk> <li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#01--scheduler" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 0.1 Â· Scheduler </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#011--è°ƒåº¦æ–¹å¼" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.1.1 Â· è°ƒåº¦æ–¹å¼ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#012--ä»»åŠ¡å†åˆ†é…è°ƒåº¦" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.1.2 Â· ä»»åŠ¡å†åˆ†é…è°ƒåº¦ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#013--è°ƒåº¦å™¨è®¾è®¡" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.1.3 Â· è°ƒåº¦å™¨è®¾è®¡ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#014--linux-process-scheduler" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.1.4 Â· Linux Process Scheduler </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#02--å†…å­˜ç®¡ç†" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 0.2 Â· å†…å­˜ç®¡ç† </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#021--å†…å­˜å¸ƒå±€" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.2.1 Â· å†…å­˜å¸ƒå±€ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#022--å †å†…å­˜ç®¡ç†" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.2.2 Â· å †å†…å­˜ç®¡ç† </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#023--å†…å­˜åˆ†é…" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.2.3 Â· å†…å­˜åˆ†é… </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#024--åƒåœ¾å›æ”¶" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.2.4 Â· åƒåœ¾å›æ”¶ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#025--é«˜çº§åƒåœ¾å›æ”¶ç®—æ³•" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.2.5 Â· é«˜çº§åƒåœ¾å›æ”¶ç®—æ³• </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#11--io" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.1 Â· I/O </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#111--åŒæ­¥" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 1.1.1 Â· åŒæ­¥ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#112--å¼‚æ­¥" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 1.1.2 Â· å¼‚æ­¥ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#12--r" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.2 Â· r </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#13--sys-call" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.3 Â· sys call </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#14--å¯»å€æ¨¡å¼" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.4 Â· å¯»å€æ¨¡å¼ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#15--å˜é‡" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.5 Â· å˜é‡ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#16--å¸¸é‡" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.6 Â· å¸¸é‡ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#17--ç®—æœ¯é€»è¾‘" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.7 Â· ç®—æœ¯ã€é€»è¾‘ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#18--æ¡ä»¶" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.8 Â· æ¡ä»¶ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#19--å¾ªç¯" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.9 Â· å¾ªç¯ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#110--æ•°å­—å­—ç¬¦ä¸²æ•°ç»„" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 1.10 Â· æ•°å­—ã€å­—ç¬¦ä¸²ã€æ•°ç»„ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#121--debugging-profiling-tracing" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 12.1 Â· debugging, profiling, tracing </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1211--linux-application-stack" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.1.1 Â· linux application stack </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#122--linux" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 12.2 Â· linux </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1221--æ¥å£" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.1 Â· æ¥å£ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1222--ç»„æˆ" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.2 Â· ç»„æˆ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1223--shell" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.3 Â· shell </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1224--åº”ç”¨ç¨‹åº" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.4 Â· åº”ç”¨ç¨‹åº </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1225--å†…æ ¸ç»“æ„" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.5 Â· å†…æ ¸ç»“æ„ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1226--è¿›ç¨‹çº¿ç¨‹" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.6 Â· è¿›ç¨‹/çº¿ç¨‹ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1227--è°ƒåº¦" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.7 Â· è°ƒåº¦ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1228--è¿›ç¨‹é—´é€šä¿¡-ipc" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.8 Â· è¿›ç¨‹é—´é€šä¿¡ IPC </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#1229--ç³»ç»Ÿè°ƒç”¨" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.9 Â· ç³»ç»Ÿè°ƒç”¨ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#12210--å¯åŠ¨" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.10 Â· å¯åŠ¨ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#12211--å†…å­˜" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.11 Â· å†…å­˜ </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#12212--å†…å­˜ç®¡ç†" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.12 Â· å†…å­˜ç®¡ç† </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#12213--io" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.13 Â· IO </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#12214--fs" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.14 Â· fs </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#12215--è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 12.2.15 Â· è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ </a> </li> </ul> </nav> </aside> <!-- Toggle button - fixed at left edge --> <button id="toc-toggle" class="fixed left-0 top-4 p-3 rounded-r-lg bg-nord-9 dark:bg-nord-8 text-nord-6 dark:text-nord-0 hover:bg-nord-10 dark:hover:bg-nord-7 hover:text-nord-6 dark:hover:text-nord-0 transition-colors shadow-lg z-40" aria-label="Toggle sidebar" title="Toggle sidebar (â† â†’)" data-astro-cid-vrmg3htk> <svg id="toggle-icon" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-vrmg3htk> <path d="M4 6h16M4 12h16M4 18h16" data-astro-cid-vrmg3htk></path> </svg> </button> <script>
  const TOC_KEY = 'toc-open';
  const sidebar = document.getElementById('toc-sidebar');
  const toggle = document.getElementById('toc-toggle');
  const closeBtn = document.getElementById('toc-close');

  function getSidebarState() {
    return localStorage.getItem(TOC_KEY) !== 'false';
  }

  function setSidebarState(open) {
    localStorage.setItem(TOC_KEY, open ? 'true' : 'false');
  }

  function updateSidebar() {
    const isOpen = getSidebarState();
    if (sidebar) {
      if (isOpen) {
        sidebar.classList.remove('-translate-x-full');
      } else {
        sidebar.classList.add('-translate-x-full');
      }
    }
  }

  function toggleSidebar() {
    const isOpen = getSidebarState();
    setSidebarState(!isOpen);
    updateSidebar();
  }

  // Initialize
  updateSidebar();

  // Event listeners
  if (toggle) {
    toggle.addEventListener('click', toggleSidebar);
  }

  if (closeBtn) {
    closeBtn.addEventListener('click', toggleSidebar);
  }

  // Keyboard shortcut: left/right arrow to toggle
  document.addEventListener('keydown', (e) => {
    if ((e.key === 'ArrowLeft' || e.key === 'ArrowRight') && e.ctrlKey) {
      e.preventDefault();
      toggleSidebar();
    }
  });

  // Highlight current section on scroll
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          document.querySelectorAll('.toc-item a').forEach((link) => {
            link.classList.remove('text-nord-9', 'dark:text-nord-8', 'font-semibold', 'bg-nord-5', 'dark:bg-nord-1');
            link.classList.add('text-nord-3', 'dark:text-nord-4');
          });
          const activeLink = document.querySelector(
            `.toc-item a[href="#${entry.target.id}"]`
          );
          if (activeLink) {
            activeLink.classList.remove('text-nord-3', 'dark:text-nord-4');
            activeLink.classList.add('text-nord-9', 'dark:text-nord-8', 'font-semibold', 'bg-nord-5', 'dark:bg-nord-1');
          }
        }
      });
    },
    { rootMargin: '-50% 0px -50% 0px' }
  );

  document.querySelectorAll('h2, h3').forEach((heading) => {
    if (heading.id) {
      observer.observe(heading);
    }
  });

  // Close sidebar on link click
  document.querySelectorAll('.toc-item a').forEach((link) => {
    link.addEventListener('click', () => {
      setSidebarState(false);
      updateSidebar();
    });
  });
</script>  <article class="prose prose-nord dark:prose-nord max-w-none
      prose-headings:font-serif
      prose-code:before:content-none prose-code:after:content-none" data-astro-cid-v5yihett> <header class="mb-8" data-astro-cid-v5yihett> <h1 class="mb-3" data-pagefind-meta="title" data-astro-cid-v5yihett>OS</h1> <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4" data-astro-cid-v5yihett> <div class="text-sm text-nord-3 dark:text-nord-5" data-astro-cid-v5yihett> <div> <div class="flex flex-wrap gap-2 mb-2"> <span class="inline-flex items-center gap-1 px-2.5 py-1 text-xs bg-nord-7 dark:bg-nord-7 text-nord-0 dark:text-nord-0 rounded font-medium"> <span>ğŸ“…</span> <span>2026-02-05</span> </span> <span class="inline-flex items-center gap-1 px-2.5 py-1 text-xs bg-nord-8 dark:bg-nord-8 text-nord-0 dark:text-nord-0 rounded font-medium"> <span>âœï¸</span> <span>2026-02-05</span> </span>  <div class="flex flex-wrap gap-2"> <a href="/notes/tag/CS" class="inline-flex items-center gap-1 px-2.5 sm:px-3 py-1.5 sm:py-1 text-xs sm:text-xs font-semibold rounded bg-nord-6 dark:bg-nord-2/60 shadow-sm dark:shadow-md transition-all duration-200 ease-out hover:shadow-md dark:hover:shadow-lg hover:translate-y-[-1px] tag-text-blue-light dark:tag-text-blue-dark !no-underline hover:!no-underline" title="Tag: CS"> <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M5 3h14v17L12 17l-7 3V3z"></path> </svg> <span>CS</span>  </a><a href="/notes/tag/OS" class="inline-flex items-center gap-1 px-2.5 sm:px-3 py-1.5 sm:py-1 text-xs sm:text-xs font-semibold rounded bg-nord-6 dark:bg-nord-2/60 shadow-sm dark:shadow-md transition-all duration-200 ease-out hover:shadow-md dark:hover:shadow-lg hover:translate-y-[-1px] tag-text-blue-light dark:tag-text-blue-dark !no-underline hover:!no-underline" title="Tag: OS"> <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M5 3h14v17L12 17l-7 3V3z"></path> </svg> <span>OS</span>  </a> </div> </div> </div> </div> <div class="text-sm" data-astro-cid-v5yihett> <div> <div class="flex items-center gap-4"> <!-- Back to notes link - removed, now in footer --> <!-- Show only links and backlinks stats --> <!-- Outlinks -->  <!-- Backlinks -->  <!-- No links message --> <span class="text-nord-3 dark:text-nord-4 italic">No related notes</span> </div> <!-- Modals --> <div id="outlinks-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"> <div class="bg-nord-6 dark:bg-nord-0 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-nord-5 dark:border-nord-1"> <!-- Header --> <div class="sticky top-0 bg-nord-6 dark:bg-nord-0 border-b border-nord-5 dark:border-nord-1 px-6 py-4 flex items-center justify-between"> <h2 class="text-lg font-semibold text-nord-2 dark:text-nord-6"> Outlinks <span class="text-sm font-normal text-nord-3 dark:text-nord-5 ml-2">
(0)
</span> </h2> <button class="close-modal p-1 text-nord-3 dark:text-nord-4 hover:bg-nord-5 dark:hover:bg-nord-1 hover:text-nord-2 dark:hover:text-nord-5 rounded transition-colors" aria-label="Close modal"> <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M18 6L6 18M6 6l12 12"></path> </svg> </button> </div> <!-- Content --> <div class="p-6"> <p class="text-nord-3 dark:text-nord-5 text-center py-8">
No outlinks found
</p> </div> </div> </div> <script>(function(){const modalId = "outlinks-modal";
const type = "outlinks";

  const modal = document.getElementById(modalId);
  const closeButtons = modal ? modal.querySelectorAll('.close-modal') : [];

  // Create camelCase function name: "backlinks" -> "openBacklinksModal"
  const functionName = `open${type.charAt(0).toUpperCase() + type.slice(1)}Modal`;

  // Open modal
  window[functionName] = function() {
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
  };

  // Close modal
  function closeModal() {
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  }

  // Close button listeners
  closeButtons.forEach((btn) => {
    btn.addEventListener('click', closeModal);
  });

  // Close on background click
  if (modal) {
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        closeModal();
      }
    });
  }

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeModal();
    }
  });
})();</script> <div id="backlinks-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"> <div class="bg-nord-6 dark:bg-nord-0 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-nord-5 dark:border-nord-1"> <!-- Header --> <div class="sticky top-0 bg-nord-6 dark:bg-nord-0 border-b border-nord-5 dark:border-nord-1 px-6 py-4 flex items-center justify-between"> <h2 class="text-lg font-semibold text-nord-2 dark:text-nord-6"> Backlinks <span class="text-sm font-normal text-nord-3 dark:text-nord-5 ml-2">
(0)
</span> </h2> <button class="close-modal p-1 text-nord-3 dark:text-nord-4 hover:bg-nord-5 dark:hover:bg-nord-1 hover:text-nord-2 dark:hover:text-nord-5 rounded transition-colors" aria-label="Close modal"> <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M18 6L6 18M6 6l12 12"></path> </svg> </button> </div> <!-- Content --> <div class="p-6"> <p class="text-nord-3 dark:text-nord-5 text-center py-8">
No backlinks found
</p> </div> </div> </div> <script>(function(){const modalId = "backlinks-modal";
const type = "backlinks";

  const modal = document.getElementById(modalId);
  const closeButtons = modal ? modal.querySelectorAll('.close-modal') : [];

  // Create camelCase function name: "backlinks" -> "openBacklinksModal"
  const functionName = `open${type.charAt(0).toUpperCase() + type.slice(1)}Modal`;

  // Open modal
  window[functionName] = function() {
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
  };

  // Close modal
  function closeModal() {
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  }

  // Close button listeners
  closeButtons.forEach((btn) => {
    btn.addEventListener('click', closeModal);
  });

  // Close on background click
  if (modal) {
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        closeModal();
      }
    });
  }

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeModal();
    }
  });
})();</script> <script>
  // Outlinks button - calls window.openOutlinksModal()
  document.querySelectorAll('.open-outlinks-btn').forEach((btn) => {
    btn.addEventListener('click', () => {
      if (window.openOutlinksModal) {
        window.openOutlinksModal();
      }
    });
  });

  // Backlinks button - calls window.openBacklinksModal()
  document.querySelectorAll('.open-backlinks-btn').forEach((btn) => {
    btn.addEventListener('click', () => {
      if (window.openBacklinksModal) {
        window.openBacklinksModal();
      }
    });
  });
</script> </div> </div> </div> </header>    <h2 id="01--scheduler">0.1 Â· Scheduler</h2>
<p>å¾…è°ƒåº¦ä»»åŠ¡ï¼šçº¿ç¨‹ï¼Œå¤„äºæ‰§è¡Œ/æœªæ‰§è¡ŒçŠ¶æ€ï¼Œæœ‰ä¸åŒä¼˜å…ˆçº§<br>
èµ„æºï¼šCPUæ—¶é—´ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡</p>
<div class="mermaid-container mermaid-svg" data-format="svg">
            <div class="mermaid-svg-dark" data-theme="dark"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 190.65 596" width="190.65" height="596" style="--bg:#2e3440;--fg:#d8dee9;--line:#4c566a;--accent:#88c0d0;--muted:#616e88;background:var(--bg)">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
  text { font-family: 'Inter', system-ui, sans-serif; }
  svg {
    /* Derived from --bg and --fg (overridable via --line, --accent, etc.) */
    --_text:          var(--fg);
    --_text-sec:      var(--muted, color-mix(in srgb, var(--fg) 60%, var(--bg)));
    --_text-muted:    var(--muted, color-mix(in srgb, var(--fg) 40%, var(--bg)));
    --_text-faint:    color-mix(in srgb, var(--fg) 25%, var(--bg));
    --_line:          var(--line, color-mix(in srgb, var(--fg) 30%, var(--bg)));
    --_arrow:         var(--accent, color-mix(in srgb, var(--fg) 50%, var(--bg)));
    --_node-fill:     var(--surface, color-mix(in srgb, var(--fg) 3%, var(--bg)));
    --_node-stroke:   var(--border, color-mix(in srgb, var(--fg) 20%, var(--bg)));
    --_group-fill:    var(--bg);
    --_group-hdr:     color-mix(in srgb, var(--fg) 5%, var(--bg));
    --_inner-stroke:  color-mix(in srgb, var(--fg) 12%, var(--bg));
    --_key-badge:     color-mix(in srgb, var(--fg) 10%, var(--bg));
  }
</style>
<defs>
  <marker id="arrowhead" markerWidth="8" markerHeight="4.8" refX="8" refY="2.4" orient="auto">
    <polygon points="0 0, 8 2.4, 0 4.8" fill="var(--_arrow)"></polygon>
  </marker>
  <marker id="arrowhead-start" markerWidth="8" markerHeight="4.8" refX="0" refY="2.4" orient="auto-start-reverse">
    <polygon points="8 0, 0 2.4, 8 4.8" fill="var(--_arrow)"></polygon>
  </marker>
</defs>
<rect x="65.025" y="40" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="65.025" y="100" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="47.15" y="160" width="96.35000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="220" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="280" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="340" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.3" y="400" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.3" y="460" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="40" y="520" width="110.65" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<text x="95.325" y="58" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="95.325" y="118" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="95.325" y="178" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler</text>
<text x="95.325" y="238" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="95.325" y="298" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="95.325" y="358" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="95.325" y="418" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task1--</text>
<text x="95.325" y="478" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">tasl2--</text>
<text x="95.325" y="538" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler--</text>
</svg></div>
            <div class="mermaid-svg-light" data-theme="light"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 190.65 596" width="190.65" height="596" style="--bg:#eceff4;--fg:#434c5e;--line:#4c566a;--accent:#5e81ac;--muted:#4c566a;background:var(--bg)">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
  text { font-family: 'Inter', system-ui, sans-serif; }
  svg {
    /* Derived from --bg and --fg (overridable via --line, --accent, etc.) */
    --_text:          var(--fg);
    --_text-sec:      var(--muted, color-mix(in srgb, var(--fg) 60%, var(--bg)));
    --_text-muted:    var(--muted, color-mix(in srgb, var(--fg) 40%, var(--bg)));
    --_text-faint:    color-mix(in srgb, var(--fg) 25%, var(--bg));
    --_line:          var(--line, color-mix(in srgb, var(--fg) 30%, var(--bg)));
    --_arrow:         var(--accent, color-mix(in srgb, var(--fg) 50%, var(--bg)));
    --_node-fill:     var(--surface, color-mix(in srgb, var(--fg) 3%, var(--bg)));
    --_node-stroke:   var(--border, color-mix(in srgb, var(--fg) 20%, var(--bg)));
    --_group-fill:    var(--bg);
    --_group-hdr:     color-mix(in srgb, var(--fg) 5%, var(--bg));
    --_inner-stroke:  color-mix(in srgb, var(--fg) 12%, var(--bg));
    --_key-badge:     color-mix(in srgb, var(--fg) 10%, var(--bg));
  }
</style>
<defs>
  <marker id="arrowhead" markerWidth="8" markerHeight="4.8" refX="8" refY="2.4" orient="auto">
    <polygon points="0 0, 8 2.4, 0 4.8" fill="var(--_arrow)"></polygon>
  </marker>
  <marker id="arrowhead-start" markerWidth="8" markerHeight="4.8" refX="0" refY="2.4" orient="auto-start-reverse">
    <polygon points="8 0, 0 2.4, 8 4.8" fill="var(--_arrow)"></polygon>
  </marker>
</defs>
<rect x="65.025" y="40" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="65.025" y="100" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="47.15" y="160" width="96.35000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="220" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="280" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="340" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.3" y="400" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.3" y="460" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="40" y="520" width="110.65" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<text x="95.325" y="58" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="95.325" y="118" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="95.325" y="178" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler</text>
<text x="95.325" y="238" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="95.325" y="298" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="95.325" y="358" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="95.325" y="418" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task1--</text>
<text x="95.325" y="478" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">tasl2--</text>
<text x="95.325" y="538" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler--</text>
</svg></div>
          </div>
<p>è°ƒåº¦å¼€é”€ï¼šä¸Šä¸‹æ–‡åˆ‡æ¢</p>
<h3 id="011--è°ƒåº¦æ–¹å¼">0.1.1 Â· è°ƒåº¦æ–¹å¼</h3>
<ol>
<li>æŠ¢å å¼Preemptiveï¼šå…è®¸ä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«è°ƒåº¦å™¨æŒ‚èµ·ã€‚</li>
<li>åä½œå¼Cooperativeï¼šä¹Ÿå«éæŠ¢å å¼è°ƒåº¦ï¼Œæ˜¯æŒ‡å½“å‰è¿è¡Œçš„ä»»åŠ¡é€šè¿‡è‡ªèº«ä»£ç é€»è¾‘__ä¸»åŠ¨é€šçŸ¥è°ƒåº¦å™¨__è®©å‡ºèµ„æºã€‚</li>
</ol>
<p>ä»»åŠ¡æ‰§è¡Œæ—¶é—´é•¿ï¼Œåä½œå¼ä¼šä½¿å¾—éƒ¨åˆ†ä»»åŠ¡é¥¿æ­»ï¼›ä»»åŠ¡æ‰§è¡ŒçŸ­ï¼Œåä½œå¼å¯ä»¥å¸¦æ¥è¾ƒå°‘ä»»åŠ¡åˆ‡æ¢è€Œé™ä½å¼€é”€ï¼Œæé«˜è°ƒåº¦æ€§èƒ½ã€‚</p>
<p>ä¸€èˆ¬ä»¥æŠ¢å å¼ä¸ºä¸»ï¼ŒåŒæ—¶æ”¯æŒåä½œå¼ã€‚</p>
<h3 id="012--ä»»åŠ¡å†åˆ†é…è°ƒåº¦">0.1.2 Â· ä»»åŠ¡å†åˆ†é…è°ƒåº¦</h3>
<p>å·¥ä½œåˆ†äº«ï¼šè°ƒåº¦å™¨åˆ›å»ºä»»åŠ¡æ—¶ï¼Œå°†ä¸€éƒ¨åˆ†ä»»åŠ¡åˆ†ç»™å…¶ä»–è°ƒåº¦å™¨ï¼›
å·¥ä½œçªƒå–ï¼šå½“å‰è°ƒåº¦å™¨çš„èµ„æºæœªå……åˆ†åˆ©ç”¨æ—¶ï¼Œå»å…¶ä»–è°ƒåº¦å™¨çªƒå–ä¸€äº›å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p>
<p>å·¥ä½œçªƒå–åªæœ‰åœ¨å½“å‰è°ƒå–å™¨çš„èµ„æºæœªå……åˆ†åˆ©ç”¨æ—¶ï¼Œæ‰çªƒå–ï¼Œå¼€é”€æ›´å°ã€‚</p>
<h3 id="013--è°ƒåº¦å™¨è®¾è®¡">0.1.3 Â· è°ƒåº¦å™¨è®¾è®¡</h3>
<p>å•è°ƒåº¦å™¨ï¼šä¸²è¡Œè°ƒåº¦
å¤šè°ƒåº¦å™¨ï¼šå¹¶è¡Œè°ƒåº¦</p>
<div class="mermaid-container mermaid-svg" data-format="svg">
            <div class="mermaid-svg-dark" data-theme="dark"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 197.8 956" width="197.8" height="956" style="--bg:#2e3440;--fg:#d8dee9;--line:#4c566a;--accent:#88c0d0;--muted:#616e88;background:var(--bg)">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
  text { font-family: 'Inter', system-ui, sans-serif; }
  svg {
    /* Derived from --bg and --fg (overridable via --line, --accent, etc.) */
    --_text:          var(--fg);
    --_text-sec:      var(--muted, color-mix(in srgb, var(--fg) 60%, var(--bg)));
    --_text-muted:    var(--muted, color-mix(in srgb, var(--fg) 40%, var(--bg)));
    --_text-faint:    color-mix(in srgb, var(--fg) 25%, var(--bg));
    --_line:          var(--line, color-mix(in srgb, var(--fg) 30%, var(--bg)));
    --_arrow:         var(--accent, color-mix(in srgb, var(--fg) 50%, var(--bg)));
    --_node-fill:     var(--surface, color-mix(in srgb, var(--fg) 3%, var(--bg)));
    --_node-stroke:   var(--border, color-mix(in srgb, var(--fg) 20%, var(--bg)));
    --_group-fill:    var(--bg);
    --_group-hdr:     color-mix(in srgb, var(--fg) 5%, var(--bg));
    --_inner-stroke:  color-mix(in srgb, var(--fg) 12%, var(--bg));
    --_key-badge:     color-mix(in srgb, var(--fg) 10%, var(--bg));
  }
</style>
<defs>
  <marker id="arrowhead" markerWidth="8" markerHeight="4.8" refX="8" refY="2.4" orient="auto">
    <polygon points="0 0, 8 2.4, 0 4.8" fill="var(--_arrow)"></polygon>
  </marker>
  <marker id="arrowhead-start" markerWidth="8" markerHeight="4.8" refX="0" refY="2.4" orient="auto-start-reverse">
    <polygon points="8 0, 0 2.4, 8 4.8" fill="var(--_arrow)"></polygon>
  </marker>
</defs>
<rect x="68.60000000000001" y="40" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="68.60000000000001" y="100" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="68.60000000000001" y="160" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="220" width="96.35000000000001" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="280" width="96.35000000000001" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="340" width="96.35000000000001" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.300000000000004" y="400" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.300000000000004" y="460" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.300000000000004" y="520" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="57.875" y="580" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="57.875" y="640" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="57.875" y="700" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="40" y="760" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="40" y="820" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="40" y="880" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<text x="98.9" y="58" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="98.9" y="118" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="98.9" y="178" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="98.9" y="238" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler</text>
<text x="98.9" y="298" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler</text>
<text x="98.9" y="358" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler</text>
<text x="98.9" y="418" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="98.9" y="478" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="98.9" y="538" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="98.9" y="598" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task1--</text>
<text x="98.9" y="658" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">tasl2--</text>
<text x="98.9" y="718" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">tasl3--</text>
<text x="98.9" y="778" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler1--</text>
<text x="98.9" y="838" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler2--</text>
<text x="98.9" y="898" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler3--</text>
</svg></div>
            <div class="mermaid-svg-light" data-theme="light"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 197.8 956" width="197.8" height="956" style="--bg:#eceff4;--fg:#434c5e;--line:#4c566a;--accent:#5e81ac;--muted:#4c566a;background:var(--bg)">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
  text { font-family: 'Inter', system-ui, sans-serif; }
  svg {
    /* Derived from --bg and --fg (overridable via --line, --accent, etc.) */
    --_text:          var(--fg);
    --_text-sec:      var(--muted, color-mix(in srgb, var(--fg) 60%, var(--bg)));
    --_text-muted:    var(--muted, color-mix(in srgb, var(--fg) 40%, var(--bg)));
    --_text-faint:    color-mix(in srgb, var(--fg) 25%, var(--bg));
    --_line:          var(--line, color-mix(in srgb, var(--fg) 30%, var(--bg)));
    --_arrow:         var(--accent, color-mix(in srgb, var(--fg) 50%, var(--bg)));
    --_node-fill:     var(--surface, color-mix(in srgb, var(--fg) 3%, var(--bg)));
    --_node-stroke:   var(--border, color-mix(in srgb, var(--fg) 20%, var(--bg)));
    --_group-fill:    var(--bg);
    --_group-hdr:     color-mix(in srgb, var(--fg) 5%, var(--bg));
    --_inner-stroke:  color-mix(in srgb, var(--fg) 12%, var(--bg));
    --_key-badge:     color-mix(in srgb, var(--fg) 10%, var(--bg));
  }
</style>
<defs>
  <marker id="arrowhead" markerWidth="8" markerHeight="4.8" refX="8" refY="2.4" orient="auto">
    <polygon points="0 0, 8 2.4, 0 4.8" fill="var(--_arrow)"></polygon>
  </marker>
  <marker id="arrowhead-start" markerWidth="8" markerHeight="4.8" refX="0" refY="2.4" orient="auto-start-reverse">
    <polygon points="8 0, 0 2.4, 8 4.8" fill="var(--_arrow)"></polygon>
  </marker>
</defs>
<rect x="68.60000000000001" y="40" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="68.60000000000001" y="100" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="68.60000000000001" y="160" width="60.6" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="220" width="96.35000000000001" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="280" width="96.35000000000001" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="50.725" y="340" width="96.35000000000001" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.300000000000004" y="400" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.300000000000004" y="460" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="54.300000000000004" y="520" width="89.2" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="57.875" y="580" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="57.875" y="640" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="57.875" y="700" width="82.05000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="40" y="760" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="40" y="820" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<rect x="40" y="880" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75"></rect>
<text x="98.9" y="58" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="98.9" y="118" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="98.9" y="178" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task</text>
<text x="98.9" y="238" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler</text>
<text x="98.9" y="298" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler</text>
<text x="98.9" y="358" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler</text>
<text x="98.9" y="418" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="98.9" y="478" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="98.9" y="538" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">resource</text>
<text x="98.9" y="598" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">task1--</text>
<text x="98.9" y="658" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">tasl2--</text>
<text x="98.9" y="718" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">tasl3--</text>
<text x="98.9" y="778" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler1--</text>
<text x="98.9" y="838" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler2--</text>
<text x="98.9" y="898" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">scheduler3--</text>
</svg></div>
          </div>
<p>çŠ¶æ€æ¨¡å—ï¼šæ”¶é›†ä¿¡æ¯ï¼Œä¸ºè°ƒåº¦æä¾›ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«èµ„æºçŠ¶æ€ï¼Œä»»åŠ¡çŠ¶æ€ï¼Œä»»åŠ¡é˜Ÿåˆ—ç­‰â€¦
å†³ç­–æ¨¡å—ï¼šæ ¹æ®çŠ¶æ€æ¨¡å—æä¾›çš„ä¸Šä¸‹æ–‡è¿›è¡Œè°ƒåº¦å†³ç­–ï¼›1)ç¡®å®šä»»åŠ¡è°ƒåº¦é¡ºåºï¼›2)ç¡®å®šè°ƒåº¦èµ„æºï¼›3)æ— èµ„æºæ—¶ï¼Œé€‰æ‹©ç‰ºç‰²çš„æŠ¢å å¯¹è±¡ã€‚</p>
<h3 id="014--linux-process-scheduler">0.1.4 Â· Linux Process Scheduler</h3>
<p>task_structå¯ä»¥ä»£è¡¨è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨çº¿ç¨‹ã€‚</p>
<h4 id="0141--ç±»å‹">0.1.4.1 Â· ç±»å‹</h4>
<p>é•¿æœŸè°ƒåº¦ï¼šä»»åŠ¡è°ƒåº¦ï¼Œå¹³è¡¡I/Oå¯†é›†å‹å’ŒCPUå¯†é›†å‹ä»»åŠ¡ï¼Œæœ€å¤§åŒ–åˆ©ç”¨CPUä¸I/Oè®¾å¤‡ï¼›
ä¸­æœŸè°ƒåº¦ï¼šç§»é™¤ä¸æ´»è·ƒçš„è¿›ç¨‹ï¼Œé‡Šæ”¾èµ„æºï¼›
çŸ­æœŸè°ƒåº¦ï¼šä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©è¿›ç¨‹ï¼Œè¿›è¡Œæ‰§è¡Œã€‚</p>
<h4 id="0142--çŸ­æœŸè°ƒåº¦">0.1.4.2 Â· çŸ­æœŸè°ƒåº¦</h4>
<ol>
<li>åˆå§‹è°ƒåº¦å™¨ï¼šç®€é™‹ï¼ŒåŒæ—¶æœ€å¤šå¤„ç†64ä¸ªä»»åŠ¡</li>
<li>O(n)è°ƒåº¦å™¨ï¼šæœ€åæƒ…å†µä¸‹ä¼šéå†æ‰€æœ‰ä»»åŠ¡</li>
<li>O(1)è°ƒåº¦å™¨ï¼šé€šè¿‡è¿è¡Œé˜Ÿåˆ—ã€ä¼˜å…ˆæ•°ç»„å®ç°å¸¸æ•°æ—¶é—´å†…å®Œæˆè°ƒåº¦</li>
<li>CFSå®Œå…¨å…¬å¹³è°ƒåº¦å™¨ï¼šä¸ºä¸åŒçš„è¿›ç¨‹æä¾›å®Œå…¨å…¬å¹³æ€§
<a href="https://draveness.me/system-design-memory-management/">https://draveness.me/system-design-memory-management/</a></li>
</ol>
<h2 id="02--å†…å­˜ç®¡ç†">0.2 Â· å†…å­˜ç®¡ç†</h2>
<p>å†…å­˜åˆ†é…å™¨ï¼šå¤„ç†ç”¨æˆ·ç¨‹åºå†…å­˜åˆ†é…éœ€æ±‚ï¼›
åƒåœ¾æ”¶é›†å™¨ï¼šæ ‡è®°å†…å­˜ä¸­çš„å†…å­˜ä¸”å›æ”¶ä¸éœ€è¦å†…å­˜ï¼›
ç”¨æˆ·ç¨‹åºï¼šé€šè¿‡åˆ†é…å™¨åˆ›å»ºå†…å­˜å¯¹è±¡ã€æ›´æ–°å¯¹è±¡æŒæœ‰æŒ‡é’ˆï¼›</p>
<h3 id="021--å†…å­˜å¸ƒå±€">0.2.1 Â· å†…å­˜å¸ƒå±€</h3>
<p>è™šæ‹Ÿå†…å­˜ï¼šæ ˆå†…å­˜ã€å †å†…å­˜ã€æœªåˆå§‹åŒ–å˜é‡åŒºã€æ•°æ®åŒºã€ä»£ç åŒºï¼›</p>
<p>é™æ€å†…å­˜ï¼šç¼–è¯‘æœŸç¡®è®¤ã€å›ºå®šã€æ— è¿è¡Œæ—¶ã€ä¸æ”¯æŒé€’å½’ï¼›ä½¿ç”¨ç»å¯¹åœ°å€å¯»å€ï¼Œä¸éœ€è¦ç®¡ç†ï¼›
æ ˆå†…å­˜ï¼šæ”¯æŒé€’å½’ï¼Œå›ºå®šï¼Œæ ˆæŒ‡é’ˆï¼Œæ ˆæº¢å‡ºï¼›åè¿›å…ˆå‡ºï¼Œè°ƒç”¨å‡½æ•°è€ŒåŠ å…¥æ ˆï¼Œå‡½æ•°å®Œæˆè€Œé”€æ¯æ ˆï¼Œä¸éœ€è¦ç®¡ç†ï¼›
å †å†…å­˜ï¼šæŒ‰éœ€åˆ†é…ï¼Œå¯å˜å¤§å°ï¼Œå†…å­˜æ³„æ¼ï¼ˆæœªé‡Šæ”¾ï¼‰ï¼Œæ‚¬æŒ‚æŒ‡é’ˆï¼ˆæå‰é‡Šæ”¾ï¼‰ï¼Œéœ€è¦ç®¡ç†ï¼›</p>
<h3 id="022--å †å†…å­˜ç®¡ç†">0.2.2 Â· å †å†…å­˜ç®¡ç†</h3>
<p>æ‰‹åŠ¨ç®¡ç†ï¼šè°ƒç”¨å†…å­˜ç®¡ç†API
è‡ªåŠ¨ç®¡ç†ï¼šåƒåœ¾å›æ”¶å™¨</p>
<p>å¯¹è±¡å¤´ï¼š
å¤´ï¼Œå¯¹è±¡ï¼Œå¯¹é½ï¼›
å¯¹è±¡å¤´ä¸å¯¹è±¡æ”¾ä¸€èµ·ï¼Œæˆ–è€…å› ä¸ºå½±å“å±€éƒ¨æ€§è€Œå•ç‹¬ä¸€ç‰‡åŒºåŸŸæ”¾å¯¹è±¡å¤´ï¼›</p>
<h3 id="023--å†…å­˜åˆ†é…">0.2.3 Â· å†…å­˜åˆ†é…</h3>
<p>çº¿æ€§åˆ†é…å™¨ï¼š
å›æ”¶çš„å†…å­˜æ— æ³•åˆ©ç”¨ï¼Œéœ€è¦æ­é…åˆé€‚åƒåœ¾å›æ”¶ç®—æ³•ï¼šæ ‡è®°å‹ç¼©ã€å¤åˆ¶å›æ”¶ã€åˆ†ä»£å›æ”¶ï¼›</p>
<p>ç©ºé—²é“¾è¡¨åˆ†é…å™¨ï¼š
éå†ç©ºé—²å†…å­˜å—ï¼Œæ‰¾åˆ°è¶³å¤Ÿå¤§çš„å†…å­˜å¿«ï¼Œåˆ†é…ç»™ç”¨æˆ·ç¨‹åºï¼›
é¦–æ¬¡é€‚åº”ï¼Œå¾ªç¯é¦–æ¬¡é€‚åº”ï¼Œæœ€ä¼˜é€‚åº”ï¼Œéš”ç¦»é€‚åº”ï¼›</p>
<h3 id="024--åƒåœ¾å›æ”¶">0.2.4 Â· åƒåœ¾å›æ”¶</h3>
<p><a href="https://draveness.me/system-design-memory-management/">https://draveness.me/system-design-memory-management/</a></p>
<p><a href="https://en.wikipedia.org/wiki/Garbage_(computer_science)">https://en.wikipedia.org/wiki/Garbage_(computer_science)</a>
åƒåœ¾åŒ…æ‹¬å¯¹è±¡ï¼Œæ•°æ®ï¼Œåœ¨æœªæ¥çš„è®¡ç®—ä¸­ä¸ä¼šè¢«ä½¿ç”¨ï¼Œéœ€è¦äº¤å›å †åœ¨æœªæ¥å¤ç”¨ã€‚</p>
<p>è¯­æ³•åƒåœ¾ã€è¯­ä¹‰åƒåœ¾ï¼š
è¯­æ³•åƒåœ¾ï¼Œç¨‹åºå†…éƒ¨ä»æ ¹å¯¹è±¡æ— æ³•è¾¾åˆ°çš„å¯¹è±¡æˆ–æ•°æ®ï¼›ä½¿ç”¨GCå›æ”¶ï¼›
è¯­ä¹‰åƒåœ¾ï¼Œæ°¸è¿œä¸ä¼šè¢«ç¨‹åºè®¿é—®åˆ°çš„å¯¹è±¡æˆ–æ•°æ®ï¼›ä½¿ç”¨ç¼–è¯‘å™¨è¯†åˆ«éƒ¨åˆ†è¯­ä¹‰åƒåœ¾ï¼Œä¸ä½¿ç”¨çš„å˜é‡ç­‰ã€‚</p>
<p>æ”¶é›†å™¨æ€§èƒ½ï¼šååé‡ï¼Œæœ€å¤§æš‚åœæ—¶é—´ï¼›
ååé‡ï¼šåƒåœ¾æ”¶é›†å™¨åœ¨æ‰§è¡Œé˜¶æ®µçš„é€Ÿåº¦ï¼Œå•ä½æ—¶é—´çš„æ ‡è®°ä¸æ¸…ç†å†…å­˜çš„èƒ½åŠ›ï¼›HEAP_SIZE / TOTAL_GC_TIMEï¼›
æˆ–è€…ç¨‹åºè¿è¡Œæ€»æ—¶é—´é™¤ä»¥GCè¿è¡Œæ€»æ—¶é—´ï¼ŒGCæ˜¯é¢å¤–çš„å¼€é”€ï¼›
æœ€å¤§æš‚åœæ—¶é—´ï¼šæŸäº›é˜¶æ®µè§¦å‘STWï¼Œç”¨æˆ·ç¨‹åºä¸èƒ½æ‰§è¡Œï¼Œå½±å“ç¨‹åºå¤„ç†è¯·æ±‚ï¼›
åƒåœ¾å›æ”¶é˜¶æ®µç”¨æˆ·ç¨‹åºä¸èƒ½æ‰§è¡Œï¼Œä½†æ˜¯åƒåœ¾æ ‡è®°å¯ä»¥å’Œç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼›</p>
<p>å¯¹è±¡å¤´ã€å¯¹é½å‡ºç°çš„ç¼éš™ï¼Œéƒ½æ˜¯å¼€é”€ï¼›</p>
<p>æ”¶é›†å™¨ç±»å‹ï¼š
ç›´æ¥åƒåœ¾å›æ”¶ï¼šå¼•ç”¨è®¡æ•°ï¼›
è·Ÿè¸ªåƒåœ¾å›æ”¶ï¼šæ ‡è®°æ¸…ç†ã€æ ‡è®°å‹ç¼©ã€å¤åˆ¶åƒåœ¾å›æ”¶ï¼›</p>
<p>å¼•ç”¨è®¡æ•°ï¼š
æ”¹å˜å¯¹è±¡ä¹‹é—´çš„å¼•ç”¨å…³ç³»æ—¶ï¼Œä¼šä¿®æ”¹å¯¹è±¡ä¹‹é—´çš„å¼•ç”¨è®¡æ•°ï¼›
æ¯ä¸ªå¯¹è±¡éƒ½è®°å½•äº†å½“å‰æœ‰å¤šå°‘ä¸ªå¯¹è±¡æŒ‡å‘äº†è¯¥å¯¹è±¡ï¼›
å½“è¯¥å¯¹è±¡çš„è®¡æ•°ä¸º0æ—¶ï¼Œé‡Šæ”¾è¯¥å¯¹è±¡ç©ºé—´ã€‚
å¯¹è±¡å¤´ä¸­æ·»åŠ å¼•ç”¨è®¡æ•°ã€‚
é—®é¢˜ï¼šå¾ªç¯å¼•ç”¨ã€é€’å½’å›æ”¶ï¼ˆå¯¹è±¡è¢«é‡Šæ”¾ï¼Œé€’å½’è¯¥å¯¹è±¡çš„å¼•ç”¨å°†è¢«å¼•ç”¨å¯¹è±¡çš„è®¡ç®—å™¨å‡å»1ï¼‰ï¼›</p>
<p>æ ‡è®°æ¸…é™¤ï¼šæ ‡è®°ã€æ¸…é™¤ä¸¤ä¸ªé˜¶æ®µï¼›
æ ‡è®°ï¼Œä½¿ç”¨DFSæˆ–BFSç®—æ³•æ‰«æå †ä¸­çš„å­˜æ´»å¯¹è±¡ï¼›ä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œæ²¿ç€å¼•ç”¨éå†å †ä¸­çš„å…¨éƒ¨å¯¹è±¡ï¼Œèƒ½è®¿é—®åˆ°å³å­˜æ´»å¯¹è±¡ï¼Œä¸èƒ½è®¿é—®åˆ°å³åƒåœ¾ï¼›
æ¸…é™¤ï¼Œåœ¨æ ‡è®°åï¼Œå›æ”¶å†…å­˜ä¸­çš„åƒåœ¾ï¼›éå†å †ä¸­æ‰€æœ‰å¯¹è±¡ï¼Œé‡Šæ”¾åƒåœ¾ï¼Œä»¥é“¾è¡¨ä¸²è”èµ·æ¥ï¼›
å¯¹è±¡å¤´ä¸­æ·»åŠ æ ‡è®°å¤´ï¼Œä½†æ˜¯ä¼šä¸æ“ä½œç³»ç»Ÿçš„å†™æ—¶å¤åˆ¶ä¸å…¼å®¹ï¼Œè™½ç„¶å¯¹è±¡æ²¡æœ‰ä¿®æ”¹ï¼Œä½†æ˜¯å¯¹è±¡å¤´ä¼šè¢«ä¿®æ”¹ï¼›å¯ä»¥ä½¿ç”¨ä½å›¾ï¼Œå¯¹è±¡å­˜æ´»æ ‡è®°ä¸å¯¹è±¡åˆ†åˆ«å­˜æ´»ï¼›
ç©ºé—²é“¾è¡¨åˆ†é…å™¨ï¼Œå®¹æ˜“æœ‰å†…å­˜ç¢ç‰‡ã€‚</p>
<p>æ ‡è®°å‹ç¼©ï¼šæ ‡è®°ã€å‹ç¼©ä¸¤ä¸ªé˜¶æ®µï¼›
æ ‡è®°åŒä¸Šï¼›
å‹ç¼©ï¼Œå°†æ‰€æœ‰å­˜æ´»å¯¹è±¡ç´§å¯†æ’åˆ—ï¼›æŒ¤å‡ºå­˜æ´»å¯¹è±¡ä¹‹é—´çš„ç©ºéš™ï¼›</p>
<p>å¤åˆ¶åƒåœ¾å›æ”¶ï¼š
å †åˆ†ä¸¤ä¸ªå¤§å°ç›¸ç­‰çš„åŒºåŸŸï¼›å·¦ä¾§åˆ†é…ï¼Œå³ä¾§åƒåœ¾å›æ”¶ï¼›
å·¦ä¾§å†…å­˜ä¸è¶³æ—¶, 1)å¤åˆ¶å­˜æ´»å¯¹è±¡åˆ°å³ä¾§, 2)è®¾ç½®å¯¹è±¡è½¬å‘åœ°å€ï¼ˆå·¦ä¾§->å³ä¾§ï¼‰ï¼Œ3)ä¿®å¤æŒ‡é’ˆï¼ˆå³ä¾§->å·¦ä¾§ï¼‰ï¼Œ4)é‡Šæ”¾å·¦ä¾§å†…å­˜</p>
<h3 id="025--é«˜çº§åƒåœ¾å›æ”¶ç®—æ³•">0.2.5 Â· é«˜çº§åƒåœ¾å›æ”¶ç®—æ³•</h3>
<h4 id="0251--åˆ†ä»£åƒåœ¾å›æ”¶">0.2.5.1 Â· åˆ†ä»£åƒåœ¾å›æ”¶ï¼š</h4>
<p>å¤§å¤šæ•°å¯¹è±¡ä¼šåœ¨ç”Ÿæˆåï¼Œç«‹é©¬å˜æˆåƒåœ¾ï¼Œåªæœ‰å°‘æ•°å¯¹è±¡å¯ä»¥å­˜æ´»å¾ˆä¹…ï¼›
åˆ†ä¸ºé’å¹´ä»£ã€è€å¹´ä»£ï¼šå¯¹è±¡åˆå§‹åŒ–åè¿›å…¥é’å¹´ä»£ï¼Œç»è¿‡å¤šè½®GCåï¼Œæœªè¢«å›æ”¶è¿›å…¥è€å¹´ä»£ï¼›
é’å¹´ä»£å›æ”¶åªä¼šæ‰«æéƒ¨åˆ†å †ï¼Œå‡å°‘GCæ—¶æ‰«æçš„å †å¤§å°ä¸STWæ—¶é—´ï¼›
é—®é¢˜ï¼šè·¨ä»£å¼•ç”¨ï¼šå†™å±éšœã€å¡è¡¨ï¼Ÿ</p>
<h4 id="0252--æ ‡è®°åŒºåŸŸæ”¶é›†">0.2.5.2 Â· æ ‡è®°åŒºåŸŸæ”¶é›†ï¼š</h4>
<p>ç»“åˆæ ‡è®°æ¸…é™¤ã€å¤åˆ¶åƒåœ¾å›æ”¶ï¼›ä½¿ç”¨å‰è€…è¿½è¸ªå †ä¸­çš„å­˜æ´»å¯¹è±¡ï¼Œåè€…å‡å°‘ç¢ç‰‡ï¼›
æ‹†åˆ†å †æœªç‰¹å®šå¤§å°çš„å—ï¼Œæ ¹æ®ç”¨æˆ·ç”³è¯·å†…å­˜å¤§å°å»æ‰¾å†…å­˜å—ï¼›</p>
<h4 id="0253--å¢é‡å¹¶å‘æ”¶é›†ä¸‰è‰²æŠ½è±¡åƒåœ¾å›æ”¶å±éšœæ’å…¥åˆ é™¤å†™å±éšœ">0.2.5.3 Â· å¢é‡å¹¶å‘æ”¶é›†ï¼šä¸‰è‰²æŠ½è±¡ï¼Œåƒåœ¾å›æ”¶å±éšœï¼ˆæ’å…¥/åˆ é™¤å†™å±éšœï¼‰</h4>
<p>å¢é‡ï¼šå¢é‡çš„æ ‡è®°ã€æ¸…é™¤åƒåœ¾
å¹¶å‘ï¼šåˆ©ç”¨å¤šæ ¸ï¼Œåœ¨ç”¨æˆ·ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå¹¶å‘çš„æ ‡è®°ã€æ¸…é™¤åƒåœ¾
ä½¿ç”¨å±éšœæŠ€æœ¯ä¿è¯å¹¶å‘åƒåœ¾å›æ”¶çš„æ­£ç¡®æ€§ï¼›
å¢é‡ï¼Œå°†è¾ƒé•¿çš„æš‚åœæ—¶é—´åˆ‡åˆ†æœªå¤šä¸ªæ›´å°çš„GCæ—¶é—´ç‰‡ï¼›
ä¸ä¸‰è‰²æ ‡è®°ä¸€èµ·ä½¿ç”¨ï¼Œåœ¨åƒåœ¾æ”¶é›†å¼€å§‹å‰ï¼Œæ‰“å¼€å†™å±éšœï¼Œç”¨æˆ·å¯¹å†…å­˜çš„ä¿®æ”¹éƒ½ä¼šç»è¿‡å†™å±éšœï¼Œä¿è¯å¯¹è±¡å…³ç³»ä¸­çš„ä¸‰è‰²ä¸å˜æ€§ï¼›
å¹¶å‘æ”¶é›†ä½¿å¾—æ”¶é›†å·¥ä½œå°½é‡çš„å¹¶å‘æ‰§è¡Œï¼›
é—®é¢˜ï¼šæ ‡è®°æœªåƒåœ¾çš„å¯¹è±¡ï¼Œé‡æ–°è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼›</p>
<h5 id="02531--ä¸‰è‰²æŠ½è±¡">0.2.5.3.1 Â· ä¸‰è‰²æŠ½è±¡ï¼š</h5>
<p>ç™½è‰²ï¼šåƒåœ¾ï¼Œå¯èƒ½è¢«å›æ”¶
ç°è‰²ï¼šæ´»è·ƒå¯¹è±¡ï¼Œå­˜åœ¨æŒ‡å‘ç™½è‰²å¯¹è±¡çš„æŒ‡é’ˆï¼Œæ”¶é›†å™¨ä¼šæ‰«æå­å¯¹è±¡
é»‘è‰²ï¼šæ´»è·ƒå¯¹è±¡ï¼Œä¸æŒ‡å‘ä»»ä½•å¯¹è±¡ï¼Œä»è·Ÿå¯¹è±¡å¯è¾¾</p>
<ol>
<li>æ ¹å¯¹è±¡æ ‡è®°ä¸ºç°è‰²</li>
<li>æ‰«æç°è‰²æŒ‡å‘çš„ç™½è‰²ï¼Œç™½è‰²å˜ç°è‰²ï¼ŒåŸç°è‰²å˜é»‘è‰²</li>
<li>é‡å¤2è‡³æ— ç°è‰²å¯¹è±¡ï¼Œç»“æŸ
éœ€è¦ä½¿ç”¨STW</li>
</ol>
<p>å¼ºä¸‰è‰²ä¸å˜æ€§ï¼šé»‘è‰²ä¸æŒ‡å‘ç™½è‰²ï¼Œé»‘è‰²åªæŒ‡å‘ç°è‰²æˆ–é»‘è‰²ï¼›
å¼±ä¸‰è‰²ä¸å˜æ€§ï¼šé»‘è‰²å¯ä»¥æŒ‡å‘ç™½è‰²ï¼Œä½†æ˜¯ä¸€å®šæœ‰ä¸€æ¡è·¯å¾„ï¼Œç»ç°è‰²å¯¹è±¡å¯è¾¾æ­¤ç™½è‰²å¯¹è±¡ï¼›</p>
<h5 id="02532--å±éšœæŠ€æœ¯">0.2.5.3.2 Â· å±éšœæŠ€æœ¯ï¼š</h5>
<p><a href="https://en.wikipedia.org/wiki/Memory_barrier">https://en.wikipedia.org/wiki/Memory_barrier</a></p>
<p>åœ¨å†…å­˜å±éšœå‰çš„æ“ä½œï¼Œä¸€å®šå…ˆäºå†…å­˜å±éšœåçš„æ“ä½œï¼›</p>
<p>åƒåœ¾æ”¶é›†ä¸­çš„å±éšœæŠ€æœ¯ï¼Œå®åœ¨ç”¨æˆ·è¯»å–/åˆ›å»º/æ›´æ–°å¯¹è±¡æ—¶æ‰§è¡Œçš„ä¸€æ®µä»£ç ï¼›
æ ¹æ®æ“ä½œåˆ†ä¸ºè¯»/å†™å±éšœï¼Œè¯»å±éšœå¯¹æ€§èƒ½å½±å“å¾ˆå¤§ï¼Œä¸€èˆ¬ä½¿ç”¨å†™å±éšœï¼›</p>
<p>æ’å…¥å†™å±éšœï¼š</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#88C0D0">writePointer</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">slot</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9"> ptr</span><span style="color:#ECEFF4">):</span></span>
<span class="line"><span style="color:#88C0D0">    shade</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">ptr</span><span style="color:#ECEFF4">)</span></span>
<span class="line"><span style="color:#81A1C1">    *</span><span style="color:#D8DEE9">field</span><span style="color:#81A1C1"> =</span><span style="color:#D8DEE9"> ptr</span></span></code></pre>
<p>æ–°å¢å¯¹ä¸€ä¸ªå¯¹è±¡çš„æŒ‡å‘ï¼šåœ¨ *slot = ptr æ“ä½œæ—¶ï¼Œå¦‚æœptræ˜¯ç™½è‰²çš„ï¼Œä½¿ç”¨shade(ptr)æŠŠptrå˜ä¸ºç°è‰²ï¼›
ç›¸å¯¹ä¿å®ˆï¼Œæ˜¯å¯èƒ½å­˜æ´»çš„å¯¹è±¡éƒ½æ ‡è®°ä¸ºç°è‰²ï¼Œæ»¡è¶³å¼ºä¸‰è‰²ä¸å˜æ€§ï¼›</p>
<p>åˆ é™¤å†™å±éšœï¼š</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#88C0D0">writePointer</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">slot</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9"> ptr</span><span style="color:#ECEFF4">)</span></span>
<span class="line"><span style="color:#88C0D0">    shade</span><span style="color:#ECEFF4">(</span><span style="color:#81A1C1">*</span><span style="color:#D8DEE9">slot</span><span style="color:#ECEFF4">)</span></span>
<span class="line"><span style="color:#81A1C1">    *</span><span style="color:#D8DEE9">slot</span><span style="color:#81A1C1"> =</span><span style="color:#D8DEE9"> ptr</span></span></code></pre>
<p>æ”¹å˜å¯¹ä¸€ä¸ªå¯¹è±¡çš„æŒ‡å‘æ—¶ï¼ˆåˆ é™¤åŸæŒ‡å‘ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å˜ç°è‰²ï¼›</p>
<h1 id="1--å†…å­˜">1 Â· å†…å­˜</h1>
<p>ç‰©ç†å†…å­˜ã€è™šæ‹Ÿå†…å­˜ã€å±€éƒ¨æ€§åŸç†ï¼ˆæ—¶é—´/ç©ºé—´ï¼‰</p>
<p>é“¾æ¥å™¨ä¸ºå˜é‡å’Œå‡½æ•°åˆ†é…åœ°å€</p>
<p>æ“ä½œç³»ç»Ÿç®¡ç†è™šæ‹Ÿå†…å­˜åˆ°ç‰©ç†å†…å­˜çš„æ˜ å°„</p>
<p>åˆ†é…åˆ°è™šæ‹Ÿå†…å­˜åï¼Œå¹¶æœªæ˜ å°„åˆ°å¯¹åº”çš„ç‰©ç†å†…å­˜ï¼›åªæœ‰åœ¨å¯¹è¯¥è™šæ‹Ÿå†…å­˜è¯»å†™æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šçœŸæ­£åˆ†é…ç‰©ç†å†…å­˜
å†…å­˜ä»¥é¡µä¸ºå•ä½ï¼Œåœ¨è™šæ‹Ÿå†…å­˜ä¸­è¿ç»­çš„å†…å­˜ï¼Œåœ¨ç‰©ç†å†…å­˜ä¸ä¸€å®šè¿ç»­</p>
<p>ç¼ºé¡µä¸­æ–­å‘ç”Ÿåœ¨æ˜ å°„è¿‡ç¨‹ä¸­</p>
<p>æ˜ å°„è¿‡ç¨‹ç”±CPUçš„å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰è‡ªåŠ¨å®Œæˆï¼Œä½†æ˜¯ä¾èµ–æ“ä½œç³»ç»Ÿè®¾ç½®çš„é¡µè¡¨</p>
<p>è™šæ‹Ÿç©ºé—´çš„æ¯ä¸€ä¸ªé¡µåœ¨é¡µè¡¨ä¸­éƒ½æœ‰ä¸€ä¸ªé¡µè¡¨é¡¹ï¼ˆPTEï¼‰å¯¹åº”
PTEè®°å½•äº†è™šæ‹Ÿå†…å­˜é¡µå¯¹åº”çš„ç‰©ç†å†…å­˜é¡µèµ·å§‹åœ°å€</p>
<p>é¡µå¤§å°ä¸º4KBï¼Œæ¯ä¸ªé¡µè¡¨é¡¹4Bï¼Œä¸€ä¸ªé¡µå¯ä»¥å­˜1024ä¸ªé¡µè¡¨é¡¹ï¼Œ1ä¸ªé¡µè¡¨é¡¹å¯¹åº”4KBï¼Œé‚£ä¹ˆ1024ä¸ªå¯¹åº”4MBï¼›</p>
<p>é¡µç›®å½•è¡¨ï¼Œç®¡ç†é¡µè¡¨ï¼Œæ¯ä¸€ä¸ªé¡µç›®å½•è¡¨é¡¹ï¼ˆPDEï¼‰å¯¹åº”ä¸€ä¸ªé¡µç›®å½•è¡¨ï¼Œæ„æˆå¤šçº§é¡µè¡¨ç»“æ„</p>
<p>CPUå¦‚ä½•é€šè¿‡è™šæ‹Ÿåœ°å€ï¼Œæ‰¾åˆ°ç‰©ç†åœ°å€ï¼š</p>
<ol>
<li>ç¡®å®šé¡µç›®å½•åŸºå€ï¼Œæ¯ä¸€ä¸ªCPUéƒ½æœ‰ä¸€ä¸ªé¡µç›®å½•åŸºè´¨å¯„å­˜å™¨ï¼Œå­˜ç€æœ€é«˜çº§é¡µè¡¨åŸºåœ°å€</li>
<li>å®šä½é¡µç›®å½•é¡¹ï¼Œåœ°å€çš„é«˜10ä½ç¡®å®šé¡µç›®å½•é¡¹ï¼Œå› ä¸º2^10=1024ï¼Œä¸€ä¸ªé¡µè¡¨åˆšå¥½å­˜1024ä¸ªé¡µè¡¨é¡¹</li>
<li>å®šä½é¡µè¡¨é¡¹ï¼Œä¸­é—´10ä½å®šä½é¡µè¡¨é¡¹ï¼Œå®šä½åå°±èƒ½çŸ¥é“ç‰©ç†å†…å­˜èµ·å§‹ä½ç½®</li>
<li>ç¡®å®šç‰©ç†åœ°å€ï¼Œä½¿ç”¨å‰©ä½™çš„ä½æ•°è¡¨ç¤ºé¡µå†…åç§»</li>
</ol>
<p>é¡µé¢æ¢å…¥æ¢å‡ºï¼šå±€éƒ¨æ€§åŸç†ï¼Œåœ¨ç‰©ç†å†…å­˜è¶³å¤Ÿæ—¶ï¼Œå°½å¯èƒ½è®©å¤šçš„é¡µé©»ç•™ç‰©ç†å†…å­˜ä¸­</p>
<p>å®æ¨¡å¼ï¼šç›´æ¥è®¿é—®ç‰©ç†å†…å­˜
ä¿æŠ¤æ¨¡å¼ï¼šä½¿ç”¨è™šæ‹Ÿå†…å­˜ï¼Œå°†æ¯ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´éš”ç¦»å¼€ï¼ŒåŒæ—¶é¡µè¡¨é¡¹ä¸­æœ‰å¤šç§æƒé™ä¿æŠ¤æ ‡å¿—</p>
<p>æ®µå¯„å­˜å™¨ï¼šcsã€dsã€esã€gsã€ssç­‰
å®æ¨¡å¼ï¼Œè®°å½•æ®µåŸºåœ°å€ï¼šç‰©ç†åœ°å€ = æ®µå¯„å­˜å™¨: æ®µå†…åç§» = æ®µå¯„å­˜å™¨ &#x3C;&#x3C; 4 + æ®µå†…åç§»
ds æ•°æ®æ®µèµ·å§‹ä½ç½®ï¼› cs ä»£ç æ®µèµ·å§‹ä½ç½®
ä¿æŠ¤æ¨¡å¼ï¼Œæ®µé€‰æ‹©å­ï¼Œè®°å½•GDTRä¸‹æ ‡ï¼šè™šæ‹Ÿåœ°å€ = æ®µå¯„å­˜å™¨: æ®µå†…åç§» = <code>GDTR[æ®µå¯„å­˜å™¨] + æ®µå†…åç§»</code>ï¼Œç”±MMUæ˜ å°„ä¸ºç‰©ç†åœ°å€
GDTç»“æ„ï¼šæ®µåŸºå€ã€æ®µé•¿åº¦ã€å±æ€§Pâ€”æ˜¯å¦åœ¨å†…å­˜ä¸­å­˜åœ¨ã€DPLâ€”æè¿°ç¬¦ç‰¹æƒçº§ã€
Sâ€”1ä¸ºæ•°æ®/ä»£ç æ®µ 0ä¸ºç³»ç»Ÿæ®µ/é—¨æè¿°ç¬¦ï¼ˆé—¨æ˜¯æä¾›åˆ‡æ¢ç‰¹æƒçº§çš„æœºåˆ¶ï¼Œæœ‰è°ƒç”¨ã€é™·é˜±ã€ä¸­æ–­ã€ä»»åŠ¡ç­‰ï¼‰ã€
Gâ€”æ®µé¢—ç²’åº¦ 0å•ä½å­—èŠ‚ 1å•ä½4KBä¹Ÿå°±æ˜¯1é¡µï¼Œæ®µç•Œé™20ä½ï¼Œæ®µæœ€å¤§é•¿åº¦2^20*4KB=4GBã€
Typeâ€”æè¿°ç¬¦ç±»å‹</p>
<p>æ®µç®¡ç†ï¼š
æŒ‰åŠŸèƒ½åˆ†å‰²å†…å­˜ç©ºé—´ï¼Œä¸åŒæ®µæœ‰ä¸åŒè¯»å†™æƒé™ä¸ç‰¹æƒçº§ï¼Œæä¾›å®‰å…¨æ€§ï¼›
ä½†æ®µé•¿åº¦ä¸èƒ½å›ºå®šï¼Œä»¥æ®µä¸ºå•ä½è¿›è¡Œå†…å­˜åˆ†é…/å›æ”¶ï¼Œéš¾äºè®¾è®¡æ•°æ®ç»“æ„ï¼Œä¼šé€ æˆå†…å­˜ç©ºé—´æµªè´¹ï¼›
é¡µç®¡ç†ï¼šä¸æŒ‰åŠŸèƒ½åˆ†å‰²ï¼ŒæŒ‰å›ºå®šå¤§å°åˆ†å‰²ï¼Œæ˜“äºåˆ†é…å›æ”¶ï¼›æ®µå¼ç®¡ç†æ‰€èƒ½æä¾›çš„å®‰å…¨æ€§ï¼Œåœ¨ç°ä»£ CPU ä¸Šä¹Ÿå¯ä»¥è¢«é¡µè¡¨é¡¹ä¸­çš„å±æ€§æ›¿ä»£ï¼›
ç°ä»£çš„æ“ä½œç³»ç»Ÿéƒ½æ˜¯é‡‡ç”¨æ®µå¼ç®¡ç†æ¥åšåŸºæœ¬çš„æƒé™ç®¡ç†ï¼Œè€Œå¯¹äºå†…å­˜çš„åˆ†é…ã€å›æ”¶ã€è°ƒåº¦éƒ½æ˜¯ä¾èµ–é¡µå¼ç®¡ç†ã€‚</p>
<p>ä¸­æ–­æè¿°ç¬¦è¡¨IDT:
CPU ä¸å¤–è®¾ä¹‹é—´çš„ååŒå·¥ä½œæ˜¯ä»¥ä¸­æ–­æœºåˆ¶æ¥è¿›è¡Œçš„:</p>
<ol>
<li>å¤–è®¾æ§åˆ¶å™¨å‘CPUå‘èµ·ä¸­æ–­è¯·æ±‚</li>
<li>CPUæ¥å—åˆ°è¯·æ±‚åï¼ŒæŠŠå½“å‰çš„å¯„å­˜å™¨çŠ¶æ€å…¨éƒ¨ä¿å­˜å¥½</li>
<li>è°ƒç”¨ä¸­æ–­æœåŠ¡ç¨‹åºï¼ˆç”±æ“ä½œç³»ç»Ÿå®šä¹‰ï¼‰
IDTåŸºåœ°å€å­˜å‚¨åœ¨idtrå¯„å­˜å™¨ä¸­ï¼ŒIDTæœ¬è´¨æ˜¯ä¸€ä¸ªæ•°æ®ï¼Œæ¯ä¸€ä¸ªä¸­æ–­æœ‰ä¸€ä¸ªç¼–å·å¯¹åº”ï¼Œç§°ä¸ºä¸­æ–­å‘é‡å·ï¼Œç”±CPUæå‰åˆ†é…ï¼›
<a href="https://www.csie.ntu.edu.tw/~wcchen/asm98/asm/proj/b85506061/chap4/overview.html">https://www.csie.ntu.edu.tw/~wcchen/asm98/asm/proj/b85506061/chap4/overview.html</a></li>
</ol>
<p>å†…å­˜å¸ƒå±€ï¼š
ä»£ç æ®µã€æ•°æ®æ®µï¼ˆå·²ç»åˆå§‹åŒ–ä¸”ä¸ä¸º0çš„å…¨å±€å˜é‡ä¸é™æ€å˜é‡ï¼‰ã€BSSæ®µï¼ˆæœªåˆå§‹åŒ–å…¨å±€å˜é‡ä¸é™æ€å˜é‡ï¼Œåªè®°å½•å¤§å°ï¼‰ã€å †/æ ˆç©ºé—´ï¼ˆç¨‹åºè¿è¡Œä¸­çš„ä¸´æ—¶æ•°æ®ï¼Œä¸æ˜¯ç£ç›˜ä¸­åŠ è½½è¿›å†…å­˜ï¼›
åŠ è½½çš„å…±äº«åº“å†…å­˜ç©ºé—´ã€å…±äº«å†…å­˜æ®µï¼ˆIPCï¼‰ã€å†…å­˜æ˜ å°„æ–‡ä»¶</p>
<p>ç£ç›˜ç¨‹åºï¼Œæ¯ä¸€ä¸ªå•å…ƒç§°ä½œsectionï¼Œ<code>readelf -S</code>ï¼›å†…å­˜é•œåƒï¼Œæ¯ä¸€ä¸ªå•å…ƒç§°ä½œsegmentï¼Œ<code>readelf -l</code>ï¼›</p>
<p>linuxè¿›ç¨‹å†…å­˜å¸ƒå±€ï¼š
32ä½æœºå™¨ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰4GBå¯»å€èƒ½åŠ›ï¼Œé»˜è®¤é«˜1GBç»™å†…æ ¸ï¼Œå‰©ä½™ä¸ºç”¨æˆ·ç©ºé—´ï¼›</p>
<p>64ä½æœºå™¨å¯»å€ç©ºé—´ä¸º2^48ï¼Œå³256TBï¼Œä½128Tä¸ºç©ºæˆ·ç©ºé—´ï¼Œé«˜128Tä¸ºå†…æ ¸ç©ºé—´ï¼›64ä½->2^64ä¸º16EBï¼Œä¸­é—´çš„ç©ºé—´çš„ä¸å¯è®¿é—®ç”±CPUæ¥ä¿è¯ï¼›</p>
<p>ç”³è¯·å †ç©ºé—´ï¼šå†…æ ¸ç»´æŠ¤ä¸€ä¸ªbrkå˜é‡ï¼ŒæŒ‡å‘å †çš„é¡¶éƒ¨ï¼Œbrkçš„å®é™…å¤§å°å†³å®šäº†å †çš„å¤§å°ï¼›
sbrkå’Œmmapç³»ç»Ÿè°ƒç”¨å¯ä»¥ä¿®æ”¹å †çš„å¤§å°ï¼›</p>
<p>æ ˆç®¡ç†ï¼š
è°ƒç”¨å‡½æ•°ï¼Œåˆ†é…ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œç§°ä½œæ ˆå¸§ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°çš„æ´»åŠ¨è®°å½•ã€‚
å…ˆåˆ›å»ºçš„æœ€åæ‰é”€æ¯ï¼Œååˆ›å»ºçš„æœ€å…ˆè¢«é”€æ¯ï¼Œå…ˆå…¥åå‡ºã€‚</p>
<p>è¿›ç¨‹æ˜¯åˆ†é…èµ„æºçš„å•ä½ï¼Œçº¿ç¨‹æ˜¯æ‰§è¡Œçš„å•ä½ï¼Œä¸¤è€…ç”±æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼›
åç¨‹æ˜¯æ¯”çº¿ç¨‹æ›´è½»é‡çš„æ‰§è¡Œå•ä½ï¼Œç”±ç”¨æˆ·ç¨‹åºè°ƒåº¦ï¼›
åˆ‡æ¢ï¼šå°†ä¸Šä¸‹æ–‡ä¿å­˜åœ¨ç‰¹å®šä½ç½®ï¼Œåˆ‡æ¢åˆ°å¾…æ‰§è¡Œçš„æ‰§è¡Œå•ä½ï¼›</p>
<p>forkæ—¶ï¼Œè¿›ç¨‹æ ˆçš„å†™æ—¶å¤åˆ¶ä¸åˆ‡æ¢ï¼Ÿï¼Ÿ
ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ‡æ¢ï¼Œæ˜¯ä¸¤ä¸ªæ ˆçš„åˆ‡æ¢ï¼Œå‘ç”Ÿä¸­æ–­ï¼ŒCPUå»ç‰¹å®šç»“æ„ä¸­å–å¾—stackæ®µé€‰æ‹©å­å’Œæ ˆé¡¶æŒ‡é’ˆï¼Œé€å…¥sså¯„å­˜å™¨å’Œrspå¯„å­˜å™¨ï¼Œå°±å®Œæˆäº†ä¸€æ¬¡æ ˆåˆ‡æ¢ï¼›</p>
<p>æ¯ä¸ªå˜é‡å’Œå‡½æ•°éƒ½æœ‰è‡ªå·±åç§°ï¼Œç§°ä½œç¬¦å·ï¼Œé“¾æ¥å™¨å°†ç¬¦å·è½¬æ¢æˆåœ°å€ï¼š</p>
<ol>
<li>é™æ€é“¾æ¥ï¼Œç”Ÿæˆbinaryæ—¶</li>
<li>åŠ¨æ€é“¾æ¥ï¼ŒåŠ è½½è¿›å†…å­˜æ—¶ï¼Œæˆ–è¿è¡ŒæœŸé—´è§£æç¬¦å·
é“¾æ¥å™¨ä¸¤æ­¥é“¾æ¥: 1.åˆå¹¶section 2.é‡å®šä½</li>
</ol>
<p>å±€éƒ¨å˜é‡çš„å†…å­˜åˆ†é…ä¸é‡Šæ”¾ï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡ %rbp çš„æ”¹å˜æ¥è¿›è¡Œçš„ï¼Œå†…å­˜åœ°å€ä¸éœ€è¦é“¾æ¥å™¨æ¥æ“å¿ƒï¼›
é™æ€å‡½æ•°ä¸åŒä¸€ä¸ªç¼–è¯‘å•å…ƒå†…å‡½æ•°ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ï¼Œæ‰€ä»¥é™æ€å‡½æ•°çš„è°ƒç”¨åœ°å€åœ¨ç¼–è¯‘é˜¶æ®µå¯ä»¥ç¡®å®šï¼›
å¤–éƒ¨å˜é‡/å¤–éƒ¨å‡½æ•°/å…¨å±€å˜é‡/å…¨å±€å‡½æ•°/é™æ€å˜é‡ï¼ˆä¸é™æ€å‡½æ•°åˆ†å±ä¸åŒæ®µï¼‰ï¼Œç”±é“¾æ¥å™¨ç¡®å®šåœ°å€ï¼›</p>
<p>07
åŠ¨æ€é“¾æ¥çš„é‡å®šä½å‘ç”Ÿåœ¨åŠ è½½æœŸé—´æˆ–è¿è¡ŒæœŸé—´ï¼Œå®ç°ä¾èµ–äºåœ°å€æ— å…³ä»£ç ï¼›
å¸¸ç”¨å…¬å…±å‡½æ•°æ”¾äºä¸€ä¸ªæ–‡ä»¶ï¼Œåªè¢«åŠ è½½åˆ°å†…å­˜ä¸€æ¬¡ï¼›linuxä¸­çš„soï¼Œwindowsä¸­çš„ddlï¼›
é€šè¿‡è™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°ç‰©ç†å†…å­˜ï¼Œä½¿å¾—å…±äº«åº“å¯ä»¥åœ¨ä¸åŒè¿›ç¨‹ä¸­çš„è™šæ‹Ÿå†…å­˜ä¸­çš„åœ°å€ä¸åŒï¼›
åœ°å€æ— å…³ä»£ç ï¼ˆPosition Independent Code, PICï¼‰ï¼šå…¨å±€åç§»è¡¨ (Global Offset Table, GOT)ï¼šæ¯ä¸ªè¿›ç¨‹ç§æœ‰ï¼Œä¸€ä¸ªä¸­é—´å±‚ï¼Œé—´æ¥è°ƒç”¨çœŸå®åœ°å€ï¼›</p>
<p>08
å»¶è¿Ÿç»‘å®šï¼šåœ¨å‡½æ•°ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™å†å’Œå‡½æ•°åœ°å€ç»‘å®šï¼›
patch codeï¼šåœ¨ç”ŸæˆcallæŒ‡ä»¤çš„æ—¶å€™ï¼Œç›®æ ‡åœ°å€ä¸ºå†…éƒ¨ç”¨äºè§£æç¬¦å·çš„å‡½æ•°ï¼Œåœ¨CPUè°ƒç”¨æ­¤å‡½æ•°æ—¶å€™ï¼Œåˆ™è°ƒç”¨ç¬¦å·è§£æå‡½æ•°ï¼ŒåŠ è½½æ‰€éœ€çš„ç›®æ ‡å‡½æ•°ã€‚
åŠ¨æ€åº“çš„å»¶è¿Ÿç»‘å®šï¼špatch çš„å¯¹è±¡ä¸æ˜¯æŒ‡ä»¤ï¼Œè€Œæ˜¯ GOT ä¸­çš„ä¸€é¡¹ã€‚</p>
<p>ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨åˆ†é…å¤§å—å†…å­˜ï¼Œåœ¨ç”¨æˆ·æ€åˆ†å‰²æˆæ›´å°å—ä»¥ä¾¿ä½¿ç”¨ï¼›
malloc/freeã€
åˆ†æ¡¶å¼å†…å­˜ç®¡ç†ï¼šå¤šä¸ªé“¾è¡¨ï¼Œå¯¹äºå•ä¸ªé“¾è¡¨ï¼Œå†…å­˜å¤§å°ç›¸åŒï¼›
ä¼™ä¼´ç³»ç»Ÿï¼šæŸå¤§å°å†…å­˜å—æ•°é‡ä¸å¤Ÿæ—¶ï¼Œå‘ä¸ŠæŸ¥æ‰¾ï¼Œæ‰¾åˆ°åå¯èƒ½æ‰§è¡Œåˆ†å‰²å†…å­˜ï¼›</p>
<p>é¡µä¸­æ–­ï¼š</p>
<ol>
<li>é¡µé¢æœªæ˜ å°„ -> åˆ†é…ç‰©ç†é¡µé¢ï¼Œåœ¨é¡µè¡¨ä¸­è®¾ç½®å¥½æ˜ å°„</li>
<li>é¡µé¢å†…å®¹åœ¨ç£ç›˜ä¸­ -> ä»ç£ç›˜ä¸­å°†æ•°æ®æŒ‰é¡µè¯»å…¥å†…å­˜</li>
<li>å†™åªè¯»é¡µé¢ -> å¦‚æœå†™æ—¶å¤åˆ¶ï¼Œåˆ™å¤åˆ¶ä¸€é¡µï¼Œæ ‡è®°å¯å†™ï¼›å¦åˆ™å†™å¼‚å¸¸ï¼Œè§¦å‘SIGSEGV</li>
<li>æ²¡æœ‰è®¿é—®æƒé™ -> ç»™è¿›ç¨‹å‘é€SIGSEGV
forkï¼šå…±äº«æ˜ å°„ï¼Œä½†åªè¯»ï¼Œå­æˆ–çˆ¶ä¿®æ”¹æ—¶ï¼Œå¤åˆ¶ä¸€ä»½ï¼Œæ”¹ä¸ºè¯»å†™ï¼ŒåŸä¸€ä»½åœ¨è¢«è®¿é—®æ—¶ï¼Œæ”¹å›è¯»å†™ï¼›</li>
</ol>
<p>13
å­˜å‚¨å™¨ä¸»è¦åˆ†ä¸ºå¯„å­˜å™¨ã€ç¼“å­˜å’Œä¸»å­˜ï¼š
RSé”å­˜å™¨/Dé”å­˜å™¨/Dè§¦å‘å™¨
SRAMå¿«è´µ/DRAMæ…¢å»‰</p>
<p>ç¼“å­˜ï¼šç¨‹åºçš„ç©ºé—´å±€éƒ¨æ€§ä¸æ—¶é—´å±€éƒ¨æ€§åŸç†
å¤„ç†å¾—å½“ï¼Œå‘½ä¸­ç‡è¾¾åˆ°70~90%ï¼Œä½¿å¾—æ•´ä¸ªå­˜å‚¨ç³»ç»Ÿçš„æ€§èƒ½æ¥è¿‘å¯„å­˜å™¨ï¼Œæˆæœ¬æ¥è¿‘å†…å­˜ï¼›
å¤šæ ¸èŠ¯ç‰‡ä¸Šï¼šé›†ä¸­å¼ç¼“å­˜/åˆ†å¸ƒå¼ç¼“å­˜/æ··åˆå¼ç¼“å­˜
cache line: ç¼“å­˜è¿›è¡Œç®¡ç†çš„æœ€å°å­˜å‚¨å•å…ƒï¼Œç”±å†…å­˜æŒ‰cachelineåŠ è½½è¿›ç¼“å­˜
ç›´æ¥ç›¸è¿æ˜ å°„/å…¨ç›¸è¿æ˜ å°„/ç»„ç»„ç›¸è¿æ˜ å°„
LRUæ›¿æ¢ç­–ç•¥
ç¼“å­˜ç¼ºå¤±: false sharing</p>
<p>15
å¤šæ ¸ç³»ç»Ÿä¸‹ï¼Œç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼š
ç¼“å­˜å†™ç­–ç•¥ï¼šå†™å›ï¼ˆå½“ç¼“å­˜è¢«æ›¿æ¢æ—¶ï¼Œè‹¥è¢«ä¿®æ”¹ï¼Œæ‰å†™å›ï¼‰ã€å†™ç›´è¾¾ï¼ˆä¿®æ”¹ç«‹åˆ»å†™å›ï¼‰ï¼›
æŸä¸ªCPUä¿®æ”¹ç¼“å­˜å€¼ï¼Œå…¶ä»–CPUå¯¹ç¼“å­˜å‰¯æœ¬æ›´æ–°ç­–ç•¥ï¼šå†™æ›´æ–°ï¼ˆå‰è€…å†™ï¼Œç«‹é©¬è¯·æ±‚åè€…æ›´æ–°ï¼‰ã€å†™æ— æ•ˆï¼ˆå‰è€…å†™ï¼Œåè€…å°†å‰¯æœ¬è®¾ç½®ä¸ºæ— æ•ˆï¼‰ï¼›
è¦å†™çš„æ•°æ®ä¸åœ¨ç¼“å­˜ï¼Œæ˜¯å¦åŠ è½½è¿›ç¼“å­˜ï¼Œåˆ†ä¸ºä¸¤ç§å†™ç­–ç•¥ï¼šå†™åˆ†é…ã€å†™ä¸åˆ†é…ï¼›
ç¼“å­˜ä¸€è‡´æ€§ï¼šåŒä¸€ä¸ªæ•°æ®ï¼Œåœ¨æ¯ä¸ªCPUçš„ç§æœ‰ç¼“å­˜ä¸­å‰¯æœ¬æ˜¯ç›¸åŒçš„ã€‚
MESIåè®®</p>
<p>16
cache: å‚¨å­˜çš„ä¿¡æ¯æ˜¯å‰¯æœ¬ï¼ŒåŠ é€ŸæŸ¥æ‰¾
bufferï¼šè“„æ°´æ± ï¼Œç¼“å†²
å†…å­˜å±éšœï¼šå‰è¾¹è¯»å†™æ“ä½œæœªå®Œæˆï¼Œåé¢çš„è¯»å†™æ“ä½œä¸èƒ½å¼€å§‹
å†™å±éšœï¼šå±éšœå‰åçš„å†™æ“ä½œéƒ½ä¸èƒ½ç¿»è¿‡å±éšœ
è¯»å±éšœï¼šå±éšœå‰åçš„è¯»æ“ä½œéƒ½ä¸èƒ½ç¿»è¿‡å±éšœ
å•å‘å±éšœï¼š</p>
<p>éä¸€è‡´æ€§è®¿å­˜ï¼šä¸åŒçš„ CPU è®¿é—®ä¸åŒåœ°å€ä¸»å­˜çš„é€Ÿåº¦å„ä¸ç›¸åŒ</p>
<p>18
java volatile</p>
<p>GC: mutator, collector
æ ¹å¼•ç”¨ï¼šä¸åœ¨å †å†…ï¼Œå´æŒ‡å‘å †é‡Œï¼›æ ¹å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸ºæ´»è·ƒå¯¹è±¡ï¼›
GCçš„åˆ†é…/å›æ”¶æ•ˆç‡ï¼Œæ˜¯å¦äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œç©ºé—´åˆ©ç”¨ç‡ï¼Œæ˜¯å¦åœé¡¿ï¼Œå®ç°å¤æ‚åº¦ï¼›
GCåˆ†ç±»ï¼šå¼•ç”¨è®¡æ•°/åŸºäºå¯è¾¾æ€§åˆ†æï¼›</p>
<p>scavenge: åŸºäºcopy
æ´»è·ƒå¯¹è±¡ä» Fromç©ºé—´ -> Toç©ºé—´
æ ¹å¼•ç”¨ï¼šæ ˆä¸Šå¼•ç”¨ã€å…¨å±€å˜é‡ç­‰
éå†å¼•ç”¨å›¾ï¼šï¼Œæ·±åº¦ä¼˜å…ˆçš„éé€’å½’å†™æ³•éœ€å ç”¨é¢å¤–ç©ºé—´ï¼Œä½†æœ‰åˆ©äºæé«˜ä¸šåŠ¡çº¿ç¨‹è¿è¡ŒæœŸçš„ç¼“å­˜å‘½ä¸­ç‡ã€‚è€Œå¹¿åº¦ä¼˜å…ˆç›¸åï¼Œä¸åˆ©äºè¿è¡ŒæœŸçš„ç¼“å­˜å‘½ä¸­ï¼Œä½†ç®—æ³•çš„æ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚
Scavenge ç®—æ³•</p>
<p>åˆ†ä»£ç®—æ³•ï¼šå¹´è½»ä»£copyGCï¼Œè€å¹´ä»£ä½¿ç”¨Mark-Sweep
Mark: éå†å¯¹è±¡ï¼Œæ ‡è®°æ´»è·ƒå¯¹è±¡ï¼›Sweep: éå†æ•´ä¸ªå †ï¼Œå°†æœªæ ‡è®°åŒºåŸŸå›æ”¶ï¼›
CMSï¼šå¹¶å‘æ ‡è®°æ¸…é™¤ï¼šå¼•å…¥ä¸‰è‰²æ ‡è®°ï¼šå†™å±éšœï¼Œå†™å…¥å¼•ç”¨æ—¶ï¼Œç›´æ¥æ ‡è®°å¼•ç”¨å¯¹è±¡ä¸ºç°è‰²ï¼Œå¯èƒ½å¯¼è‡´åº”å›æ”¶åƒåœ¾æœªè¢«å›æ”¶ï¼›æˆ–ï¼Œè¢«å¼•ç”¨å¯¹è±¡ç”±é»‘å˜ç°è‰²ï¼›</p>
<p>åˆ†åŒºå›æ”¶ç®—æ³•ï¼š
åˆ é™¤å±éšœï¼šåˆ é™¤æœ‰å¼•ç”¨ç™½è‰²å¯¹è±¡çš„å¯¹è±¡ï¼Œå°†ç™½è‰²å¯¹è±¡æ ‡è®°æˆç°è‰²</p>
<p>23 æ— æš‚åœGC
ä»¥ZGCä¸ºä¾‹ï¼Œæœ€å¤§åœé¡¿æ—¶é—´ä¸è¶…è¿‡ 10ms; å¯¹è±¡è½¬ç§»æœ€è€—æ—¶ï¼Œåœ¨åº”ç”¨çº¿ç¨‹è¿è¡Œæ—¶ï¼ŒGCçº¿ç¨‹å¹¶å‘è¿›è¡Œå¯¹è±¡è½¬ç§»ï¼›
wirte barrier ä¸»è¦æ˜¯é€šè¿‡æ‹¦æˆªå†™åŠ¨ä½œï¼Œåœ¨å¯¹è±¡èµ‹å€¼æ—¶åŠ å…¥é¢å¤–æ“ä½œã€‚read barrier ï¼Œå°±æ˜¯åœ¨å¯¹è±¡è¯»å–æ—¶åŠ å…¥é¢å¤–æ“ä½œã€‚</p>
<p>24 pythonï¼Œgo GC</p>
<h2 id="11--io">1.1 Â· I/O</h2>
<p>unixç½‘ç»œç¼–ç¨‹
<a href="https://www.masterraghu.com/subjects/np/introduction/unix_network_programming_v1.3/toc.html">https://www.masterraghu.com/subjects/np/introduction/unix_network_programming_v1.3/toc.html</a>
<a href="https://www.masterraghu.com/subjects/np/introduction/unix_network_programming_v1.3/ch06lev1sec2.html">https://www.masterraghu.com/subjects/np/introduction/unix_network_programming_v1.3/ch06lev1sec2.html</a></p>
<p>I/O Modelsï¼š
<a href="https://rickhw.github.io/2019/02/27/ComputerScience/IO-Models/">https://rickhw.github.io/2019/02/27/ComputerScience/IO-Models/</a></p>
<p>é˜»å¡/éé˜»å¡ï¼šè¯·æ±‚åœ¨ç­‰å¾…ç»“æœçš„çŠ¶æ€
åŒæ­¥/å¼‚æ­¥ï¼šç”¨æˆ·ç¨‹åºä¸å†…æ ¸çš„é€šä¿¡æ¨¡å¼</p>
<p>syn: åŒæ­¥ï¼Œä¸»åŠ¨ç­‰å¾…æˆ–ä¸»åŠ¨è½®è¯¢ã€‚include: block nonclock IO-multiplexing
asyn : å¼‚æ­¥ï¼Œç­‰å¾…å¯¹æ–¹æ¶ˆæ¯é€šçŸ¥ä½ ï¼Œå›è°ƒå‡½æ•°ã€‚
A synchronous I/O operation causes the requesting process to be blocked until that I/O operation completes.
An asynchronous I/O operation does not cause the requesting process to be blocked.</p>
<p>block &#x26; non-block &#x26; IO-multi:
step1: Waiting for the data to be ready; å†…æ ¸ç­‰å¾…æ•°æ®ï¼ŒåŒºåˆ«é˜»å¡/éé˜»å¡ï¼›
step2: Copying the data from the kernel to the process; çº¿ç¨‹ä»å†…æ ¸å¤åˆ¶æ•°æ®ï¼ŒåŒºåˆ«åŒæ­¥/å¼‚æ­¥ï¼›</p>
<p>socketï¼š1st step, waiting for data to arrive on the network, waiting for data to arrive on the network.
2nd step, copying this data from the kernelâ€™s buffer into our application buffer.</p>
<p>â€˜blockâ€™ block from step1 to step2;
â€˜non-blockâ€™ check in step1 and block in step2;
â€˜IO-multiplexingâ€™ call to select then block, waiting for one of many socks to become readable, then copy the data to the app buffer;</p>
<p>æœ‰Aï¼ŒBï¼ŒCï¼ŒDå››ä¸ªäººåœ¨é’“é±¼ï¼Œé’“é±¼åˆ†ä¸º1)çŸ¥é“é±¼ä¸Šé’©äº†ï¼Œ2)æ‹‰æ†ä¸¤ä¸ªåŠ¨ä½œï¼š
block: Aç”¨çš„æ˜¯æœ€è€å¼çš„é±¼ç«¿ï¼Œä¸€ç›´å®ˆç€ï¼ˆé˜»å¡ï¼‰ï¼Œç­‰åˆ°é±¼ä¸Šé’©äº†ï¼Œå†æ‹‰æ†ï¼›
non-block: Bçš„é±¼ç«¿æœ‰ä¸ªåŠŸèƒ½ï¼Œèƒ½å¤Ÿæ˜¾ç¤ºæ˜¯å¦æœ‰é±¼ä¸Šé’©ï¼Œæ‰€ä»¥Bå°±å’Œæ—è¾¹çš„MMèŠå¤©ï¼Œéš”ä¼šå†çœ‹çœ‹ï¼ˆéé˜»å¡ï¼‰æœ‰æ²¡æœ‰é±¼ä¸Šé’©ï¼Œæœ‰çš„è¯å°±è¿…é€Ÿæ‹‰æ†ï¼›
IO-multiplexing: Cç”¨çš„é±¼ç«¿å’ŒBå·®ä¸å¤šï¼Œä½†ä»–æƒ³äº†ä¸€ä¸ªå¥½åŠæ³•ï¼Œå°±æ˜¯åŒæ—¶æ”¾å¥½å‡ æ ¹é±¼ç«¿ï¼Œç„¶åå®ˆåœ¨æ—è¾¹ï¼Œä¸€æ—¦æœ‰æ˜¾ç¤ºè¯´é±¼ä¸Šé’©äº†ï¼Œä»–å°±å°†å¯¹åº”çš„é±¼ç«¿æ‹‰èµ·æ¥ï¼›
asyn: Dæ˜¯ä¸ªæœ‰é’±äººï¼Œå¹²è„†é›‡äº†ä¸€ä¸ªäººå¸®ä»–é’“é±¼ï¼Œä¸€æ—¦é‚£ä¸ªäººæŠŠé±¼é’“ä¸Šæ¥äº†ï¼ˆå¼‚æ­¥ï¼‰ï¼Œå°±ç»™Då‘ä¸ªçŸ­ä¿¡ã€‚</p>
<h3 id="111--åŒæ­¥">1.1.1 Â· åŒæ­¥</h3>
<p>é˜»å¡Blockingï¼š
çº¿ç¨‹åœ¨è®¿é—®æ–‡ä»¶æˆ–ç½‘ç»œèµ„æºæ—¶ï¼Œä¼šå› å‘èµ·äº†å†…æ ¸çš„ç³»ç»Ÿè°ƒç”¨<strong>è¢«æŒ‚èµ·</strong>ï¼Œå†…æ ¸ä¼šæ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å¯è¯»ï¼Œå½“æ–‡ä»¶æè¿°ç¬¦ä¸­å­˜åœ¨æ•°æ®æ—¶ï¼Œå†…æ ¸ä¼šå°†æ•°æ®å¤åˆ¶ç»™çº¿ç¨‹å¹¶äº¤å›æ§åˆ¶æƒï¼Œçº¿ç¨‹<strong>ä»æŒ‚èµ·çŠ¶æ€åˆ‡æ¢æˆå¯è¿è¡ŒçŠ¶æ€</strong>ç­‰åˆ°å†…æ ¸è°ƒåº¦è¿è¡Œã€‚</p>
<p>éé˜»å¡Non-blockingï¼š
çº¿ç¨‹åœ¨è®¿é—®æ–‡ä»¶æˆ–ç½‘ç»œèµ„æºæ—¶ï¼Œå› æ–‡ä»¶æè¿°ç¬¦æ˜¯éé˜»å¡çš„ï¼Œçº¿ç¨‹åœ¨æ£€æŸ¥æ•°æ®æ˜¯å¦å¯è¯»çš„é˜¶æ®µæ˜¯<strong>éé˜»å¡</strong>çš„ã€‚æ­¤æ¨¡å‹éœ€è¦çº¿ç¨‹ä¸åœçš„é€šè¿‡è½®è¯¢(polling)çš„æ–¹å¼æ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å¯è¯»ã€‚
ä½†ä¹‹æ‰€ä»¥å±äºåŒæ­¥I/Oï¼Œæ˜¯å› ä¸ºåœ¨æœ€ç»ˆè¯»å–æ•°æ®(recvfrom)æ—¶éœ€è¦ä»å†…æ ¸æ€ä¸­æ‹·è´æ•°æ®(recvfrom)åˆ°ç”¨æˆ·æ€ä¸­ï¼Œè¿™ä¸ªé˜¶æ®µçº¿ç¨‹ä¾æ—§è¢«é˜»å¡ä½æ— æ³•å¤„ç†å…¶ä»–æŒ‡ä»¤ã€‚</p>
<p>å¤šè·¯å¤ç”¨Multiplexingï¼š
åŒæ—¶è®¿é—®å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œè¿™å¾ˆé€‚åˆæ„å»ºé«˜å¹¶å‘çš„WebæœåŠ¡å™¨æˆ–ä¸­é—´ä»¶ã€‚ä½†æ­¤æ¨¡å‹ä¼šåœ¨æ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦æ—¶ä¼šè¢«é˜»å¡(select)ï¼Œå¹¶ä¸”åœ¨è¯»å–æ•°æ®(recvfrom)æ—¶ä¹Ÿä¼šè¢«é˜»å¡ã€‚å’Œå¤šè·¯å¤ç”¨æ¨¡å‹ç›¸ä¼¼çš„æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹å’Œé˜»å¡I/Oï¼Œä½†å½“çº¿ç¨‹äº§ç”Ÿå¾ˆå¤šæ—¶ä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜èµ„æºä»¥åŠçº¿ç¨‹è°ƒåº¦äº§ç”Ÿçš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼Œæ‰€ä»¥å¤šè·¯å¤ç”¨æ¨¡å‹ä¸€èˆ¬åªä½¿ç”¨å•çº¿ç¨‹æ¨¡å‹ã€‚</p>
<p>ä¿¡å·é©±åŠ¨Signal Drivenï¼š
å’Œä¸Šé¢çš„æ¨¡å‹åŒºåˆ«åœ¨äºï¼Œä¹‹å‰çš„æ¨¡å‹éƒ½éœ€è¦çº¿ç¨‹ä¸»åŠ¨è½®è¯¢ï¼Œä¿¡å·é©±åŠ¨æ¨¡å‹éœ€è¦ç›‘å¬å†…æ ¸çš„SIGIOäº‹ä»¶ï¼Œé€šè¿‡æ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä¹‹åçº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚å½“æ•°æ®å¯è¯»æ—¶ï¼Œçº¿ç¨‹å¤„ç†å‡½æ•°ä¼šä»¥é˜»å¡çš„æ–¹å¼ä»å†…æ ¸æ€å¤åˆ¶æ•°æ®åˆ°ç”¨æˆ·æ€ã€‚</p>
<h3 id="112--å¼‚æ­¥">1.1.2 Â· å¼‚æ­¥</h3>
<p>æ­¤æ¨¡å‹å’ŒåŒæ­¥æ¨¡å‹æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œä¸ä»…åœ¨è·å–æ–‡ä»¶æ“ä½œç¬¦æ—¶ä¸ä¼šè¢«é˜»å¡ï¼Œæ•°æ®ä»å†…æ ¸æ€å¤åˆ¶åˆ°ç”¨æˆ·æ€ä¹Ÿä¸ä¼šè¢«é˜»å¡ï¼Œå› ä¸ºå†…æ ¸ä¼šå»åšè¿™ä¸ªå¤åˆ¶æ•°æ®çš„å·¥ä½œï¼Œçº¿ç¨‹åªéœ€è¦åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨æ•°æ®å³å¯ã€‚</p>
<p>file apiï¼š<a href="https://programmer.group/file-io-programming-under-linux.html">https://programmer.group/file-io-programming-under-linux.html</a></p>
<p>fd: <a href="https://en.wikipedia.org/wiki/File_descriptor">https://en.wikipedia.org/wiki/File_descriptor</a></p>
<p><a href="https://hechao.li/2022/01/04/select-vs-poll-vs-epoll/">https://hechao.li/2022/01/04/select-vs-poll-vs-epoll/</a></p>
<p><a href="https://jvns.ca/blog/2017/06/03/async-io-on-linux--select--poll--and-epoll/">https://jvns.ca/blog/2017/06/03/async-io-on-linuxâ€”selectâ€”pollâ€”and-epoll/</a></p>
<h2 id="12--r">1.2 Â· r</h2>
<p>é€šç”¨å¯„å­˜å™¨ï¼ˆæ•°æ®å¯„å­˜å™¨ã€æŒ‡é’ˆå¯„å­˜å™¨ã€ç´¢å¼•å¯„å­˜å™¨ï¼‰ï¼Œ æ§åˆ¶å¯„å­˜å™¨ï¼Œ æ®µå¯„å­˜å™¨
æ•°æ®å¯„å­˜å™¨ï¼šç®—æ•°ã€é€»è¾‘ã€å…¶ä»–æ“ä½œï¼› AX BX CX DX
æŒ‡é’ˆå¯„å­˜å™¨ï¼šæŒ‡ä»¤æŒ‡é’ˆIPï¼ˆå¾…æ‰§è¡ŒæŒ‡ä»¤ä½ç½®åç§»ï¼Œä¸æ®µå¯„å­˜å™¨ä¸€èµ·ç¡®å®šå®Œæ•´æŒ‡ä»¤ä½ç½®ï¼‰ã€æ ˆæŒ‡SPï¼ˆç¨‹åºæ ˆåç§»ï¼Œä¸æ®µå¯„å­˜å™¨ä¸€èµ·ç¡®å®šå½“å‰æ•°æ®æˆ–åœ°å€çš„ä½ç½®ï¼‰ã€åŸºæŒ‡é’ˆBPï¼ˆä¸»è¦å¼•ç”¨ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°å˜é‡ï¼‰
ç´¢å¼•å¯„å­˜å™¨ï¼šæºå¯„å­˜å™¨SIã€ç›®çš„å¯„å­˜å™¨DI
æ§åˆ¶å¯„å­˜å™¨ï¼šæŒ‡ä»¤å¯„å­˜å™¨åŠ æ ‡å¿—å¯„å­˜å™¨ä¸€èµ·å¯ä»¥çœ‹ä½œæ§åˆ¶å¯„å­˜å™¨
æ®µå¯„å­˜å™¨ï¼šä»£ç æ®µCSã€æ•°æ®æ®µDSã€æ ˆæ®µSSã€ESã€FSã€GS</p>
<h2 id="13--sys-call">1.3 Â· sys call</h2>
<ol>
<li>ç³»ç»Ÿè°ƒç”¨æ•°å­— â€”>> EAX</li>
<li>æŠŠç³»ç»Ÿè°ƒç”¨å‚æ•°æ”¾å…¥ EBX ECX EDX ESI EDI EBPï¼Œå¦‚æœè¶…è¿‡å…­ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„å†…å­˜åœ°å€å‚¨å­˜åœ¨EBX</li>
<li>è°ƒç”¨ç›¸å…³ä¸­æ–­(80h)</li>
<li>ç»“æœé€šå¸¸è¿”å›åœ¨ EAX</li>
</ol>
<h2 id="14--å¯»å€æ¨¡å¼">1.4 Â· å¯»å€æ¨¡å¼</h2>
<p>å¯„å­˜å™¨å¯»å€ï¼š
ç«‹å³æ•°å¯»å€ï¼š
å†…å­˜å¯»å€ï¼šç›´æ¥å†…å­˜ï¼Œåç§»ï¼Œé—´æ¥åç§»</p>
<h2 id="15--å˜é‡">1.5 Â· å˜é‡</h2>
<p>æ±‡ç¼–å®šä¹‰å‘½ä»¤ï¼Œåˆ†é…å†…å­˜ç©ºé—´ï¼›
<code>[variable-name]    define-directive    initial-value   [,initial-value]...</code></p>
<p>DB/DW/DD/DQ/DT(1/2/4/8/10 bytes)</p>
<p>åˆ†é…æœªåˆå§‹åŒ–å˜é‡ï¼š
RESB/RESW/RESD/RESQ/REST(1/2/4/8/10 bytes)</p>
<p>TIMESå‘½ä»¤ï¼Œå¤šæ¬¡åˆå§‹åŒ–ç›¸åŒçš„å€¼ï¼Œæ¯”å¦‚åˆå§‹åŒ–æ•°ç»„</p>
<h2 id="16--å¸¸é‡">1.6 Â· å¸¸é‡</h2>
<p>EQT %define %assign</p>
<p><code>CONSTANT_NAME EQU expression</code>
<code>%assign TOTAL 10</code>(define numeric constants, allows redefinition)
<code>%define PTR [EBP+4]</code>(defining both numeric and string constants)</p>
<h2 id="17--ç®—æœ¯é€»è¾‘">1.7 Â· ç®—æœ¯ã€é€»è¾‘</h2>
<h2 id="18--æ¡ä»¶">1.8 Â· æ¡ä»¶</h2>
<p>æ— æ¡ä»¶è·³è½¬ï¼šjmpæŒ‡ä»¤ <code>JMP  label</code></p>
<p>æœ‰æ¡ä»¶è·³è½¬ï¼š<a href="https://www.tutorialspoint.com/assembly_programming/assembly_conditions.htm">j<condition> æŒ‡ä»¤</condition></a></p>
<p>åˆ¤æ–­æ¡ä»¶ï¼ŒcmpæŒ‡ä»¤ï¼Œä¸¤æ“ä½œæ•°ä¹‹é—´æ¯”è¾ƒä½†ä¸ä¿®æ”¹åŸæœ‰çš„æ“ä½œæ•°: <code>CMP destination, source</code></p>
<h2 id="19--å¾ªç¯">1.9 Â· å¾ªç¯</h2>
<p>å¯ä»¥ä½¿ç”¨jmpæŒ‡ä»¤å®ç°å¾ªç¯(é…åˆä¸€ä¸ªå˜é‡çš„é€’å‡)</p>
<p>loopæŒ‡ä»¤ï¼š<code>LOOP  label</code> ecxå¯„å­˜å™¨å­˜æ”¾å¾ªç¯çš„æ¬¡æ•°</p>
<p><code>    mov ECX,10     l1:     &#x3C;loop body>     loop l1</code></p>
<h2 id="110--æ•°å­—å­—ç¬¦ä¸²æ•°ç»„">1.10 Â· æ•°å­—ã€å­—ç¬¦ä¸²ã€æ•°ç»„</h2>
<p><a href="https://stackoverflow.com/questions/15191178/how-do-ax-ah-al-map-onto-eax">https://stackoverflow.com/questions/15191178/how-do-ax-ah-al-map-onto-eax</a>
In x86 assembly, <strong>AL</strong> is the <strong>least significant byte(8 bits)</strong> of <strong>eax</strong> register.</p>
<p><a href="https://www.felixcloutier.com/x86/movups">https://www.felixcloutier.com/x86/movups</a>
movups: Move Unaligned Packed Single-Precision Floating-Point Values</p>
<p><a href="https://www.felixcloutier.com/x86/movaps">https://www.felixcloutier.com/x86/movaps</a>
movaps: Move Aligned Packed Single-Precision Floating-Point Values</p>
<p>[ATTæ±‡ç¼–]åç¼€å­—æ¯:
bå­—èŠ‚=1å­—èŠ‚;
wå­—=2å­—èŠ‚;
låŒå­—=4å­—èŠ‚;
qå››å­—=8å­—èŠ‚
*[s:0-59:<code>, - * /</code>] *[m:0-59:<code>, - * /</code>] *[h:0-23:<code>, - * /</code>] *[day of month:1-31:<code>, - * ? / L W C</code>] *[m:1-12:<code>, - * /</code>] *[day of week:1-7:<code>, - * ? / L C #</code>] *[y:å¯ç©º:<code>, - * /</code>] cmd</p>
<h1 id="2--virtual-memory">2 Â· virtual memory</h1>
<blockquote>
<p>è™šæ‹Ÿå†…å­˜ï¼šä¸­é—´è½¬ä¸€å±‚è®¿é—®ç‰©ç†ç©ºé—´
indirection: ä»»ä½•è®¡ç®—æœºé—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¼•å…¥æ–°çš„ä¸€å±‚è¢«è§£å†³</p>
</blockquote>
<p>3 ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´</li>
<li>å¤šä¸ªç¨‹åºï¼Œå¯¼è‡´ç©ºé—´ä¸è¿ç»­</li>
<li>å¤šä¸ªç¨‹åºäº’ç›¸å†™å†…å­˜</li>
</ol>
<p>æ˜ å°„è™šæ‹Ÿå†…å­˜åˆ°çœŸå®å†…å­˜ï¼š
<strong>é¡µè¡¨</strong>
<strong>åœ°å€ç¿»è¯‘</strong></p>
<p>æ˜ å°„éƒ¨åˆ†ç¨‹åºåœ°å€ç©ºé—´åˆ°ç¡¬ç›˜ï¼Œå½“éœ€è¦çš„æ—¶å€™åŠ è½½åˆ°å†…å­˜ã€‚
æ€§èƒ½ç›¸æ¯”ç›´æ¥è®¿é—®å†…å­˜ï¼Œæ…¢äº†ä¸€äº›ã€‚ç¡¬ç›˜æ¯”å†…å­˜æ…¢äº† 1000X å€ã€‚</p>
<p>éš”ç¦»è¿›ç¨‹ã€‚</p>
<h1 id="3---minute-0---59">3 Â· â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ minute (0 - 59)</h1>
<h1 id="4----hour-0---23">4 Â· â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ hour (0 - 23)</h1>
<h1 id="5-----day-of-the-month-1---31">5 Â· â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ day of the month (1 - 31)</h1>
<h1 id="6------month-1---12">6 Â· â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ month (1 - 12)</h1>
<h1 id="7-------day-of-the-week-0---6-sunday-to-saturday">7 Â· â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ day of the week (0 - 6) (Sunday to Saturday;</h1>
<h1 id="8-----------------------------------------7-is-also-sunday-on-some-systems">8 Â· â”‚ â”‚ â”‚ â”‚ â”‚                                   7 is also Sunday on some systems)</h1>
<h1 id="9-----">9 Â· â”‚ â”‚ â”‚ â”‚ â”‚</h1>
<h1 id="10-----">10 Â· â”‚ â”‚ â”‚ â”‚ â”‚</h1>
<h1 id="11------">11 Â· * * * * * <command to="" execute=""></h1>
<ul>
<li>é‡å¤å¯¹åº”ä½ç½®ä¸Šæ—¶é—´ï¼Œæ¯s æ¯m æ¯h â€¦
, åˆ—è¡¨ï¼Œé‡å¤å¯¹åº”ä½ç½®ä¸Šå¤šä¸ªæŒ‡å®šæ—¶é—´
? æ— æ„ä¹‰ï¼Œå ä½ç¬¦ï¼Œæ—¥ å‘¨ ä½ä¸Š</li>
</ul>
<ul>
<li>è¡¨ç¤ºèŒƒå›´ æ—¶20-22ï¼Œè¡¨ç¤º20 21 22ç‚¹
/ èµ·ç‚¹/æ­¥é•¿ æ—¥10/10ï¼Œè¡¨ç¤º10 20 30æ—¥
L lastï¼Œä»…æ”¯æŒæ—¥æœˆ æ—¥å‘¨ä½ ï¼Œæœˆä»½æœ€åä¸€å¤©æˆ–æ˜ŸæœŸå…­
W weekday,ä»…æ”¯æŒæ—¥ä½ï¼Œåè¾¹æœ€è¿‘çš„å·¥ä½œæ—¥</li>
</ul>
<h1 id="12--ä»…æ”¯æŒå‘¨ä½ab-è¡¨ç¤ºå½“æœˆç¬¬-b-ä¸ªæ˜ŸæœŸ-a">12 Â· ä»…æ”¯æŒå‘¨ä½ï¼Œa#b è¡¨ç¤ºå½“æœˆç¬¬ b ä¸ªæ˜ŸæœŸ a</h1>
<p>C å…³è”æ—¥å†</p>
<p>æ³¨æ„ï¼š
å‘¨ä½ç½® (0 - 6) (Sunday to Saturday; 7 is also Sunday on some systems)
å‘¨ä½ä¸Šç»™å®šå€¼åï¼Œåœ¨æ—¥ä½ä¸Šè¦ç”¨ ?
â€œLâ€ å’Œ â€œWâ€ å¯åœ¨æ—¥ä½ä¸­è”åˆä½¿ç”¨ï¼ŒLW è¡¨ç¤ºè¿™ä¸ªæœˆæœ€åä¸€å‘¨çš„å·¥ä½œæ—¥
â€œWâ€ å­—ç¬¦æŒ‡å®šçš„æœ€è¿‘å·¥ä½œæ—¥æ˜¯ä¸èƒ½è·¨æœˆ
W å­—ç¬¦ä¸²åªèƒ½æŒ‡å®šå•ä¸€æ—¥æœŸï¼Œè€Œä¸èƒ½æŒ‡å®šæ—¥æœŸèŒƒå›´
æ—¥ä½å»ºè®®æœ€å¤§å€¼ä¸º 28 ï¼Œå› ä¸º 2 æœˆæœ‰æ—¶å€™æ˜¯ 28 å¤©</p>
<h2 id="121--debugging-profiling-tracing">12.1 Â· debugging, profiling, tracing</h2>
<p>debugging:</p>
<ul>
<li>Interactive debugging: GDB</li>
<li>Postmortem analysis: coredump</li>
<li>Control flow analysis: tracing tools</li>
<li>Testing</li>
</ul>
<p>profiling:</p>
<ul>
<li>Analysis at program runtime</li>
<li>Often achieved by sampling counters</li>
<li>Uses specific tools: perf</li>
<li>Gathering data from program execution: Function call count, memory usage, CPU load, cache miss, etc</li>
<li>Extracting meaningful information from these data and modify the program to optimize it</li>
</ul>
<p>tracing:</p>
<ul>
<li>Following the execution flow of an application</li>
<li>Achieved by instrumenting code</li>
<li>Often works by recording traces during runtime</li>
</ul>
<h3 id="1211--linux-application-stack">12.1.1 Â· linux application stack</h3>
<p>user/kernel mode:</p>
<p>process/thread:</p>
<p>memory management:</p>
<p>memory layout: heap, stack, data, text</p>
<p>process context: register,
task scheduling:
Context switching: system calls;  receiving exceptions
Interrupts:</p>
<blockquote>
<blockquote>
<p>An exception is an unexpected event from within the processor.Â Interrupt is an unexpected event from outside the process.
System Calls:</p>
</blockquote>
</blockquote>
<p>ptrace:<!-- https://leetcode-cn.com/leetbook/read/awesome-linux-handbook/egspb3/ --></p>
<h2 id="122--linux">12.2 Â· linux</h2>
<h3 id="1221--æ¥å£">12.2.1 Â· æ¥å£</h3>
<p>ç”¨æˆ·æ¥å£(ç¨‹åº) â€”> æ ‡å‡†åº“æ¥å£(æ ‡å‡†åº“) â€”> ç³»ç»Ÿè°ƒç”¨æ¥å£(æ“ä½œç³»ç»Ÿ) â€”> ç¡¬ä»¶
ç”¨æˆ·æ¨¡å¼----------------------------->&#x3C;-----------------------å†…æ ¸æ¨¡å¼</p>
<p>åº”ç”¨ç¨‹åºå‘èµ·ç³»ç»Ÿè°ƒç”¨ï¼ŒæŠŠå‚æ•°æ”¾åœ¨å¯„å­˜å™¨æˆ–æ ˆä¸­ï¼Œç„¶åå‘å‡ºtrapç³»ç»Ÿé™·å…¥æŒ‡ä»¤ï¼Œåˆ‡æ¢ç”¨æˆ·æ€è‡³å†…æ ¸æ€ã€‚
Cæä¾›äº†åº“ï¼Œåº“å‡½æ•°å¯¹åº”ç³»ç»Ÿè°ƒç”¨ï¼Œæœ‰äº›å‡½æ•°ä½¿ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™çš„ã€‚
POSIX æ˜¯ä¸€ç»„æ ‡å‡†çš„ç³»ç»Ÿè°ƒç”¨æ¥å£ã€‚</p>
<p>ä¸‰ç§æ¥å£ï¼šç³»ç»Ÿè°ƒç”¨æ¥å£ã€åº“å‡½æ•°æ¥å£å’Œåº”ç”¨ç¨‹åºæ¥å£ã€‚</p>
<h3 id="1222--ç»„æˆ">12.2.2 Â· ç»„æˆ</h3>
<p>å¼•å¯¼ç¨‹åºbootloaderï¼Œå†…æ ¸kernelï¼Œåˆå§‹åŒ–ç³»ç»Ÿinitsystemï¼Œåå°è¿›ç¨‹daemonï¼Œå›¾å½¢æœåŠ¡å™¨graphicalserverï¼Œæ¡Œé¢ç¯å¢ƒdesktopenvironmentï¼Œåº”ç”¨ç¨‹åºapplication</p>
<h3 id="1223--shell">12.2.3 Â· shell</h3>
<h3 id="1224--åº”ç”¨ç¨‹åº">12.2.4 Â· åº”ç”¨ç¨‹åº</h3>
<h3 id="1225--å†…æ ¸ç»“æ„">12.2.5 Â· å†…æ ¸ç»“æ„</h3>
<p>ç³»ç»Ÿè°ƒç”¨
I/O å†…å­˜ è¿›ç¨‹
ä¸­æ–­ è°ƒåº¦å™¨dispatcher</p>
<p>I/Oï¼šè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</p>
<p>å†…å­˜ï¼šè™šæ‹Ÿå†…å­˜ï¼Œé¡µé¢æ›¿æ¢ï¼Œé¡µé¢ç¼“å­˜</p>
<p>è¿›ç¨‹ï¼šä¿¡å·ï¼Œè°ƒåº¦ï¼Œåˆ›å»º/ç»ˆæ­¢</p>
<h3 id="1226--è¿›ç¨‹çº¿ç¨‹">12.2.6 Â· è¿›ç¨‹/çº¿ç¨‹</h3>
<p>æ¯ä¸ªè¿›ç¨‹è¿è¡Œä¸€æ®µç‹¬ç«‹çš„ç¨‹åºï¼Œæœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå…è®¸è¿›ç¨‹åˆ›å»ºé¢å¤–çš„çº¿ç¨‹ã€‚</p>
<p>forkç³»ç»Ÿè°ƒç”¨ï¼Œåˆ›å»ºä¸€ä¸ªæºè¿›ç¨‹çš„æ‹·è´ï¼ˆå‰¯æœ¬ï¼‰ï¼Œè°ƒç”¨forkä¸ºçˆ¶è¿›ç¨‹ï¼Œåˆ›å»ºå‡ºæ¥çš„ä¸ºå­è¿›ç¨‹ï¼Œforkåï¼Œçˆ¶å­è¿›ç¨‹ç›¸äº’ç‹¬ç«‹ã€‚
forkå‰ï¼Œçˆ¶è¿›ç¨‹å·²ç»æ‰“å¼€æ–‡ä»¶ï¼Œå­è¿›ç¨‹å¯ä»¥å…±äº«è¿™ä¸ªæ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶çš„ä¿®æ”¹ï¼Œçˆ¶å­åŒæ—¶å¯è§ã€‚</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto;" tabindex="0" data-language="c"><code><span class="line"><span style="color:#D8DEE9FF">pid </span><span style="color:#81A1C1">=</span><span style="color:#88C0D0"> fork</span><span style="color:#ECEFF4">()</span><span style="color:#81A1C1">;</span><span style="color:#616E88">    // è°ƒç”¨ fork å‡½æ•°åˆ›å»ºè¿›ç¨‹</span></span>
<span class="line"><span style="color:#81A1C1">if</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9FF">pid </span><span style="color:#81A1C1">&#x3C;</span><span style="color:#B48EAD"> 0</span><span style="color:#ECEFF4">){</span></span>
<span class="line"><span style="color:#88C0D0">  error</span><span style="color:#ECEFF4">()</span><span style="color:#616E88">				 // pid &#x3C; 0,åˆ›å»ºå¤±è´¥</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#81A1C1">else</span><span style="color:#81A1C1"> if</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9FF">pid </span><span style="color:#81A1C1">></span><span style="color:#B48EAD"> 0</span><span style="color:#ECEFF4">){</span></span>
<span class="line"><span style="color:#88C0D0">  parent_handle</span><span style="color:#ECEFF4">()</span><span style="color:#616E88"> // çˆ¶è¿›ç¨‹ä»£ç </span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#81A1C1">else</span><span style="color:#ECEFF4"> {</span><span style="color:#616E88"> // pid == 0,å­è¿›ç¨‹ä»£ç </span></span>
<span class="line"><span style="color:#88C0D0">  child_handle</span><span style="color:#ECEFF4">()</span><span style="color:#616E88">  // å­è¿›ç¨‹ä»£ç </span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre>
<p>taskç»“æ„ä½“ï¼ŒåŒ…æ‹¬ è°ƒåº¦å‚æ•°ã€æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦ç­‰ç­‰ã€‚</p>
<p>è¿›ç¨‹ï¼š
è°ƒåº¦å‚æ•°(scheduling parameters)
å†…å­˜æ˜ åƒ(memory image)
ä¿¡å·(signals)
å¯„å­˜å™¨
ç³»ç»Ÿè°ƒç”¨çŠ¶æ€(system call state)
æ–‡ä»¶æè¿°ç¬¦è¡¨(file descriptor table)
ç»Ÿè®¡æ•°æ®(accounting)
å†…æ ¸å †æ ˆ(kernel stack)</p>
<h3 id="1227--è°ƒåº¦">12.2.7 Â· è°ƒåº¦</h3>
<p>åŸºäºçº¿ç¨‹</p>
<p>å®æ—¶å…ˆå…¥å…ˆå‡º
å®æ—¶è½®è¯¢
åˆ†æ—¶</p>
<h3 id="1228--è¿›ç¨‹é—´é€šä¿¡-ipc">12.2.8 Â· è¿›ç¨‹é—´é€šä¿¡ IPC</h3>
<p><a href="https://zhuanlan.zhihu.com/p/37872762">https://zhuanlan.zhihu.com/p/37872762</a></p>
<p>ä¿¡å·signals:
å‘ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å‘é€å¼‚æ­¥äº‹ä»¶ä¿¡å·ã€‚
æ“ä½œç³»ç»Ÿä¼šä¸­æ–­ç›®æ ‡ç¨‹åºï¼Œå‘å…¶å‘é€ä¿¡å·ï¼Œå¦‚æœè¿›ç¨‹æ³¨å†Œçš„ä¿¡å·å¤„ç†ç¨‹åºï¼Œåˆ™æ‰§è¡Œï¼Œå¦åˆ™é‡‡ç”¨é»˜è®¤å¤„ç†ã€‚
å¦‚æœåŒæ—¶äº§ç”Ÿå¤šä¸ªä¿¡å·ï¼Œä»¥ä»»æ„é¡ºåºè¿›è¡Œå¤„ç†ã€‚</p>
<p><a href="https://zhuanlan.zhihu.com/p/37889820">https://zhuanlan.zhihu.com/p/37889820</a>
ç®¡é“pipeï¼š
ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´ï¼Œä¸€ä¸ªå†™å­—èŠ‚æµï¼Œä¸€ä¸ªè¯»å­—èŠ‚æµã€‚ ç®¡é“ç¬¦å·<code>|</code>ã€‚
pipe</p>
<p>å…±äº«å†…å­˜sharedmemoryï¼š
åˆ›å»ºå…±äº«å†…å­˜æˆ–ä½¿ç”¨å·²ç»åˆ›å»ºçš„å†…å­˜æ®µ: shmget
å°†è¿›ç¨‹é™„è¿‘åˆ°å·²ç»åˆ›å»ºçš„å†…å­˜æ®µ: shmat
ä»å·²ç»è¿æ¥çš„å…±äº«å†…å­˜çš„åˆ†ç¦»è¿›ç¨‹: shmdt
å¯¹å…±äº«å†…å­˜è¿›è¡Œæ§åˆ¶æ“ä½œ: shmctl</p>
<p>å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—FIFO:
é€šå¸¸ç§°å‘½åç®¡é“ã€‚
å‘½åç®¡é“æ˜¯ä»¥ä¸€ä¸ªæ™®é€šæ–‡ä»¶çš„å½¢å¼å‡ºç°çš„ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªæ–‡ä»¶æ“ä½œï¼šåˆ›å»ºå‘½åç®¡é“ã€å†™ç®¡é“ã€è¯»ç®¡é“ã€‚</p>
<p>æ¶ˆæ¯é˜Ÿåˆ—messagequeueï¼š
ç‹¬ç«‹äºå‘é€è¿›ç¨‹ã€æ¥å—è¿›ç¨‹è€Œå­˜åœ¨ã€‚
æä¾›äº†ä¸€ç§ä»ä¸€ä¸ªè¿›ç¨‹å‘å¦ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ä¸ªæ•°æ®å—çš„æ–¹æ³•ã€‚
msgctl
msgget
msgrcv
msgsnd</p>
<p>å¥—æ¥å­—socket:
å¥—æ¥å­—ä¸€èˆ¬ç”¨äºä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚
socket</p>
<h3 id="1229--ç³»ç»Ÿè°ƒç”¨">12.2.9 Â· ç³»ç»Ÿè°ƒç”¨</h3>
<p>å†…æ ¸æ€/ç”¨æˆ·æ€</p>
<p>ç³»ç»Ÿè°ƒç”¨ æŒ‡çš„å°±æ˜¯å¼•èµ·å†…æ ¸æ€å’Œç”¨æˆ·æ€åˆ‡æ¢çš„ä¸€ç§æ–¹å¼ã€‚</p>
<p>fork
exec
waitpid
exit</p>
<h3 id="12210--å¯åŠ¨">12.2.10 Â· å¯åŠ¨</h3>
<p>å¼€æœºè‡ªæ£€(Power-On-Self-Test, POST)
MBR(Master Boot Record) ä¸»å¼•å¯¼è®°å½•
boot ç¨‹åºè¯»å–å¯åŠ¨è®¾å¤‡çš„æ ¹ç›®å½•
åˆ›å»º init è¿›ç¨‹(è¿›ç¨‹ 1 ) å’Œ å®ˆæŠ¤è¿›ç¨‹(è¿›ç¨‹ 2)</p>
<h3 id="12211--å†…å­˜">12.2.11 Â· å†…å­˜</h3>
<p>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰åœ°å€ç©ºé—´ï¼Œtextæ®µï¼Œdataæ®µï¼Œstackæ®µ</p>
<p>brk
mmap
unmap</p>
<h3 id="12212--å†…å­˜ç®¡ç†">12.2.12 Â· å†…å­˜ç®¡ç†</h3>
<p>è™šæ‹Ÿå†…å­˜(virtual memory)</p>
<p>ç¼“å­˜</p>
<p>é¡µè¡¨</p>
<p>é¡µåˆ†é…å’Œå–æ¶ˆåˆ†é…</p>
<p>å†…å­˜æ˜ å°„</p>
<h3 id="12213--io">12.2.13 Â· IO</h3>
<p>æ–‡ä»¶æè¿°ç¬¦(file descriptor)</p>
<h3 id="12214--fs">12.2.14 Â· fs</h3>
<p>create
open
close
read
write
lseek
fstat
pip
fcntl</p>
<h3 id="12215--è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ">12.2.15 Â· è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</h3> <!-- Diagrams rendered at build time -->  </article> <nav class="mt-12 pt-8 border-t border-nord-4 dark:border-nord-1" data-astro-cid-v5yihett> <a href="/notes" class="btn-primary" data-astro-cid-v5yihett> <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-v5yihett> <path d="M15 19l-7-7 7-7" data-astro-cid-v5yihett></path> </svg>
Back to Notes
</a> </nav>  </main> <footer class="border-t border-nord-5 dark:border-nord-1 mt-12"> <div class="max-w-4xl mx-auto px-4 py-6 text-sm text-nord-3 dark:text-nord-4 text-center"> <p>&copy; 2026. All rights reserved.</p> </div> </footer> <script type="module" src="/_astro/Base.astro_astro_type_script_index_0_lang.WDMQca9J.js"></script> <script>
      (function() {
        const root = document.getElementById('series-dropdown-root');
        const trigger = document.getElementById('series-dropdown-trigger');
        const panel = document.getElementById('series-dropdown-panel');
        const listEl = document.getElementById('series-dropdown-list');
        if (!root || !trigger || !panel || !listEl) return;

        let seriesList = null;
        let hoverTimeout = null;

        function open() {
          panel.classList.remove('hidden');
          trigger.setAttribute('aria-expanded', 'true');
          if (seriesList === null) {
            fetch('/series-list.json')
              .then((r) => r.json())
              .then((list) => {
                seriesList = list;
                if (list.length === 0) {
                  listEl.innerHTML = '<span class="block px-3 py-2 text-xs text-nord-4 dark:text-nord-3">æš‚æ— ç³»åˆ—</span>';
                } else {
                  listEl.innerHTML = list.map(function(name) {
                     const slug = name.toLowerCase().replace(/\s+/g, '-');
                     const url = '/notes/series/' + slug;
                     return '<a href="' + url + '" class="block px-3 py-2 text-sm text-nord-9 dark:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-2 transition-colors" role="menuitem">' + escapeHtml(name) + '</a>';
                   }).join('');
                }
              })
              .catch(function() {
                listEl.innerHTML = '<span class="block px-3 py-2 text-xs text-nord-11">åŠ è½½å¤±è´¥</span>';
              });
          }
        }

        function close() {
          panel.classList.add('hidden');
          trigger.setAttribute('aria-expanded', 'false');
        }

        function escapeHtml(s) {
          const div = document.createElement('div');
          div.textContent = s;
          return div.innerHTML;
        }

        // On click: allow default navigation to /notes/series
        // On hover: show dropdown menu
        trigger.addEventListener('click', function(e) {
          e.stopPropagation();
          // Don't preventDefault - allow link to navigate
        });

        trigger.addEventListener('mouseenter', function() {
          if (hoverTimeout) clearTimeout(hoverTimeout);
          hoverTimeout = setTimeout(open, 200);
        });

        root.addEventListener('mouseleave', function() {
          if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
          hoverTimeout = setTimeout(close, 150);
        });

        panel.addEventListener('mouseenter', function() {
          if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
        });

        document.addEventListener('click', function(e) {
          if (!root.contains(e.target)) close();
        });
      })();
    </script> <script>
      (function() {
        const root = document.getElementById('tags-dropdown-root');
        const trigger = document.getElementById('tags-dropdown-trigger');
        const panel = document.getElementById('tags-dropdown-panel');
        const listEl = document.getElementById('tags-dropdown-list');
        if (!root || !trigger || !panel || !listEl) return;

        let tagList = null;
        let hoverTimeout = null;

        function open() {
          panel.classList.remove('hidden');
          trigger.setAttribute('aria-expanded', 'true');
          if (tagList === null) {
            fetch('/tag-list.json')
              .then((r) => r.json())
              .then((list) => {
                tagList = list;
                if (list.length === 0) {
                  listEl.innerHTML = '<span class="block px-3 py-2 text-xs text-nord-4 dark:text-nord-3">æš‚æ— æ ‡ç­¾</span>';
                } else {
                  listEl.innerHTML = list.map(function(tag) {
                     const url = '/notes/tag/' + encodeURIComponent(tag);
                     return '<a href="' + url + '" class="block px-3 py-2 text-sm text-nord-9 dark:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-2 transition-colors" role="menuitem">' + escapeHtml(tag) + '</a>';
                   }).join('');
                }
              })
              .catch(function() {
                listEl.innerHTML = '<span class="block px-3 py-2 text-xs text-nord-11">åŠ è½½å¤±è´¥</span>';
              });
          }
        }

        function close() {
          panel.classList.add('hidden');
          trigger.setAttribute('aria-expanded', 'false');
        }

        function escapeHtml(s) {
          const div = document.createElement('div');
          div.textContent = s;
          return div.innerHTML;
        }

        trigger.addEventListener('click', function(e) {
          e.stopPropagation();
        });

        trigger.addEventListener('mouseenter', function() {
          if (hoverTimeout) clearTimeout(hoverTimeout);
          hoverTimeout = setTimeout(open, 200);
        });

        root.addEventListener('mouseleave', function() {
          if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
          hoverTimeout = setTimeout(close, 150);
        });

        panel.addEventListener('mouseenter', function() {
          if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
        });

        document.addEventListener('click', function(e) {
          if (!root.contains(e.target)) close();
        });
      })();
    </script> </body> </html>  <script>
  // Language aliases (matches server-side)
  const langAliases = {
    js: 'javascript',
    ts: 'typescript',
    yml: 'yaml',
    yaml: 'yaml',
    sh: 'bash',
    shell: 'bash',
    sql: 'postgresql',
    java: 'openjdk',
  };

  // Add headers and copy buttons to code blocks
  function initCodeBlocks() {
    document.querySelectorAll('pre[data-language]').forEach((pre) => {
      // Skip if already processed
      if (pre.parentNode.classList.contains('code-block-wrapper')) return;
      
      const lang = pre.getAttribute('data-language') || 'code';
      
      // Create wrapper
      const wrapper = document.createElement('div');
      wrapper.className = 'code-block-wrapper';
      pre.parentNode.insertBefore(wrapper, pre);
      wrapper.appendChild(pre);
      
      // Create header
      const header = document.createElement('div');
      header.className = 'code-header';
      
      const langSpan = document.createElement('span');
      langSpan.className = 'code-header-lang';
      langSpan.title = lang;
      
      // Normalize lang for devicon
      const normalizedLang = lang.toLowerCase();
      const iconLang = langAliases[normalizedLang] || normalizedLang;
      
      // Display language with devicon (format: devicon-{name}-{version} colored)
      const iconEl = document.createElement('i');
      iconEl.className = `devicon-${iconLang}-plain colored`;
      iconEl.style.marginRight = '0.375rem';
      iconEl.style.fontSize = '0.75rem';
      langSpan.appendChild(iconEl);
      langSpan.appendChild(document.createTextNode(lang));
      
      const button = document.createElement('button');
      button.className = 'copy-code-btn';
      button.title = 'Copy to clipboard';
      button.innerHTML = '<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>';
      
      let isCopying = false;
      button.addEventListener('click', async () => {
        if (isCopying) return;
        isCopying = true;
        
        const code = pre.querySelector('code')?.textContent || '';
        try {
          await navigator.clipboard.writeText(code);
          const originalHtml = button.innerHTML;
          button.innerHTML = '<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
          button.title = 'Copied!';
          setTimeout(() => {
            button.innerHTML = originalHtml;
            button.title = 'Copy to clipboard';
            isCopying = false;
          }, 2000);
        } catch (err) {
          console.error('Failed to copy:', err);
          isCopying = false;
        }
      });
      
      header.appendChild(langSpan);
      header.appendChild(button);
      wrapper.appendChild(header);
    });
  }

  // Run ASAP, then on DOMContentLoaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCodeBlocks);
  } else {
    initCodeBlocks();
  }

  // Convert wikilinks to links on client side
  // Matches [[ref]] or [[ref|display text]]
  document.addEventListener('DOMContentLoaded', () => {
    const wikiRegex = /\[\[([a-zA-Z0-9][a-zA-Z0-9_-]*?)(?:\|([^\]]+))?\]\]/g;
    
    // Process all text nodes in prose content
    const walker = document.createTreeWalker(
      document.querySelector('.prose') || document.body,
      NodeFilter.SHOW_TEXT,
      null,
      false
    );
    
    const nodesToReplace = [];
    let node;
    
    while (node = walker.nextNode()) {
      if (node.nodeValue.includes('[[')) {
        nodesToReplace.push(node);
      }
    }
    
    nodesToReplace.forEach((textNode) => {
      const parent = textNode.parentNode;
      let lastIndex = 0;
      const matches = [...textNode.nodeValue.matchAll(wikiRegex)];
      
      if (matches.length === 0) return;
      
      const fragment = document.createDocumentFragment();
      
      matches.forEach((match) => {
        const [fullMatch, ref, displayText] = match;
        const startIndex = match.index;
        
        // Add text before match
        if (startIndex > lastIndex) {
          fragment.appendChild(
            document.createTextNode(textNode.nodeValue.slice(lastIndex, startIndex))
          );
        }
        
        // Create link
        const link = document.createElement('a');
        link.href = `/notes/${ref.toLowerCase()}`;
        link.textContent = (displayText || ref).trim();
        link.className = 'text-nord-9 dark:text-nord-8 hover:text-nord-10 dark:hover:text-nord-7 transition-colors';
        fragment.appendChild(link);
        
        lastIndex = startIndex + fullMatch.length;
      });
      
      // Add remaining text
      if (lastIndex < textNode.nodeValue.length) {
        fragment.appendChild(
          document.createTextNode(textNode.nodeValue.slice(lastIndex))
        );
      }
      
      parent.replaceChild(fragment, textNode);
    });
  });
</script> 