<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Blog"><title>style-guide</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.16.0/devicon.min.css"><script>
      // This script runs synchronously in the head to prevent FOUC (Flash of Unstyled Content)
      (function() {
        const THEME_KEY = 'nord-theme';
        const DARK = 'dark';
        
        function getStoredTheme() {
          try {
            return localStorage.getItem(THEME_KEY);
          } catch {
            return null;
          }
        }
        
        function getSystemTheme() {
          return window.matchMedia('(prefers-color-scheme: dark)').matches ? DARK : 'light';
        }
        
        function getTheme() {
          return getStoredTheme() || getSystemTheme();
        }
        
        function applyTheme(theme) {
          const html = document.documentElement;
          if (theme === DARK) {
            html.classList.add('dark');
          } else {
            html.classList.remove('dark');
          }
        }
        
        // Apply theme immediately before page renders
        applyTheme(getTheme());
      })();
    </script><link rel="stylesheet" href="/_astro/_id_.6ed6JusR.css">
<style>.knowledge-graph-container[data-astro-cid-zjb43jqo]{border:1px solid var(--nord-4);border-radius:8px;background:var(--nord-6);position:relative;overflow:hidden}.knowledge-graph-container[data-astro-cid-zjb43jqo]:fullscreen,.knowledge-graph-container[data-astro-cid-zjb43jqo]::-webkit-full-screen{width:100vw;height:100vh;border-radius:0}.knowledge-graph-container[data-astro-cid-zjb43jqo]:fullscreen .knowledge-graph-wrapper[data-astro-cid-zjb43jqo],.knowledge-graph-container[data-astro-cid-zjb43jqo]::-webkit-full-screen .knowledge-graph-wrapper[data-astro-cid-zjb43jqo]{width:100%;height:100%}.knowledge-graph-toolbar{position:absolute;top:8px;right:8px;z-index:10;display:flex;gap:4px;align-items:center}.knowledge-graph-toolbar-btn{width:32px;height:32px;padding:0;border:1px solid var(--nord-4);border-radius:6px;background:var(--nord-6);color:var(--nord-2);font-size:16px;font-weight:600;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .15s,color .15s}.knowledge-graph-toolbar-btn:hover{background:var(--nord-5);color:var(--nord-10)}.knowledge-graph-toolbar-btn:active{background:var(--nord-4)}.knowledge-graph-wrapper[data-astro-cid-zjb43jqo]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.knowledge-graph-node{cursor:pointer;stroke:#5e81ac;stroke-width:2.5px;transition:all .2s ease}.knowledge-graph-node:hover{stroke-width:2.5px;filter:brightness(1.2)}.knowledge-graph-node.active{stroke:var(--nord-14);stroke-width:3px;filter:drop-shadow(0 0 8px rgba(191,97,106,.5))}.knowledge-graph-node--current{stroke:var(--nord-10);stroke-width:3px;filter:drop-shadow(0 0 6px rgba(94,129,172,.6))}.knowledge-graph-node--outlink{stroke:var(--nord-14);stroke-width:2.5px}.knowledge-graph-node--backlink{stroke:var(--nord-15);stroke-width:2.5px}.knowledge-graph-node--both{stroke:var(--nord-12);stroke-width:2.5px}.knowledge-graph-node--neighbor{stroke:var(--nord-4);stroke-width:2px;opacity:.9}.knowledge-graph-link{stroke:#4c566a;stroke-opacity:.85;stroke-width:2px}.knowledge-graph-link.active{stroke:var(--nord-11);stroke-opacity:.9;stroke-width:2px}.knowledge-graph-label{pointer-events:none;font-size:11px;text-anchor:middle;fill:var(--nord-1);font-weight:500;text-shadow:0 0 3px var(--nord-6)}.knowledge-graph-tooltip{position:absolute;padding:8px 12px;background:var(--nord-0);border:1px solid var(--nord-3);border-radius:4px;font-size:12px;color:var(--nord-6);pointer-events:none;z-index:1000;box-shadow:0 2px 8px #0000004d;white-space:nowrap}.knowledge-graph-tooltip-type{color:var(--nord-8);font-size:11px}.knowledge-graph-legend{position:absolute;bottom:8px;left:8px;z-index:10;display:flex;flex-wrap:wrap;gap:8px 12px;font-size:11px;color:var(--nord-2)}.kg-legend-item{display:inline-flex;align-items:center;gap:4px}.kg-legend--current{color:var(--nord-10)}.kg-legend--outlink{color:var(--nord-14)}.kg-legend--backlink{color:var(--nord-15)}.kg-legend--both{color:var(--nord-12)}.kg-legend--neighbor{color:var(--nord-4);opacity:.9}
html{scroll-behavior:smooth}article[data-astro-cid-v5yihett]{word-break:break-word}
</style></head> <body class="text-nord-3 dark:text-nord-5 transition-all bg-gradient-light"> <header class="border-b border-nord-5 dark:border-nord-1 bg-nord-6 dark:bg-nord-0"> <nav class="max-w-4xl mx-auto px-4 py-5 flex items-center justify-between gap-4"> <div class="flex items-center gap-2 min-w-0"> <a href="/" title="Liu" class="shrink-0 p-1.5 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-lg dark:hover:shadow-nord-8/20 active:scale-95"> <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"> <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path> <circle cx="12" cy="7" r="4"></circle> </svg> </a> <h1 class="text-xl font-bold truncate"> <a href="/" class="text-nord-2 dark:text-nord-6 hover:text-nord-10 dark:hover:text-nord-8 transition-colors"> Liu </a> </h1> </div> <div class="flex items-center gap-2 shrink-0"> <a href="https://github.com/gh-liu" title="GitHub" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex active:scale-95"> <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-label="GitHub"> <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path> </svg> </a> <a href="https://x.com" title="X" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex active:scale-95"> <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-label="X"> <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24h-6.657l-5.207-6.807-5.975 6.807H2.306l7.644-8.74-8.179-10.76h6.467l4.713 6.231 5.429-6.231zM17.002 18.807h1.844L6.983 4.126H5.025l11.977 14.681z"></path> </svg> </a> <span class="w-px h-4 bg-nord-4 dark:bg-nord-2 shrink-0" aria-hidden="true"></span> <div class="relative series-dropdown" id="series-dropdown-root"> <a href="/notes/series" title="Series" aria-expanded="false" aria-haspopup="true" aria-controls="series-dropdown-panel" id="series-dropdown-trigger" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex active:scale-95"> <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M4 6h16M4 12h16M4 18h16"></path> </svg> </a> <div id="series-dropdown-panel" class="absolute right-0 top-full mt-1 py-2 min-w-[12rem] max-h-[70vh] overflow-y-auto rounded-lg border border-nord-4 dark:border-nord-2 bg-nord-6 dark:bg-nord-1 shadow-lg z-50 hidden" role="menu"> <div id="series-dropdown-list" class="py-1"> <span class="block px-3 py-2 text-xs text-nord-4 dark:text-nord-3">åŠ è½½ä¸­â€¦</span> </div> <div class="border-t border-nord-4 dark:border-nord-2 pt-1 mt-1"> <a href="/notes/series" class="block px-3 py-2 text-sm text-nord-9 dark:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-2 transition-colors">
æŸ¥çœ‹å…¨éƒ¨ç³»åˆ— â†’
</a> </div> </div> </div> <div class="relative tags-dropdown" id="tags-dropdown-root"> <a href="/notes/tags" title="Tags" aria-expanded="false" aria-haspopup="true" aria-controls="tags-dropdown-panel" id="tags-dropdown-trigger" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex active:scale-95"> <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M5 3h14v17L12 17l-7 3V3z"></path> </svg> </a> <div id="tags-dropdown-panel" class="absolute right-0 top-full mt-1 py-2 min-w-[12rem] max-h-[70vh] overflow-y-auto rounded-lg border border-nord-4 dark:border-nord-2 bg-nord-6 dark:bg-nord-1 shadow-lg z-50 hidden" role="menu"> <div id="tags-dropdown-list" class="py-1"> <span class="block px-3 py-2 text-xs text-nord-4 dark:text-nord-3">åŠ è½½ä¸­â€¦</span> </div> <div class="border-t border-nord-4 dark:border-nord-2 pt-1 mt-1"> <a href="/notes/tags" class="block px-3 py-2 text-sm text-nord-9 dark:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-2 transition-colors">
æŸ¥çœ‹å…¨éƒ¨æ ‡ç­¾ â†’
</a> </div> </div> </div> <div class="search-container" id="search-wrapper" data-astro-cid-t47yvtpn><button id="search-toggle" class="p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-2 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 transition-all duration-300 ease-out hover:scale-110 hover:shadow-md dark:hover:shadow-md dark:hover:shadow-nord-8/15 inline-flex" aria-label="Search notes" title="Search (âŒ˜K)" data-astro-cid-t47yvtpn><svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-t47yvtpn><circle cx="11" cy="11" r="8" data-astro-cid-t47yvtpn></circle><path d="m21 21-4.35-4.35" data-astro-cid-t47yvtpn></path></svg></button><div id="search-modal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 flex items-start justify-center pt-20 backdrop-blur-sm" data-astro-cid-t47yvtpn><div class="bg-nord-6 dark:bg-nord-0 rounded-2xl shadow-2xl w-full max-w-2xl border border-nord-5 dark:border-nord-1 max-h-[70vh] flex flex-col overflow-hidden animate-fade-in" data-astro-cid-t47yvtpn><div class="p-4 border-b border-nord-5 dark:border-nord-1" data-astro-cid-t47yvtpn><input type="search" id="search-input" placeholder="Search notes... (use #tag for tag search)" class="w-full px-4 py-2 bg-nord-5 dark:bg-nord-1 text-nord-2 dark:text-nord-6 placeholder-nord-3 dark:placeholder-nord-4 rounded focus:outline-none focus:ring-2 focus:ring-nord-9 dark:focus:ring-nord-8" autocomplete="off" data-astro-cid-t47yvtpn></div><div id="search-results" class="flex-1 overflow-y-auto p-4" data-astro-cid-t47yvtpn><p class="text-nord-3 dark:text-nord-5 text-sm" data-astro-cid-t47yvtpn>Type to search...</p></div><div class="p-3 border-t border-nord-5 dark:border-nord-1 text-xs text-nord-3 dark:text-nord-4" data-astro-cid-t47yvtpn><p data-astro-cid-t47yvtpn>Press <kbd class="px-1 py-0.5 bg-nord-4 dark:bg-nord-2 rounded" data-astro-cid-t47yvtpn>Esc</kbd> to close | Use <kbd class="px-1 py-0.5 bg-nord-4 dark:bg-nord-2 rounded" data-astro-cid-t47yvtpn>#tag</kbd> to search by tag</p></div></div></div></div><script>(function(){const pagefindUrl = "/pagefind/pagefind.js";

  if (!globalThis.pagefindLoaded) {
    globalThis.pagefindLoaded = true;
    
    let pagefind;
    let searchInput;
    let searchModal;
    let searchResults;
    let isSearchOpen = false;

    async function initSearch() {
      if (typeof window === "undefined") return;

      try {
        pagefind = await import(pagefindUrl);
        await pagefind.init();
      } catch (error) {
        console.log("Search not available.", error);
        return;
      }

      searchInput = document.getElementById("search-input");
      searchModal = document.getElementById("search-modal");
      searchResults = document.getElementById("search-results");
      const toggleBtn = document.getElementById("search-toggle");

      if (!searchInput || !searchModal || !searchResults || !toggleBtn) return;

      toggleBtn.addEventListener("click", () => {
        openSearch();
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeSearch();
        }
        if ((e.metaKey || e.ctrlKey) && e.key === "k") {
          e.preventDefault();
          isSearchOpen ? closeSearch() : openSearch();
        }
      });

      searchModal.addEventListener("click", (e) => {
        if (e.target === searchModal) closeSearch();
      });

      searchInput.addEventListener("input", async (e) => {
        const query = e.target.value.trim();
        if (!query) {
          searchResults.innerHTML = '<p class="text-nord-3 dark:text-nord-5 text-sm">Type to search...</p>';
          return;
        }

        // Check if query starts with #tag
        const isTagSearch = query.startsWith('#');
        let results;
        
        if (isTagSearch) {
          // Tag search
          const tag = query.slice(1).toUpperCase();
          results = await pagefind.search(`tag:${tag}`);
        } else {
          // Regular text search
          results = await pagefind.search(query);
        }

        if (results.results.length === 0) {
          searchResults.innerHTML = '<p class="text-nord-3 dark:text-nord-5 text-sm">No results found.</p>';
          return;
        }

        let html = '<ul class="space-y-2">';
        for (const result of results.results) {
          const data = await result.data();
          // Extract title from h1 or use URL slug as fallback
          const title = data.meta?.title || data.title || (data.url.split('/').pop() || 'untitled').replace(/-/g, ' ');
          html += `<li><a href="${data.url}" class="block p-3 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-2 text-nord-9 dark:text-nord-8 hover:text-nord-10 dark:hover:text-nord-7 transition-all hover:shadow-md duration-200 border border-transparent hover:border-nord-9 dark:hover:border-nord-8"><div class="font-medium">${title}</div><div class="text-xs text-nord-3 dark:text-nord-5 mt-1 line-clamp-2">${data.excerpt || ""}</div></a></li>`;
        }
        searchResults.innerHTML = html + "</ul>";
      });
    }

    function openSearch() {
      isSearchOpen = true;
      searchModal.classList.remove("hidden");
      searchInput.focus();
      document.body.style.overflow = "hidden";
    }

    function closeSearch() {
      isSearchOpen = false;
      searchModal.classList.add("hidden");
      searchInput.value = "";
      searchResults.innerHTML = '<p class="text-nord-3 dark:text-nord-5 text-sm">Type to search...</p>';
      document.body.style.overflow = "";
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", initSearch);
    } else {
      initSearch();
    }
  }
})();</script> <button id="theme-toggle" aria-label="Toggle theme" title="Toggle theme" class="group relative p-2 rounded-lg hover:bg-nord-5 dark:hover:bg-nord-1 text-nord-3 dark:text-nord-4 transition-all duration-200 ease-out hover:scale-110 inline-flex"> <span class="inline-block transition-transform duration-200 ease-out group-hover:rotate-12"> <svg id="sun-icon" class="w-4 h-4 text-nord-13 hidden dark:block" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line> </svg> <svg id="moon-icon" class="w-4 h-4 text-nord-9 block dark:hidden" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path> </svg> </span> </button> <script>
  const THEME_KEY = 'nord-theme';
  const DARK = 'dark';
  
  function getStoredTheme() {
    return localStorage.getItem(THEME_KEY);
  }
  
  function getSystemTheme() {
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? DARK : 'light';
  }
  
  function getTheme() {
    return getStoredTheme() || getSystemTheme();
  }
  
  function applyTheme(theme) {
    const html = document.documentElement;
    if (theme === DARK) {
      html.classList.add('dark');
    } else {
      html.classList.remove('dark');
    }
  }
  
  function toggleTheme() {
    const currentTheme = getTheme();
    const newTheme = currentTheme === DARK ? 'light' : DARK;
    localStorage.setItem(THEME_KEY, newTheme);
    applyTheme(newTheme);
  }
  
  const themeToggle = document.getElementById('theme-toggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', toggleTheme);
  }
</script> </div> </nav> </header> <main class="max-w-4xl mx-auto px-4 py-12" data-pagefind-body> <aside id="toc-sidebar" class="fixed left-0 top-0 h-screen w-56 bg-nord-6 dark:bg-nord-0 border-r border-nord-5 dark:border-nord-1 overflow-y-auto overflow-x-hidden pt-4 pb-4 transition-transform duration-300 -translate-x-full z-50" data-astro-cid-vrmg3htk> <nav class="px-4 space-y-1" data-astro-cid-vrmg3htk> <!-- Close button --> <button id="toc-close" class="flex justify-end w-full mb-4 p-2 text-nord-2 dark:text-nord-6 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors" aria-label="Close navigation" data-astro-cid-vrmg3htk> <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-vrmg3htk> <path d="M18 6L6 18M6 6l12 12" data-astro-cid-vrmg3htk></path> </svg> </button> <h3 class="text-xs font-bold text-nord-2 dark:text-nord-6 uppercase tracking-widest px-2 py-3 border-b border-nord-5 dark:border-nord-1" data-astro-cid-vrmg3htk>
On this page
</h3> <ul class="space-y-0.5 text-sm mt-4" data-astro-cid-vrmg3htk> <li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#001--golang" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.0.1 Â· golang </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#002--benbjohnson" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.0.2 Â· benbjohnson </a> </li><li class="toc-item pl-4" data-astro-cid-vrmg3htk> <a href="#003--uber" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="3" data-astro-cid-vrmg3htk> 0.0.3 Â· uber </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#01--æŒ‡å¯¼ç¯‡" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 0.1 Â· æŒ‡å¯¼ç¯‡ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#02--æ€§èƒ½ç¯‡" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 0.2 Â· æ€§èƒ½ç¯‡ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#03--é£æ ¼ç¯‡" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 0.3 Â· é£æ ¼ç¯‡ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#04--æ¨¡å¼ç¯‡" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 0.4 Â· æ¨¡å¼ç¯‡ </a> </li><li class="toc-item pl-0" data-astro-cid-vrmg3htk> <a href="#05--linting" class="block py-1.5 px-2 text-nord-3 dark:text-nord-5 hover:text-nord-9 dark:hover:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-1 rounded transition-colors truncate" data-depth="2" data-astro-cid-vrmg3htk> 0.5 Â· linting </a> </li> </ul> </nav> </aside> <!-- Toggle button - fixed at left edge --> <button id="toc-toggle" class="fixed left-0 top-4 p-3 rounded-r-lg bg-nord-9 dark:bg-nord-8 text-nord-6 dark:text-nord-0 hover:bg-nord-10 dark:hover:bg-nord-7 hover:text-nord-6 dark:hover:text-nord-0 transition-colors shadow-lg z-40" aria-label="Toggle sidebar" title="Toggle sidebar (â† â†’)" data-astro-cid-vrmg3htk> <svg id="toggle-icon" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-vrmg3htk> <path d="M4 6h16M4 12h16M4 18h16" data-astro-cid-vrmg3htk></path> </svg> </button> <script>
  const TOC_KEY = 'toc-open';
  const sidebar = document.getElementById('toc-sidebar');
  const toggle = document.getElementById('toc-toggle');
  const closeBtn = document.getElementById('toc-close');

  function getSidebarState() {
    return localStorage.getItem(TOC_KEY) !== 'false';
  }

  function setSidebarState(open) {
    localStorage.setItem(TOC_KEY, open ? 'true' : 'false');
  }

  function updateSidebar() {
    const isOpen = getSidebarState();
    if (sidebar) {
      if (isOpen) {
        sidebar.classList.remove('-translate-x-full');
      } else {
        sidebar.classList.add('-translate-x-full');
      }
    }
  }

  function toggleSidebar() {
    const isOpen = getSidebarState();
    setSidebarState(!isOpen);
    updateSidebar();
  }

  // Initialize
  updateSidebar();

  // Event listeners
  if (toggle) {
    toggle.addEventListener('click', toggleSidebar);
  }

  if (closeBtn) {
    closeBtn.addEventListener('click', toggleSidebar);
  }

  // Keyboard shortcut: left/right arrow to toggle
  document.addEventListener('keydown', (e) => {
    if ((e.key === 'ArrowLeft' || e.key === 'ArrowRight') && e.ctrlKey) {
      e.preventDefault();
      toggleSidebar();
    }
  });

  // Highlight current section on scroll
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          document.querySelectorAll('.toc-item a').forEach((link) => {
            link.classList.remove('text-nord-9', 'dark:text-nord-8', 'font-semibold', 'bg-nord-5', 'dark:bg-nord-1');
            link.classList.add('text-nord-3', 'dark:text-nord-4');
          });
          const activeLink = document.querySelector(
            `.toc-item a[href="#${entry.target.id}"]`
          );
          if (activeLink) {
            activeLink.classList.remove('text-nord-3', 'dark:text-nord-4');
            activeLink.classList.add('text-nord-9', 'dark:text-nord-8', 'font-semibold', 'bg-nord-5', 'dark:bg-nord-1');
          }
        }
      });
    },
    { rootMargin: '-50% 0px -50% 0px' }
  );

  document.querySelectorAll('h2, h3').forEach((heading) => {
    if (heading.id) {
      observer.observe(heading);
    }
  });

  // Close sidebar on link click
  document.querySelectorAll('.toc-item a').forEach((link) => {
    link.addEventListener('click', () => {
      setSidebarState(false);
      updateSidebar();
    });
  });
</script>  <article class="prose prose-nord dark:prose-nord max-w-none
      prose-headings:font-serif
      prose-code:before:content-none prose-code:after:content-none" data-astro-cid-v5yihett> <header class="mb-8" data-astro-cid-v5yihett> <h1 class="mb-3" data-pagefind-meta="title" data-astro-cid-v5yihett>style-guide</h1> <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4" data-astro-cid-v5yihett> <div class="text-sm text-nord-3 dark:text-nord-5" data-astro-cid-v5yihett> <div> <div class="flex flex-wrap gap-2 mb-2"> <span class="inline-flex items-center gap-1 px-2.5 py-1 text-xs bg-nord-7 dark:bg-nord-7 text-nord-0 dark:text-nord-0 rounded font-medium"> <span>ğŸ“…</span> <span>2026-02-05</span> </span> <span class="inline-flex items-center gap-1 px-2.5 py-1 text-xs bg-nord-8 dark:bg-nord-8 text-nord-0 dark:text-nord-0 rounded font-medium"> <span>âœï¸</span> <span>2026-02-05</span> </span>  <div class="flex flex-wrap gap-2"> <a href="/notes/tag/CS" class="inline-flex items-center gap-1 px-2.5 sm:px-3 py-1.5 sm:py-1 text-xs sm:text-xs font-semibold rounded bg-nord-6 dark:bg-nord-2/60 shadow-sm dark:shadow-md transition-all duration-200 ease-out hover:shadow-md dark:hover:shadow-lg hover:translate-y-[-1px] tag-text-blue-light dark:tag-text-blue-dark !no-underline hover:!no-underline" title="Tag: CS"> <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M5 3h14v17L12 17l-7 3V3z"></path> </svg> <span>CS</span>  </a><a href="/notes/tag/GO" class="inline-flex items-center gap-1 px-2.5 sm:px-3 py-1.5 sm:py-1 text-xs sm:text-xs font-semibold rounded bg-nord-6 dark:bg-nord-2/60 shadow-sm dark:shadow-md transition-all duration-200 ease-out hover:shadow-md dark:hover:shadow-lg hover:translate-y-[-1px] tag-text-blue-light dark:tag-text-blue-dark !no-underline hover:!no-underline" title="Tag: GO"> <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M5 3h14v17L12 17l-7 3V3z"></path> </svg> <span>GO</span>  </a> </div> </div> </div> </div> <div class="text-sm" data-astro-cid-v5yihett> <div> <div class="flex items-center gap-4"> <!-- Back to notes link - removed, now in footer --> <!-- Show only links and backlinks stats --> <!-- Outlinks -->  <!-- Backlinks -->  <!-- No links message --> <span class="text-nord-3 dark:text-nord-4 italic">No related notes</span> </div> <!-- Modals --> <div id="outlinks-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"> <div class="bg-nord-6 dark:bg-nord-0 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-nord-5 dark:border-nord-1"> <!-- Header --> <div class="sticky top-0 bg-nord-6 dark:bg-nord-0 border-b border-nord-5 dark:border-nord-1 px-6 py-4 flex items-center justify-between"> <h2 class="text-lg font-semibold text-nord-2 dark:text-nord-6"> Outlinks <span class="text-sm font-normal text-nord-3 dark:text-nord-5 ml-2">
(0)
</span> </h2> <button class="close-modal p-1 text-nord-3 dark:text-nord-4 hover:bg-nord-5 dark:hover:bg-nord-1 hover:text-nord-2 dark:hover:text-nord-5 rounded transition-colors" aria-label="Close modal"> <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M18 6L6 18M6 6l12 12"></path> </svg> </button> </div> <!-- Content --> <div class="p-6"> <p class="text-nord-3 dark:text-nord-5 text-center py-8">
No outlinks found
</p> </div> </div> </div> <script>(function(){const modalId = "outlinks-modal";
const type = "outlinks";

  const modal = document.getElementById(modalId);
  const closeButtons = modal ? modal.querySelectorAll('.close-modal') : [];

  // Create camelCase function name: "backlinks" -> "openBacklinksModal"
  const functionName = `open${type.charAt(0).toUpperCase() + type.slice(1)}Modal`;

  // Open modal
  window[functionName] = function() {
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
  };

  // Close modal
  function closeModal() {
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  }

  // Close button listeners
  closeButtons.forEach((btn) => {
    btn.addEventListener('click', closeModal);
  });

  // Close on background click
  if (modal) {
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        closeModal();
      }
    });
  }

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeModal();
    }
  });
})();</script> <div id="backlinks-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"> <div class="bg-nord-6 dark:bg-nord-0 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-nord-5 dark:border-nord-1"> <!-- Header --> <div class="sticky top-0 bg-nord-6 dark:bg-nord-0 border-b border-nord-5 dark:border-nord-1 px-6 py-4 flex items-center justify-between"> <h2 class="text-lg font-semibold text-nord-2 dark:text-nord-6"> Backlinks <span class="text-sm font-normal text-nord-3 dark:text-nord-5 ml-2">
(0)
</span> </h2> <button class="close-modal p-1 text-nord-3 dark:text-nord-4 hover:bg-nord-5 dark:hover:bg-nord-1 hover:text-nord-2 dark:hover:text-nord-5 rounded transition-colors" aria-label="Close modal"> <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M18 6L6 18M6 6l12 12"></path> </svg> </button> </div> <!-- Content --> <div class="p-6"> <p class="text-nord-3 dark:text-nord-5 text-center py-8">
No backlinks found
</p> </div> </div> </div> <script>(function(){const modalId = "backlinks-modal";
const type = "backlinks";

  const modal = document.getElementById(modalId);
  const closeButtons = modal ? modal.querySelectorAll('.close-modal') : [];

  // Create camelCase function name: "backlinks" -> "openBacklinksModal"
  const functionName = `open${type.charAt(0).toUpperCase() + type.slice(1)}Modal`;

  // Open modal
  window[functionName] = function() {
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
  };

  // Close modal
  function closeModal() {
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  }

  // Close button listeners
  closeButtons.forEach((btn) => {
    btn.addEventListener('click', closeModal);
  });

  // Close on background click
  if (modal) {
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        closeModal();
      }
    });
  }

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeModal();
    }
  });
})();</script> <script>
  // Outlinks button - calls window.openOutlinksModal()
  document.querySelectorAll('.open-outlinks-btn').forEach((btn) => {
    btn.addEventListener('click', () => {
      if (window.openOutlinksModal) {
        window.openOutlinksModal();
      }
    });
  });

  // Backlinks button - calls window.openBacklinksModal()
  document.querySelectorAll('.open-backlinks-btn').forEach((btn) => {
    btn.addEventListener('click', () => {
      if (window.openBacklinksModal) {
        window.openBacklinksModal();
      }
    });
  });
</script> </div> </div> </div> </header>    <h3 id="001--golang">0.0.1 Â· golang</h3>
<p><a href="https://github.com/golang/go/wiki/CodeReviewComments#go-code-review-comments">https://github.com/golang/go/wiki/CodeReviewComments#go-code-review-comments</a>
<a href="https://github.com/golang/go/wiki/CommonMistakes">https://github.com/golang/go/wiki/CommonMistakes</a>
<a href="https://go.dev/doc/effective_go#errors">https://go.dev/doc/effective_go#errors</a></p>
<h3 id="002--benbjohnson">0.0.2 Â· benbjohnson</h3>
<p><a href="https://medium.com/@benbjohnson/structuring-applications-in-go-3b04be4ff091">https://medium.com/@benbjohnson/structuring-applications-in-go-3b04be4ff091</a></p>
<h3 id="003--uber">0.0.3 Â· uber</h3>
<p><a href="https://github.com/uber-go/guide/blob/master/style.md">https://github.com/uber-go/guide/blob/master/style.md</a></p>
<h4 id="0031--æŒ‡å—">0.0.3.1 Â· æŒ‡å—</h4>
<p>æŒ‡å‘æ¥å£çš„æŒ‡é’ˆï¼šä¸€èˆ¬ç›´æ¥ä¼ å€¼ï¼›å®ç°æ¥å£æ–¹æ³•æ—¶ï¼Œä½¿ç”¨æŒ‡é’ˆå¯ä»¥ä¿®æ”¹åº•å±‚æ•°æ®</p>
<p>éªŒè¯æ¥å£çš„åˆç†æ€§ï¼šæ¥å£ä½“æŒ‡é’ˆå®ç°äº†æ¥å£æ–¹æ³• â€” var _ æ¥å£ = (*æ¥å£ä½“)nil æˆ–è€… ç»“æ„ä½“å†…åµŒæ¥å£ â€” var _ æ¥å£ = æ¥å£ä½“{}
æ¥æ”¶è€…ä¸æ¥å£ï¼šæŒ‡é’ˆæ¥æ”¶è€…ä¸å€¼æ¥æ”¶è€…
mutexçš„0å€¼æ˜¯æœ‰æ•ˆçš„ï¼šå¯ä»¥ç›´æ¥ var mu sync.Mutex ; mu.Lock() ,å¯ä»¥ç»“æ„ä½“å†…åµŒmutexç›´æ¥ä½¿ç”¨ï¼ˆä¸å¯å¯¼å‡ºçš„ç»“æ„ä½“ï¼‰ï¼Œæˆ–è€…ç”³æ˜ä¸ºç»“æ„ä½“çš„ä¸€ä¸ªå­—æ®µï¼ˆå¯å¯¼å‡ºç»“æ„ä½“ï¼Œå°†mutexç”³æ˜ä¸ºç§æœ‰ï¼‰
åœ¨è¾¹ç•Œå¤„å¤åˆ¶sliceå’Œmapï¼šsliceå’Œmapæœ‰æŒ‡å‘åº•å±‚æ•°æ®çš„æŒ‡é’ˆï¼Œå¤åˆ¶ã€è¿”å›æ—¶ï¼Œéœ€è¦æ–°å»ºä¸€ä¸ªsliceæˆ–è€…mapï¼Œé‡æ–°å¤åˆ¶å…¶ä¸­çš„æ•°æ®ã€‚
deferå’Œæ¸…ç†ï¼šä½¿ç”¨deferæ¸…ç†èµ„æºï¼Œä¾‹å¦‚é”ã€æ–‡ä»¶ç­‰
channelçš„å¤§å°è®¾ç½®ä¸º1(buffered)æˆ–è€…ä¸è®¾ç½®(unbuffered)ï¼š
æšä¸¾ä»1å¼€å§‹ï¼š iota+1 ï¼Œå½“0è¢«è§†ä½œé»˜è®¤è¡Œä¸ºçš„æ—¶å€™ï¼Œå¯ä»¥ä»0å¼€å§‹
ä½¿ç”¨timeåŒ…å¤„ç†æ—¶é—´ï¼štime.Timeè¡¨ç¤ºæ—¶é—´å®ä¾‹ï¼Œtime.Durationè¡¨ç¤ºä¸€ä¸ªæ—¶é—´æ®µï¼›timeåŒ…æ²¡æœ‰è€ƒè™‘åˆ°é—°ç§’ï¼ˆleap secondï¼‰
é”™è¯¯ç±»å‹ï¼šç”³æ˜é”™è¯¯çš„ä¸åŒé€‰æ‹©1. errors.New ç®€å•é”™è¯¯ï¼Œæ— é¢å¤–ä¿¡æ¯ 2. fmt.Errorf 3. è‡ªå®šä¹‰ç±»å‹å®è¡Œerroræ¥å£çš„Error()æ–¹æ³•  å®¢æˆ·ç«¯å‘ç°ä¸”å¤„ç†é”™è¯¯ 4. â€œpkg/errorsâ€.Wrap ä¼ æ’­ç”±ä¸‹æ¸¸å‡½æ•°è¿”å›çš„é”™è¯¯  ï¼› æ³¨æ„ç›´æ¥æš´éœ²è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹ç»“æ„ä½“ï¼Œåº”è¯¥ä½¿ç”¨ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå»è®¾ç½®é”™è¯¯ã€åˆ¤æ–­é”™è¯¯
åŒ…è£…é”™è¯¯ï¼šå¦‚æœè°ƒç”¨å‡½æ•°å¤±è´¥ï¼Œä¸»è¦æœ‰ä¸‰ç§ä¼ æ’­é”™è¯¯çš„é€‰æ‹©ï¼š1. åœ¨ä¸éœ€è¦æ·»åŠ ç‰¹å®šä¸Šä¸‹æ–‡ä¿¡æ¯ä¸”ä¿è¯åŸé”™è¯¯çš„æƒ…å†µä¸‹ï¼Œè¿”å›åŸé”™è¯¯ 2. ä½¿ç”¨â€pkg/errorsâ€.Wrap åŒ…è£…ä¸Šä¸‹æ–‡ï¼Œå› æ­¤å¯ä»¥æä¾›æ›´å¤šä¿¡æ¯ï¼Œä¸”ä½¿ç”¨ â€œpkg/errorsâ€.Causeå¯ä»¥æ‹¿åˆ°åŸé”™è¯¯ 3.  å¦‚æœè°ƒç”¨è€…ä¸éœ€è¦å‘ç°ä¸å¤„ç†é”™è¯¯ï¼Œä½¿ç”¨fmt.Errorf   ï¼›æ¨èå°½å¯èƒ½çš„æ·»åŠ ä¸Šä¸‹æ–‡è€Œä¸æ˜¯ä½¿ç”¨ä¸è¯¦ç»†çš„é”™è¯¯ï¼Œåœ¨æ·»åŠ ä¸Šä¸‹æ–‡çš„æ—¶å€™ï¼Œä¿è¯è¨€ç®€æ„èµ…
å¤„ç†<code>ç±»å‹æ–­è¨€</code>å¤±è´¥ï¼šä½¿ç”¨common-okæ–¹å¼æ¥æ”¶æ–­è¨€çš„è¿”å›å€¼ï¼›è€Œä¸æ˜¯ä½¿ç”¨è¿”å›å€¼ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸å‡†ç¡®çš„ç±»å‹ä¼šå¯¼è‡´panic
ä¸è¦panicï¼šè¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„ä»£ç åº”è¯¥é¿å…panicï¼Œpanicæ˜¯çº§è”æ•…éšœçš„ä¸€ä¸ªä¸»è¦åŸå› ï¼›å¦‚æœä¸€ä¸ªé”™è¯¯å‘ç”Ÿäº†ï¼Œåº”è¯¥è¿”å›è¿™ä¸ªé”™è¯¯ç»™è°ƒç”¨è€…ï¼Œè®©å…¶å†³å®šå¦‚ä½•å¤„ç†è¿™ä¸ªé”™è¯¯ï¼›panic/recoverä¸æ˜¯ä¸€ä¸ªå¤„ç†é”™è¯¯çš„ç­–ç•¥ï¼šä¸€ä¸ªç¨‹åºåªæœ‰åœ¨å‘ç”Ÿä¸å¯æ¢å¤çš„é”™è¯¯ä¸‹æ‰å¿…é¡»panicï¼Œæ¯”å¦‚ä¸€ä¸ªå¯¹nilè§£å¼•ç”¨ï¼›ç¨‹åºåˆå§‹åŒ–æ˜¯ä¸€ä¸ªæ„å¤–ï¼Œåœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œä¸å¥½çš„ä¸œè¥¿å¯èƒ½ä¼šæ‰“æ–­ç¨‹åºä»è€Œå¯èƒ½é€ æˆpanicï¼›ç”šè‡³åœ¨testä¸­ï¼Œä½¿ç”¨t.Fatal æˆ–è€…t.FailNow æ›¿ä»£panicç¡®ä¿testè¢«æ ‡è®°ä¸ºfailedï¼›
ä½¿ç”¨ go.uber.org/atomicï¼šsync/stomicåŒ…ä½¿ç”¨åŸç”Ÿç±»å‹è¿›è¡Œæ“ä½œï¼Œè¿™å¾ˆå®¹æ˜“å¿˜è®°ä½¿ç”¨atomicæ“ä½œè¯»å–æˆ–è€…ä¿®æ”¹ä¸€ä¸ªå˜é‡ï¼Œuberçš„atomicåŒ…éšè—äº†åº•å±‚ç±»å‹ï¼Œå°è£…äº†ä¸€äº›å®‰å…¨çš„ç±»å‹ï¼›
é¿å…å¯å˜çš„å…¨å±€å˜é‡ï¼šé¿å…å¯å˜çš„å…¨å±€å˜é‡ï¼Œè€Œæ˜¯é€‰æ‹©ä¾èµ–æ³¨å…¥
é¿å…åœ¨å¯å¯¼å‡ºçš„ç±»å‹ä¸­å†…åµŒç±»å‹ï¼šå†…åµŒçš„ç±»å‹ç¼ºå¤±äº†å®ç°çš„ç»†èŠ‚ï¼Œé˜»ç¢ç±»å‹çš„æ¼”å˜ï¼Œå¹¶ä¸”æ¨¡ç³Šäº†æ–‡æ¡£ï¼›goå…è®¸å†…åµŒä½œä¸ºç»„åˆå’Œç»§æ‰¿çš„æŠ˜ä¸­æ–¹æ³•ï¼Œå¤–å±‚ç±»å‹éšå¼å¤åˆ¶äº†å†…åµŒç±»å‹çš„æ–¹æ³•ï¼Œè¿™äº›å¤åˆ¶çš„æ–¹æ³•ï¼Œé»˜è®¤å§”æ‰˜ç»™äº†å†…åµŒç±»å‹çš„å®ä¾‹çš„æ–¹æ³•ï¼›å¤–å±‚çš„è¿™ä¸ªç»“æ„ä½“åŒæ—¶è·å¾—å’Œå†…åµŒç±»å‹åç§°ç›¸åŒçš„å­—æ®µï¼Œå¦‚æœå†…åµŒç±»å‹æ˜¯å¯å¯¼å‡ºçš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µä¹Ÿæ˜¯å¯å¯¼å‡ºçš„ï¼›ä¸ºäº†ä¿æŒå‘åå…¼å®¹æ€§ï¼Œå¤–å±‚ç±»å‹çš„æœªæ¥ç‰ˆæœ¬å¿…é¡»ä¿æŒè¿™ä¸ªå†…åµŒçš„ç±»å‹ï¼›å†…åµŒç±»å‹å¾ˆå°‘æ˜¯å¿…é¡»çš„ï¼›å¾ˆæ–¹ä¾¿å¸®åŠ©æˆ‘ä»¬é¿å…å•°å—¦çš„å§”æ‰˜æ–¹æ³•ï¼›å†…åµŒä¸€ä¸ªå¯å…¼å®¹çš„æ¥å£æä¾›ç»™å¼€å‘è€…æ›´å¤šçš„çµæ´»æ€§ï¼Œä½†æ˜¯ä¾æ—§ç¼ºå¤±äº† å…·ä½“ç±»å‹ä½¿ç”¨æŠ½è±¡å®ç°çš„ç»†èŠ‚ï¼›å†…åµŒç»“æ„ä½“æˆ–è€…æ¥å£éƒ½é™åˆ¶äº†å¤–å±‚ç±»å‹çš„æ¼”å˜ï¼š*æ·»åŠ æ–¹æ³•åˆ°å†…åµŒæ¥å£æ˜¯ä¸€ä¸ªé‡å¤§æ”¹å˜ *ä»ä¸€ä¸ªå†…åµŒç»“æ„ä½“ç§»é™¤æ–¹æ³•æ˜¯ä¸€ä¸ªé‡å¤§æ”¹å˜ *ç§»é™¤å†…åµŒç±»å‹æ˜¯ä¸€ä¸ªé‡å¤§æ”¹å˜ *æ›¿æ¢å†…åµŒçš„ç±»å‹ï¼Œå³ä½¿ä½¿ç”¨æ»¡è¶³æ¥å£çš„å¯æ›¿ä»£ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªé‡å¤§æ”¹å˜ï¼›
å°½ç®¡å†™è¿™äº›å§”æ‰˜çš„æ–¹æ³•æ˜¯å¾ˆå•°å—¦çš„ï¼Œè¿™ä¸ªé¢å¤–åŠªåŠ›éšè—äº†å®ç°çš„ç»†èŠ‚ï¼Œä¹Ÿæä¾›äº†å¯ä»¥æ”¹å˜çš„æœºä¼šï¼Œå¹¶ä¸”æ¶ˆé™¤äº†ä¸ºäº†å‘ç°å®Œå…¨åˆ—è¡¨çš„é—´æ¥æ€§ï¼›
é¿å…ä½¿ç”¨build-in çš„åå­—ï¼š
é¿å…init():å¯èƒ½çš„è¯ï¼Œé¿å…init();å½“ä¸å¯é¿å…æˆ–è€…å¿…éœ€çš„æ—¶å€™ï¼Œä»£ç åº”è¯¥æ˜¯ï¼š*å®Œå…¨ç¡®å®šçš„ï¼Œä¸ç¨‹åºçš„ç¯å¢ƒä¸è°ƒç”¨æ— å…³ *é¿å…ä¾èµ–æœ‰åºæˆ–è€…å…¶ä»–init()å‡½æ•°çš„å‰¯ä½œç”¨ *é¿å…æ“ä½œå…¨å±€çš„ æˆ–è€…ç¯å¢ƒå˜é‡ *é¿å…I/Oï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œã€ç³»ç»Ÿè°ƒç”¨ ; init()æ›´å¥½æˆ–è€…å¿…é¡»çš„åœºæ™¯ï¼š*å¤åˆ¶çš„è¡¨è¾¾å¼ï¼Œä¸èƒ½ä½¿ç”¨å•èµ‹å€¼è¯­å¥è¡¨ç¤º *å¯æ‹”æ’çš„hooks *ç¡®å®šçš„æå‰è®¡ç®—</p>
<h4 id="0032--æ€§èƒ½">0.0.3.2 Â· æ€§èƒ½</h4>
<p>ä½¿ç”¨strcov è€Œä¸æ˜¯fmtï¼š
é¿å…åœ¨å¾ªç¯å†…ï¼Œå¯¹ä¸€ä¸ªå›ºå®šçš„å­—ç¬¦ä¸²è¿›è¡Œè½¬å­—èŠ‚æ•°ç»„æ“ä½œï¼š
æ›´å€¾å‘äºæŒ‡å®šå®¹å™¨å®¹é‡ï¼š</p>
<h4 id="0033--è§„èŒƒ">0.0.3.3 Â· è§„èŒƒ</h4>
<p>ä¸€è‡´æ€§ï¼š
ç›¸ä¼¼ç”³æ˜åˆ†ç»„ï¼š
importåˆ†ç»„é¡ºåºï¼š
åŒ…å‘½åï¼š
å‡½æ•°å‘½å:
importåˆ«åï¼š
å‡½æ•°åˆ†ç»„ä¸æ’åºï¼š
å‡å°‘åµŒå¥—ï¼šä¼˜å…ˆå¤„ç†ç‰¹æ®Šæƒ…å†µå’Œå¤„ç†é”™è¯¯ï¼Œå°½æ—©çš„è¿”å›æˆ–è·³å‡ºå¾ªç¯
ä¸å¿…è¦çš„elseï¼š
é¡¶éƒ¨å˜é‡ç”³æ˜ï¼šé¡¶éƒ¨å˜é‡ä½¿ç”¨var ï¼Œä¸æŒ‡å®šç±»å‹ï¼Œé™¤éå’Œå³è¾¹è¡¨è¾¾å¼è¿”å›çš„ç±»å‹ä¸ä¸€è‡´ï¼›
å°†ä¸å¯å¯¼å‡ºçš„å…¨å±€å˜é‡åŠ ä¸Šå‰ç¼€_ ï¼šä¸å¯å¯¼å‡ºçš„ï¼Œé¡¶éƒ¨çš„var æˆ–è€…const æ·»åŠ ä¸‹åˆ’çº¿_å‰ç¼€ï¼›ç‰¹ä¾‹ï¼Œä¸å¯å¯¼å‡ºçš„é”™è¯¯å€¼ï¼Œä½¿ç”¨errä½œå‰ç¼€ï¼›åŸç†ï¼Œå› ä¸ºé¡¶éƒ¨çš„å…¨å±€å˜é‡æœ‰åŒ…çš„èŒƒå›´ï¼Œä½¿ç”¨æ™®é€šçš„åå­—å¯èƒ½é€ æˆåœ¨å…¶ä»–æ–‡ä»¶æœ‰æ„å¤–çš„é”™è¯¯ä½¿ç”¨ï¼›
å†…åµŒåœ¨ç»“æ„ä½“ä¸­ï¼šå†…åµŒçš„ç±»å‹åº”è¯¥æ”¾åœ¨ç±»å‹å†…éƒ¨å‰é¢éƒ¨åˆ†çš„å­—æ®µä¸­ï¼Œè€Œä¸”ä¸å…¶ä»–çš„æ™®é€šå­—æ®µæœ‰ä¸€ä¸ªåˆ†å‰²è¡Œï¼›å†…åµŒä¸åº”è¯¥ï¼š *çº¯ç²¹ä¸ºäº†å¥½çœ‹æˆ–æ–¹ä¾¿ *ä½¿å¾—å¤–å±‚ç±»å‹æ„é€ æˆ–ä½¿ç”¨èµ·æ¥æ›´éš¾ *å½±å“å¤–å±‚ç±»å‹çš„é›¶å€¼ *ä½¿å¾—å¤–å±‚ç±»å‹æš´éœ²å‡ºä¸ç›¸å¹²çš„å‡½æ•°æˆ–å­—æ®µ *æš´éœ²å‡ºä¸å¯å¯¼å‡ºçš„ç±»å‹ *å½±å“å¤–å±‚ç±»å‹çš„å¤åˆ¶è¯­ä¹‰ *æ”¹å˜å¤–å±‚ç±»å‹çš„çš„APIæˆ–è€…ç±»å‹è¯­ä¹‰ *åµŒå…¥å†…éƒ¨ç±»å‹çš„éè§„èŒƒå½¢å¼ *æš´éœ²å‡ºå¤–å±‚ç±»å‹çš„å®ç°ç»†èŠ‚ *å…è®¸ç”¨æˆ·è§‚å¯Ÿå’Œæ§åˆ¶ç±»å‹å†…éƒ¨ *é€šè¿‡æŸç§åŒ…è£…æ¥æ”¹å˜å†…éƒ¨åŠŸèƒ½çš„ä¸€èˆ¬è¡Œä¸ºï¼Œä½¿ç”¨æˆ·æ„Ÿåˆ°æƒŠè®¶
ä½¿ç”¨å­—æ®µåç§°åˆå§‹åŒ–ç»“æ„ä½“ï¼š
å±€éƒ¨å˜é‡ç”³æ˜ï¼š ä½¿ç”¨çŸ­å˜é‡ç”³æ˜ï¼š=  ï¼ŒæŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼æ›´æ¸…æ™°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ varï¼Œæ¯”å¦‚å£°æ˜ç©ºåˆ‡ç‰‡
nilæ˜¯æœ‰æ•ˆçš„åˆ‡ç‰‡ï¼šé•¿åº¦ä¸º0çš„åˆ‡ç‰‡ï¼Œå¯ä»¥è¿”å›nil ï¼Œåˆ¤æ–­åˆ‡ç‰‡çš„é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä½¿ç”¨len()ï¼Œè€Œä¸ç”¨nilï¼Œåˆ‡ç‰‡çš„é›¶å€¼ï¼ˆä½¿ç”¨varç”³æ˜ï¼‰å¯ä»¥ä¸åœ¨make()åç›´æ¥ä½¿ç”¨  æ³¨æ„ï¼šnilåˆ‡ç‰‡ä¸é•¿åº¦ä¸º0çš„åˆ‡ç‰‡æ˜¯ä¸ç­‰ä»·çš„ï¼ŒæŸäº›æƒ…å†µè¢«ä¸åŒå¯¹å¾…çš„ï¼ˆæ¯”å¦‚åºåˆ—åŒ–ï¼‰
ç¼©å°å˜é‡çš„èŒƒå›´ï¼š ä¼˜å…ˆçº§åœ¨å‡å°‘åµŒå¥—çš„åé¢
é¿å…è£¸éœ²çš„å‚æ•°ï¼šå¤šä¸ªå‚æ•°çš„æ„æ€ä¸æ˜ç¡®çš„æ—¶å€™ï¼Œåœ¨å‡½æ•°è°ƒç”¨å‚æ•°åé¢ä½¿ç”¨/**/æ³¨é‡Šï¼›ä½†æ˜¯ï¼Œä¸ºäº†å¯è¯»æ€§ä¸ç±»å‹å®‰å…¨ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨intçš„åˆ«åï¼Œå®šä¹‰å‡ ä¸ªæšä¸¾
ä½¿ç”¨åŸç”Ÿstringå­—é¢é‡ï¼Œä»è€Œé¿å…è½¬ç§»ï¼š <code>hello"nihao"</code>
åˆå§‹åŒ–ç»“æ„ä½“å¼•ç”¨ï¼š ä½¿ç”¨&#x26;{T}è€Œä¸æ˜¯new(T)
åˆå§‹åŒ–map: å€¾å‘äºä½¿ç”¨make()åˆå§‹åŒ–ç©ºmap,ç„¶åç¨‹åºåŒ–çš„å¡«å……mapï¼›å¦‚æœmapçŸ¥é“äº†å›ºå®šæ•°é‡çš„å…ƒç´ ï¼Œé‚£ä¹ˆä½¿ç”¨å­—é¢é‡åˆå§‹åŒ–
æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼šformatä½¿ç”¨çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨å‡½æ•°å¤–é¢ï¼Œåº”è¯¥ä½¿ç”¨constå›ºå®šï¼Œä¾¿äºgo veté™æ€åˆ†æåˆ°ï¼›
æ‰“å°æ ¼å¼å‡½æ•°çš„å‘½åï¼šä¾¿äºgo vetå‘ç°å¹¶æ£€æµ‹æ ¼å¼åŒ–æ‰€ç”¨çš„å­—ç¬¦ä¸²ï¼Œé»˜è®¤ä½¿ç”¨Printf-æ ¼å¼ï¼Œæˆ–è€…ä»¥fç»“å°¾å‘½åï¼Œä½†æ˜¯éœ€è¦åœ¨govetçš„æ—¶å€™æŒ‡å®šå‡½æ•°åç§°</p>
<h4 id="0034--æ¨¡å¼">0.0.3.4 Â· æ¨¡å¼</h4>
<p>è¡¨æ ¼é©±åŠ¨æµ‹è¯•ï¼š
Functional Optionsï¼š</p>
<h4 id="0035--linting-style-of-go">0.0.3.5 Â· Linting# style of go</h4>
<p><a href="https://github.com/uber-go/guide/blob/master/style.md">style</a></p>
<h2 id="01--æŒ‡å¯¼ç¯‡">0.1 Â· æŒ‡å¯¼ç¯‡</h2>
<p>ä¸éœ€è¦æŒ‡å‘æ¥å£çš„æŒ‡é’ˆï¼šæ¥å£åº•å±‚æ•°æ®æ˜¯ä¸ªæŒ‡é’ˆï¼›
æŒ‡é’ˆç±»å‹å®ç°æ¥å£çš„æ–¹æ³•ï¼Œå¯ä»¥ä¿®æ”¹ç±»å‹æ•°æ®ï¼›</p>
<p>é€‚å½“çš„ï¼Œåœ¨ç¼–è¯‘æœŸï¼ŒéªŒè¯ç±»å‹æ˜¯å¦å®ç°æ¥å£ï¼›</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#616E88">// é›¶å€¼èµ‹å€¼ç»™æŒ‡é’ˆï¼š</span></span>
<span class="line"><span style="color:#616E88">// 1.æŒ‡é’ˆç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1">var</span><span style="color:#D8DEE9"> _</span><span style="color:#D8DEE9FF"> YourInterface </span><span style="color:#81A1C1">=</span><span style="color:#ECEFF4"> (</span><span style="color:#81A1C1">*</span><span style="color:#D8DEE9FF">YourType</span><span style="color:#ECEFF4">)(</span><span style="color:#81A1C1">nil</span><span style="color:#ECEFF4">)</span></span>
<span class="line"><span style="color:#616E88">// 2.éæŒ‡é’ˆç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1">var</span><span style="color:#D8DEE9"> _</span><span style="color:#D8DEE9FF"> YourInterface </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> YourType</span><span style="color:#ECEFF4">{}</span></span></code></pre>
<p>é¿å…å¯¹æ¥å£çš„ä¿®æ”¹ï¼Œå½±å“ç”¨æˆ·ï¼ˆå¯èƒ½ä½¿ç”¨äº†å¯¹åº”ç±»å‹ï¼‰ï¼›</p>
<p>æ–¹æ³•çš„æ¥æ”¶è€…ï¼š<code>æŒ‡é’ˆ</code>å¯ä»¥è°ƒç”¨<code>å€¼</code>ä½œä¸ºæ¥æ”¶è€…çš„æ–¹æ³•ï¼Œåä¹‹ä¸è¡Œï¼›
å®ç°æ¥å£ï¼š<code>æŒ‡é’ˆ</code>ã€<code>å€¼</code>ä½œä¸ºæ¥æ”¶è€…å®ç°æ¥å£ï¼Œåˆ™æŒ‡é’ˆå®ç°æ¥å£ï¼Œè€Œå€¼æœªå®ç°æ¥å£</p>
<p>é›¶å€¼<code>mutex</code>æ˜¯æœ‰æ•ˆçš„ï¼›
ä¸è¦å†…åµŒ<code>mutex</code>ï¼Œæš´éœ²ä¸éœ€è¦çš„æ–¹æ³•ï¼›</p>
<p>å¤åˆ¶<code>slice</code>å’Œ<code>map</code>æ³¨æ„ï¼šä¸¤è€…éƒ½æ˜¯åº•å±‚æ•°æ®å«æŒ‡é’ˆï¼ŒæŒ‡å‘çœŸå®æ•°æ®ï¼›</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#88C0D0">copy</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">dstSlice</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9"> srcSlice</span><span style="color:#ECEFF4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9">newMap</span><span style="color:#81A1C1"> :=</span><span style="color:#88C0D0"> make</span><span style="color:#ECEFF4">(</span><span style="color:#81A1C1">map</span><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9FF">oldMapKeyType</span><span style="color:#ECEFF4">]</span><span style="color:#D8DEE9FF">oldMapValueType</span><span style="color:#ECEFF4">,</span><span style="color:#88C0D0"> len</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">oldMap</span><span style="color:#ECEFF4">))</span></span>
<span class="line"><span style="color:#81A1C1">for</span><span style="color:#D8DEE9"> k</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9"> v</span><span style="color:#81A1C1"> :=</span><span style="color:#81A1C1"> range</span><span style="color:#D8DEE9"> oldMap</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#D8DEE9">    newMap</span><span style="color:#ECEFF4">[</span><span style="color:#D8DEE9">k</span><span style="color:#ECEFF4">]</span><span style="color:#81A1C1"> =</span><span style="color:#D8DEE9"> v</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<p>ä½¿ç”¨<code>defer</code>è¿›è¡Œæ¸…ç†å·¥ä½œï¼›</p>
<p><code>channel</code>çš„å¤§å°åº”è¯¥æ˜¯0æˆ–1ï¼šè®¤çœŸè€ƒè™‘å†³å®š<code>channel</code>å¤§å°çš„åŸå› </p>
<p>æšä¸¾å€¼åº”è¯¥ä»1å¼€å§‹ï¼Œé¿å…0å€¼é—®é¢˜ï¼›</p>
<p>ä½¿ç”¨<code>time</code>åŒ…å¤„ç†æ—¶é—´ï¼š
<code>time.Time</code>è¡¨ç¤ºæ—¶é—´ç‚¹ï¼›
<code>time.Duration</code>è¡¨ç¤ºæ—¶é—´æ®µï¼›
å½“ä½¿ç”¨æ•°å­—è¡¨ç¤ºæ—¶é—´æ—¶ï¼Œå­—æ®µåéœ€è¦åŠ ä¸Šå•ä½ï¼›</p>
<p>é”™è¯¯å˜é‡ã€é”™è¯¯ç±»å‹ï¼š</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#D8DEE9">errors</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">Is</span><span style="color:#ECEFF4">()</span></span>
<span class="line"><span style="color:#D8DEE9">errors</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">As</span><span style="color:#ECEFF4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9">errors</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">New</span><span style="color:#ECEFF4">(</span><span style="color:#ECEFF4">"</span><span style="color:#A3BE8C">err str</span><span style="color:#ECEFF4">"</span><span style="color:#ECEFF4">)</span></span>
<span class="line"><span style="color:#D8DEE9">fmt</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">Errorf</span><span style="color:#ECEFF4">(</span><span style="color:#ECEFF4">"</span><span style="color:#EBCB8B">%w</span><span style="color:#ECEFF4">"</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9">err</span><span style="color:#ECEFF4">)</span></span></code></pre>
<p>åŒ…è£…é”™è¯¯ï¼š</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto;" tabindex="0" data-language="go"><code><span class="line"><span style="color:#616E88">// æ·»åŠ é”™è¯¯ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="color:#D8DEE9">fmt</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">Errorf</span><span style="color:#ECEFF4">(</span><span style="color:#ECEFF4">"</span><span style="color:#EBCB8B">%w</span><span style="color:#ECEFF4">"</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9">err</span><span style="color:#ECEFF4">)</span><span style="color:#616E88"> // é”™è¯¯è¢«åŒ…è£…äº†ï¼Œå¯ä»¥ä½¿ç”¨ errors.Is() å’Œ errors.As()</span></span>
<span class="line"><span style="color:#D8DEE9">fmt</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">Errorf</span><span style="color:#ECEFF4">(</span><span style="color:#ECEFF4">"</span><span style="color:#EBCB8B">%v</span><span style="color:#ECEFF4">"</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9">err</span><span style="color:#ECEFF4">)</span></span></code></pre>
<p>å‘½åé”™è¯¯ï¼šå˜é‡ä»¥Errå¼€å¤´ï¼Œç±»å‹ä»¥Errorç»“å°¾ï¼›
å¤„ç†é”™è¯¯(ä»…å¤„ç†ä¸€æ¬¡)ï¼š</p>
<ul>
<li>ç‰¹å®šé”™è¯¯ï¼Œè¿›è¡ŒåŒ¹é…ï¼Œåˆ†åˆ«å¤„ç†</li>
<li>å¯æ¢å¤é”™è¯¯ï¼Œæ‰“å°å¹¶ä¼˜é›…é™çº§å¤„ç†</li>
<li>ç›´æ¥ã€æˆ–åŒ…è£…åè¿”å›</li>
</ul>
<p>å¤„ç†æ–­è¨€å¤±è´¥çš„æƒ…å†µï¼›</p>
<p>ä¸è¦<code>panic</code>ï¼›
ä»…åœ¨ä¸å¯æ¢å¤çš„é”™è¯¯æ—¶ï¼Œä½¿ç”¨<code>panic</code>ï¼›</p>
<p>ä½¿ç”¨<code>atomic</code>åŒ…ï¼›</p>
<p>ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡ï¼›</p>
<p>é˜»æ­¢åœ¨pubç»“æ„ä½“ä¸­å†…åµŒç±»å‹ï¼Œä¼šæš´éœ²å®ç°ç»†èŠ‚ï¼Œé˜»ç¢ç»“æ„ä½“è°ƒæ•´ï¼›ç§æœ‰ï¼Œå¹¶ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼›
å†…åµŒçš„ä¸å¯å¯¼å‡ºçš„ç±»å‹ä¸­ï¼Œå«æœ‰å¯å¯¼å‡ºå­—æ®µï¼Œä¹Ÿä¼šæš´éœ²å‡ºæ¥ï¼›
å†…åµŒç»“æ„ä¹Ÿæ¯”å†…åµŒç»“æ„ä½“å¥½ï¼Œä½†ä¾æ—§æš´éœ²å®ç°ç»†èŠ‚ï¼›
å†…åµŒçš„é—®é¢˜ï¼šå¯¹å†…åµŒç±»å‹çš„ä¿®æ”¹ï¼Œéƒ½æ˜¯breaking changeï¼›</p>
<p>é˜»æ­¢ä½¿ç”¨goå†…å»ºçš„åç§°ï¼šerrorï¼Œstringä¹‹ç±»çš„ï¼›</p>
<p>å°½å¯èƒ½ä¸ä½¿ç”¨<code>init()</code>å‡½æ•°ï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œåº”è¯¥ï¼š</p>
<ul>
<li>ä¸èƒ½ä¾èµ–å…¶ä»–<code>init()</code>å‡½æ•°</li>
<li>ä¸æ“ä½œå…¨å±€å˜é‡æˆ–ç¯å¢ƒå˜é‡ï¼Ÿ</li>
<li>ä¸è¿›è¡ŒIOæ“ä½œ
å¦‚ä¸‹æƒ…å†µä¹Ÿè®¸é€‚åˆï¼š</li>
<li>å¤æ‚çš„è®¡ç®—</li>
<li>å¯æ‹”æ’çš„é’©å­</li>
</ul>
<p>åœ¨mainå‡½æ•°é€€å‡ºï¼ˆè€Œä¸æ˜¯å…¶ä»–å‡½æ•°ï¼‰ï¼š
ä½¿ç”¨<code>os.Exit()</code>æˆ–<code>log.Fatal*</code>ç«‹åˆ»é€€å‡ºï¼›
ä»å…¶ä»–å‡½æ•°é€€å‡ºç¨‹åºï¼Œæœ‰å¦‚ä¸‹ç¼ºç‚¹ï¼šæ§åˆ¶æµç¨‹ä¸æ¸…æ™°ï¼›éš¾ä»¥æµ‹è¯•ï¼›è·³è¿‡äº†æ¸…ç†å·¥ä½œï¼›
å°½å¯èƒ½çš„åªé€€å‡ºä¸€æ¬¡ï¼›</p>
<p>åœ¨åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–ç»“æ„ä½“æ—¶ï¼Œä½¿ç”¨å­—æ®µtagï¼›é¿å…ä¿®æ”¹å­—æ®µåï¼Œå¯¼è‡´breakï¼›</p>
<p>å¯¹<code>goroutine</code>çš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç®¡ç†ï¼Œé¿å…åç¨‹æ³„æ¼ï¼›</p>
<ul>
<li>å¯é¢„æœŸçš„æ—¶é—´å†…ï¼Œåç¨‹åœæ­¢è¿è¡Œ</li>
<li>æœ‰ä¸€ç§æ–¹å¼ï¼Œä½¿å¾—åç¨‹åœæ­¢è¿è¡Œ</li>
</ul>
<ol>
<li>ç­‰å¾…goroutineé€€å‡ºï¼š<code>sync.WaitGroup</code> æˆ– <code>close(chan)</code></li>
<li><code>init()</code>å‡½æ•°å†…ä¸è¦äº§ç”Ÿ<code>goroutine</code></li>
</ol>
<h2 id="02--æ€§èƒ½ç¯‡">0.2 Â· æ€§èƒ½ç¯‡</h2>
<p>åŸºç¡€æ•°æ®ä¸<code>string</code>ä¹‹é—´çš„è½¬æ¢ï¼Œ<code>strconv</code>æ¯”<code>fmt</code>åŒ…å¿«ï¼›</p>
<p>é˜»æ­¢é‡å¤çš„å°†å­—ç¬¦ä¸²è½¬æ¢æˆå­—èŠ‚æ•°ç»„çš„æ“ä½œï¼Œè½¬æ¢å°±ä¼šåˆ†é…å†…å­˜ï¼›</p>
<p>é¢„å…ˆæŒ‡å®šå®¹å™¨å¤§å°ï¼Œé¿å…æ‰©å®¹æ“ä½œï¼›</p>
<h2 id="03--é£æ ¼ç¯‡">0.3 Â· é£æ ¼ç¯‡</h2>
<p>é¿å…ä»£ç è¡Œè¿‡é•¿ï¼Œå»ºè®®99ä¸ªå­—ç¬¦ï¼›</p>
<p>é£æ ¼ä¿æŒä¸€è‡´æ€§ï¼šæ˜“ç»´æŠ¤ã€æ˜“ç†è§£ã€ä½å¿ƒæ™ºæˆæœ¬ï¼Œæ˜“è¿ç§»æˆ–æ›´æ–°ï¼›</p>
<p>ç›¸ä¼¼çš„å£°æ˜ï¼Œæˆç»„ï¼›</p>
<p>import åˆ†ç»„ï¼Œæ’åºï¼šæ ‡å‡†åº“ï¼Œå…¶ä»–</p>
<p>åŒ…åï¼š</p>
<ul>
<li>å…¨éƒ¨å°å†™ï¼Œæ— å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿</li>
<li>å°½é‡ä¸é‡å‘½ååŒ…å</li>
<li>ç®€çŸ­ã€ç®€æ˜</li>
<li>ä¸è¦å¤æ•°</li>
<li>ä¸è¦ä¿¡æ¯é‡å¾ˆå°çš„åŒ…åï¼šcommon, util, lib ç­‰
<a href="https://go.dev/blog/package-names">https://go.dev/blog/package-names</a>
<a href="https://rakyll.org/style-packages">https://rakyll.org/style-packages</a></li>
</ul>
<p>å‡½æ•°åï¼šMixedCaps</p>
<p>å¯¼å…¥åŒ…åˆ«åï¼šä»…åœ¨å¯¼å…¥è·¯å¾„æœ€åä¸€ä¸ªå…ƒç´ ä¸ç¬¦åˆåŒ…åçš„æƒ…å†µä¸‹ä½¿ç”¨ï¼›
å…¶ä»–æƒ…å†µï¼Œé™¤éå†²çªï¼Œå¦åˆ™ä¸ä½¿ç”¨åˆ«åï¼›</p>
<p>å‡½æ•°åˆ†ç»„åŠæ’åºï¼š</p>
<ul>
<li>ç²—ç•¥çš„ä»¥è°ƒç”¨é¡ºåºæ’åº</li>
<li>ä»¥æ¥æ”¶å™¨åˆ†ç»„
å‡½æ•°åœ¨ç»“æ„ä½“ã€å¸¸é‡ã€å˜é‡åï¼›å·¥å‚æ¨¡å¼å‡½æ•°ç´§è·Ÿç€ç±»å‹ï¼Œä½†åœ¨å…¶ä»–æ–¹æ³•ä¹‹å‰ï¼›
æ— æ¥æ”¶å™¨å‡½æ•°åœ¨æœ€åï¼›</li>
</ul>
<p>å°½å¯èƒ½å‡å°‘åµŒå¥—ï¼šå…ˆå¤„ç†é”™è¯¯ã€ç‰¹æ®Šæƒ…å†µï¼Œå°½æ—©è¿”å›æˆ–continueå¾ªç¯ï¼›</p>
<p>å‡å°‘ä¸å¿…è¦çš„elseï¼›</p>
<p>é¡¶å±‚å˜é‡å£°åï¼šä¸éœ€è¦ç±»å‹ï¼Œä»…åœ¨éæƒ³è¦çš„ç±»å‹æ—¶ä½¿ç”¨ï¼›</p>
<p>ä¸å¯å¯¼å‡ºçš„å…¨å±€å˜é‡/å¸¸é‡ï¼Œä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼šé¿å…åœ¨ä¸åŒæ–‡ä»¶ä¹‹é—´ï¼Œæ„å¤–ä½¿ç”¨é”™è¯¯ï¼›</p>
<p>ç»“æ„ä½“å†…åµŒï¼š
è¢«å†…åµŒçš„ç»“æ„ä½“ï¼Œåº”è¯¥æ”¾åœ¨æœ€ä¸Šé¢ï¼Œä¸”ä½¿ç”¨ç©ºè¡Œéš”å¼€ï¼›
ä¸åº”è¯¥ï¼š</p>
<ul>
<li>ä¸åº”ä»¥ä¾¿åˆ©ä¸ºå¯¼å‘</li>
<li>ä¸èƒ½ä½¿å¾—å¤–éƒ¨ç±»å‹æ›´éš¾æ„é€ æˆ–ä½¿ç”¨</li>
<li>ä¸å½±å“å¤–éƒ¨ç±»å‹çš„é›¶å€¼ï¼šå¦‚æœå¤–éƒ¨ç±»å‹é›¶å€¼æœ‰ç”¨ï¼Œé‚£ä¹ˆå†…åµŒååº”è¯¥ä¿æŒ</li>
<li>ä¸èƒ½ç»™å¤–éƒ¨ç±»å‹æš´éœ²äº†æ— è”ç³»çš„å‡½æ•°æˆ–å­—æ®µ</li>
<li>ä¸èƒ½æ”¹å˜å¤–éƒ¨ç±»å‹çš„ç±»å‹è¯­æ„</li>
<li>ä¸èƒ½æš´éœ²å¤–éƒ¨ç±»å‹çš„å®ç°ç»†èŠ‚</li>
<li>ä¸å…è®¸ç”¨æˆ·æ“ä½œå†…éƒ¨ç±»å‹</li>
<li>ä¸èƒ½å› æ”¹å˜å†…éƒ¨ç±»å‹åŠŸèƒ½è€Œå¯¼è‡´å¤–éƒ¨ç±»å‹çš„ä½¿ç”¨å‘ç”Ÿæ”¹å˜</li>
</ul>
<p>å±€éƒ¨å˜é‡å£°åï¼šä½¿ç”¨<code>:=</code>çŸ­å˜é‡å£°åï¼›
é›¶å€¼æ—¶ï¼Œä½¿ç”¨<code>var</code>å£°æ˜ï¼›</p>
<p>nilæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åˆ‡ç‰‡ï¼›ä»¥é•¿åº¦åˆ¤æ–­ç©ºåˆ‡ç‰‡ï¼Œè€Œä¸æ˜¯nilï¼›
ä½†nilä¸ç­‰äºç©ºåˆ‡ç‰‡ï¼Œåœ¨æŸäº›åœºæ™¯è¡¨ç°ä¸ä¸€è‡´ï¼Œæ¯”å¦‚åºåˆ—åŒ–ï¼›</p>
<p>å°½å¯èƒ½ç¼©å°å˜é‡çš„èŒƒå›´(åœ¨ä¸è¿èƒŒå‡å°‘åµŒå¥—çš„æƒ…å†µä¸‹)ï¼›</p>
<p>é¿å…è£¸å‚æ•°ï¼Œç»™å‚æ•°åŠ ä¸Šæ³¨é‡Šï¼Ÿ
æœ€å¥½åŸºäºéœ€è¦ï¼ŒåŸºäºåŸºæœ¬ç±»å‹ï¼Œä½¿ç”¨æ–°ç±»å‹</p>
<p>ä½¿ç”¨åŸç”Ÿå­—ç¬¦ä¸²ï¼Œé¿å…è½¬ä¹‰ï¼›</p>
<p>åˆå§‹åŒ–ç»“æ„ä½“ï¼š</p>
<ul>
<li>ä½¿ç”¨å­—æ®µåè¿›è¡Œåˆå§‹åŒ–</li>
<li>é›¶å€¼çš„å­—æ®µï¼Œå¯ä»¥çœç•¥</li>
<li>ä½¿ç”¨<code>var</code>è¿›è¡Œé›¶å€¼åˆå§‹åŒ–ç»“æ„ä½“</li>
<li>ä½¿ç”¨<code>&#x26;T{}</code>è¿›è¡Œç»“æ„ä½“æŒ‡é’ˆåˆå§‹åŒ–</li>
</ul>
<p>ä½¿ç”¨<code>make</code>åˆå§‹åŒ–<code>map</code>ï¼›
mapæœ‰å›ºå®šå…ƒç´ æ•°é‡æ—¶ï¼Œä½¿ç”¨å­—é¢é‡åˆå§‹åŒ–ï¼›</p>
<p>æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼šå°†æ ¼å¼å­—ç¬¦ä¸²ç”¨constç”³æ˜ï¼Œä¾¿äº<code>go vet</code>é™æ€åˆ†æï¼Ÿ</p>
<p>å‘½åæ‰“å°é£æ ¼çš„å‡½æ•°ï¼šå‡½æ•°åä»¥fç»“å°¾ï¼›
<a href="https://kuzminva.wordpress.com/2017/11/07/go-vet-printf-family-check">https://kuzminva.wordpress.com/2017/11/07/go-vet-printf-family-check</a></p>
<h2 id="04--æ¨¡å¼ç¯‡">0.4 Â· æ¨¡å¼ç¯‡</h2>
<p>è¡¨æµ‹è¯•é©±åŠ¨
<a href="https://go.dev/blog/subtests">https://go.dev/blog/subtests</a></p>
<p>Functional Options</p>
<h2 id="05--linting">0.5 Â· linting</h2>
<p>golangci-lint</p> <!-- Diagrams rendered at build time -->  </article> <nav class="mt-12 pt-8 border-t border-nord-4 dark:border-nord-1" data-astro-cid-v5yihett> <a href="/notes" class="btn-primary" data-astro-cid-v5yihett> <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-astro-cid-v5yihett> <path d="M15 19l-7-7 7-7" data-astro-cid-v5yihett></path> </svg>
Back to Notes
</a> </nav>  </main> <footer class="border-t border-nord-5 dark:border-nord-1 mt-12"> <div class="max-w-4xl mx-auto px-4 py-6 text-sm text-nord-3 dark:text-nord-4 text-center"> <p>&copy; 2026. All rights reserved.</p> </div> </footer> <script type="module" src="/_astro/Base.astro_astro_type_script_index_0_lang.WDMQca9J.js"></script> <script>
      (function() {
        const root = document.getElementById('series-dropdown-root');
        const trigger = document.getElementById('series-dropdown-trigger');
        const panel = document.getElementById('series-dropdown-panel');
        const listEl = document.getElementById('series-dropdown-list');
        if (!root || !trigger || !panel || !listEl) return;

        let seriesList = null;
        let hoverTimeout = null;

        function open() {
          panel.classList.remove('hidden');
          trigger.setAttribute('aria-expanded', 'true');
          if (seriesList === null) {
            fetch('/series-list.json')
              .then((r) => r.json())
              .then((list) => {
                seriesList = list;
                if (list.length === 0) {
                  listEl.innerHTML = '<span class="block px-3 py-2 text-xs text-nord-4 dark:text-nord-3">æš‚æ— ç³»åˆ—</span>';
                } else {
                  listEl.innerHTML = list.map(function(name) {
                     const slug = name.toLowerCase().replace(/\s+/g, '-');
                     const url = '/notes/series/' + slug;
                     return '<a href="' + url + '" class="block px-3 py-2 text-sm text-nord-9 dark:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-2 transition-colors" role="menuitem">' + escapeHtml(name) + '</a>';
                   }).join('');
                }
              })
              .catch(function() {
                listEl.innerHTML = '<span class="block px-3 py-2 text-xs text-nord-11">åŠ è½½å¤±è´¥</span>';
              });
          }
        }

        function close() {
          panel.classList.add('hidden');
          trigger.setAttribute('aria-expanded', 'false');
        }

        function escapeHtml(s) {
          const div = document.createElement('div');
          div.textContent = s;
          return div.innerHTML;
        }

        // On click: allow default navigation to /notes/series
        // On hover: show dropdown menu
        trigger.addEventListener('click', function(e) {
          e.stopPropagation();
          // Don't preventDefault - allow link to navigate
        });

        trigger.addEventListener('mouseenter', function() {
          if (hoverTimeout) clearTimeout(hoverTimeout);
          hoverTimeout = setTimeout(open, 200);
        });

        root.addEventListener('mouseleave', function() {
          if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
          hoverTimeout = setTimeout(close, 150);
        });

        panel.addEventListener('mouseenter', function() {
          if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
        });

        document.addEventListener('click', function(e) {
          if (!root.contains(e.target)) close();
        });
      })();
    </script> <script>
      (function() {
        const root = document.getElementById('tags-dropdown-root');
        const trigger = document.getElementById('tags-dropdown-trigger');
        const panel = document.getElementById('tags-dropdown-panel');
        const listEl = document.getElementById('tags-dropdown-list');
        if (!root || !trigger || !panel || !listEl) return;

        let tagList = null;
        let hoverTimeout = null;

        function open() {
          panel.classList.remove('hidden');
          trigger.setAttribute('aria-expanded', 'true');
          if (tagList === null) {
            fetch('/tag-list.json')
              .then((r) => r.json())
              .then((list) => {
                tagList = list;
                if (list.length === 0) {
                  listEl.innerHTML = '<span class="block px-3 py-2 text-xs text-nord-4 dark:text-nord-3">æš‚æ— æ ‡ç­¾</span>';
                } else {
                  listEl.innerHTML = list.map(function(tag) {
                     const url = '/notes/tag/' + encodeURIComponent(tag);
                     return '<a href="' + url + '" class="block px-3 py-2 text-sm text-nord-9 dark:text-nord-8 hover:bg-nord-5 dark:hover:bg-nord-2 transition-colors" role="menuitem">' + escapeHtml(tag) + '</a>';
                   }).join('');
                }
              })
              .catch(function() {
                listEl.innerHTML = '<span class="block px-3 py-2 text-xs text-nord-11">åŠ è½½å¤±è´¥</span>';
              });
          }
        }

        function close() {
          panel.classList.add('hidden');
          trigger.setAttribute('aria-expanded', 'false');
        }

        function escapeHtml(s) {
          const div = document.createElement('div');
          div.textContent = s;
          return div.innerHTML;
        }

        trigger.addEventListener('click', function(e) {
          e.stopPropagation();
        });

        trigger.addEventListener('mouseenter', function() {
          if (hoverTimeout) clearTimeout(hoverTimeout);
          hoverTimeout = setTimeout(open, 200);
        });

        root.addEventListener('mouseleave', function() {
          if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
          hoverTimeout = setTimeout(close, 150);
        });

        panel.addEventListener('mouseenter', function() {
          if (hoverTimeout) { clearTimeout(hoverTimeout); hoverTimeout = null; }
        });

        document.addEventListener('click', function(e) {
          if (!root.contains(e.target)) close();
        });
      })();
    </script> </body> </html>  <script>
  // Language aliases (matches server-side)
  const langAliases = {
    js: 'javascript',
    ts: 'typescript',
    yml: 'yaml',
    yaml: 'yaml',
    sh: 'bash',
    shell: 'bash',
    sql: 'postgresql',
    java: 'openjdk',
  };

  // Add headers and copy buttons to code blocks
  function initCodeBlocks() {
    document.querySelectorAll('pre[data-language]').forEach((pre) => {
      // Skip if already processed
      if (pre.parentNode.classList.contains('code-block-wrapper')) return;
      
      const lang = pre.getAttribute('data-language') || 'code';
      
      // Create wrapper
      const wrapper = document.createElement('div');
      wrapper.className = 'code-block-wrapper';
      pre.parentNode.insertBefore(wrapper, pre);
      wrapper.appendChild(pre);
      
      // Create header
      const header = document.createElement('div');
      header.className = 'code-header';
      
      const langSpan = document.createElement('span');
      langSpan.className = 'code-header-lang';
      langSpan.title = lang;
      
      // Normalize lang for devicon
      const normalizedLang = lang.toLowerCase();
      const iconLang = langAliases[normalizedLang] || normalizedLang;
      
      // Display language with devicon (format: devicon-{name}-{version} colored)
      const iconEl = document.createElement('i');
      iconEl.className = `devicon-${iconLang}-plain colored`;
      iconEl.style.marginRight = '0.375rem';
      iconEl.style.fontSize = '0.75rem';
      langSpan.appendChild(iconEl);
      langSpan.appendChild(document.createTextNode(lang));
      
      const button = document.createElement('button');
      button.className = 'copy-code-btn';
      button.title = 'Copy to clipboard';
      button.innerHTML = '<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>';
      
      let isCopying = false;
      button.addEventListener('click', async () => {
        if (isCopying) return;
        isCopying = true;
        
        const code = pre.querySelector('code')?.textContent || '';
        try {
          await navigator.clipboard.writeText(code);
          const originalHtml = button.innerHTML;
          button.innerHTML = '<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
          button.title = 'Copied!';
          setTimeout(() => {
            button.innerHTML = originalHtml;
            button.title = 'Copy to clipboard';
            isCopying = false;
          }, 2000);
        } catch (err) {
          console.error('Failed to copy:', err);
          isCopying = false;
        }
      });
      
      header.appendChild(langSpan);
      header.appendChild(button);
      wrapper.appendChild(header);
    });
  }

  // Run ASAP, then on DOMContentLoaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCodeBlocks);
  } else {
    initCodeBlocks();
  }

  // Convert wikilinks to links on client side
  // Matches [[ref]] or [[ref|display text]]
  document.addEventListener('DOMContentLoaded', () => {
    const wikiRegex = /\[\[([a-zA-Z0-9][a-zA-Z0-9_-]*?)(?:\|([^\]]+))?\]\]/g;
    
    // Process all text nodes in prose content
    const walker = document.createTreeWalker(
      document.querySelector('.prose') || document.body,
      NodeFilter.SHOW_TEXT,
      null,
      false
    );
    
    const nodesToReplace = [];
    let node;
    
    while (node = walker.nextNode()) {
      if (node.nodeValue.includes('[[')) {
        nodesToReplace.push(node);
      }
    }
    
    nodesToReplace.forEach((textNode) => {
      const parent = textNode.parentNode;
      let lastIndex = 0;
      const matches = [...textNode.nodeValue.matchAll(wikiRegex)];
      
      if (matches.length === 0) return;
      
      const fragment = document.createDocumentFragment();
      
      matches.forEach((match) => {
        const [fullMatch, ref, displayText] = match;
        const startIndex = match.index;
        
        // Add text before match
        if (startIndex > lastIndex) {
          fragment.appendChild(
            document.createTextNode(textNode.nodeValue.slice(lastIndex, startIndex))
          );
        }
        
        // Create link
        const link = document.createElement('a');
        link.href = `/notes/${ref.toLowerCase()}`;
        link.textContent = (displayText || ref).trim();
        link.className = 'text-nord-9 dark:text-nord-8 hover:text-nord-10 dark:hover:text-nord-7 transition-colors';
        fragment.appendChild(link);
        
        lastIndex = startIndex + fullMatch.length;
      });
      
      // Add remaining text
      if (lastIndex < textNode.nodeValue.length) {
        fragment.appendChild(
          document.createTextNode(textNode.nodeValue.slice(lastIndex))
        );
      }
      
      parent.replaceChild(fragment, textNode);
    });
  });
</script> 